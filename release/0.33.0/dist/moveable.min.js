/*
Copyright (c) 2019 Daybrush
name: moveable
license: MIT
author: Daybrush
repository: https://github.com/daybrush/moveable/blob/master/packages/moveable
version: 0.33.0
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Moveable=e()}(this,function(){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function n(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.map(function(t){return t.split(" ").map(function(t){return t?""+e+t:""}).join(" ")}).join(" ")}function v(e,n){return function(t){t&&(e[n]=t)}}function s(e,n,r){return function(t){t&&(e[n][r]=t)}}function u(n,r){return function(t){var e=t.prototype;n.forEach(function(t){r(e,t)})}}var x=function(){function t(){this.keys=[],this.values=[]}var e=t.prototype;return e.get=function(t){return this.values[this.keys.indexOf(t)]},e.set=function(t,e){var n=this.keys,r=this.values,i=n.indexOf(t),i=-1===i?n.length:i;n[i]=t,r[i]=e},t}(),E=function(){function t(){this.object={}}var e=t.prototype;return e.get=function(t){return this.object[t]},e.set=function(t,e){this.object[t]=e},t}(),M="function"==typeof Map,c=function(){function t(){}var e=t.prototype;return e.connect=function(t,e){this.prev=t,this.next=e,t&&(t.next=this),e&&(e.prev=this)},e.disconnect=function(){var t=this.prev,e=this.next;t&&(t.next=e),e&&(e.prev=t)},e.getIndex=function(){for(var t=this,e=-1;t;)t=t.prev,++e;return e},t}();var C=function(){function t(t,e,n,r,i,o,a,s){this.prevList=t,this.list=e,this.added=n,this.removed=r,this.changed=i,this.maintained=o,this.changedBeforeAdded=a,this.fixed=s}var e=t.prototype;return Object.defineProperty(e,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(e,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),e.caculateOrdered=function(){t=this.changedBeforeAdded,n=this.fixed,i=[],o=[],t.forEach(function(t){var e=t[0],t=t[1],n=new c;i[e]=n,o[t]=n}),i.forEach(function(t,e){t.connect(i[e-1])});var n,i,o,t=t.filter(function(t,e){return!n[e]}).map(function(t,e){var n=t[0],t=t[1];if(n===t)return[0,0];var n=i[n],t=o[t-1],r=n.getIndex();return n.disconnect(),t?n.connect(t,t.next):n.connect(void 0,i[0]),[r,n.getIndex()]}),a=this.changed,s=[];this.cacheOrdered=t.filter(function(t,e){var n=t[0],t=t[1],e=a[e],r=e[0],e=e[1];if(n!==t)return s.push([r,e]),!0}),this.cachePureChanged=s},t}();function l(t,e,n){var r=M?Map:n?E:x,n=n||function(t){return t},i=[],o=[],a=[],s=t.map(n),n=e.map(n),u=new r,c=new r,l=[],f=[],p={},d=[],h=0,g=0;return s.forEach(function(t,e){u.set(t,e)}),n.forEach(function(t,e){c.set(t,e)}),s.forEach(function(t,e){t=c.get(t);void 0===t?(++g,o.push(e)):p[t]=g}),n.forEach(function(t,e){t=u.get(t);void 0===t?(i.push(e),++h):(a.push([t,e]),g=p[e]||0,l.push([t-g,e-h]),f.push(e===t),t!==e&&d.push([t,e]))}),o.reverse(),new C(t,e,i,o,d,a,l,f)}var t=function(){function t(t,e){void 0===t&&(t=[]),this.findKeyCallback=e,this.list=[].slice.call(t)}return t.prototype.update=function(t){var t=[].slice.call(t),e=l(this.list,t,this.findKeyCallback);return this.list=t,e},t}(),e="function",f="object",p="string",g="number",R="undefined",w=typeof window!==R,O=[{open:"(",close:")"},{open:'"',close:'"'},{open:"'",close:"'"},{open:'\\"',close:'\\"'},{open:"\\'",close:"\\'"}],A=1e-7,G={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,e){return t*e/100},vw:function(t,e){return t/100*(e=void 0===e?window.innerWidth:e)},vh:function(t,e){return t/100*(e=void 0===e?window.innerHeight:e)},vmax:function(t,e){return t/100*(e=void 0===e?Math.max(window.innerWidth,window.innerHeight):e)},vmin:function(t,e){return t/100*(e=void 0===e?Math.min(window.innerWidth,window.innerHeight):e)}};function i(t,e,n,r){return(t*r+e*n)/(n+r)}function U(t){return typeof t===R}function z(t){return t&&typeof t===f}function $(t){return Array.isArray(t)}function b(t){return typeof t===p}function ot(t){return typeof t===g}function at(t){return typeof t===e}function st(t,e,n,r,i){if(ut(t,e,n))return n;for(var o,a=t,s=e,u=r,c=i,l=n+1;l<u;++l){var f=function(t){var e,n,r=s[t].trim();return r!==a.close||ut(a,s,t)?(e=t,-1===(e=(n=vt(c,function(t){return t.open===r}))?st(n,s,t,u,c):e)?(o=t,"break"):void(o=t=e)):{value:t}}(l);if(l=o,"object"==typeof f)return f.value;if("break"===f)break}return-1}function ut(t,e,n){if(!t.ignore)return null;e=e.slice(Math.max(n-3,0),n+3).join("");return new RegExp(t.ignore).exec(e)}function ct(t,e){var e=b(e)?{separator:e}:e,n=e.separator,o=void 0===n?",":n,a=e.isSeparateFirst,s=e.isSeparateOnlyOpenClose,n=e.isSeparateOpenClose,u=void 0===n?s:n,n=e.openCloseCharacters,c=void 0===n?O:n,e=c.map(function(t){var e=t.open,t=t.close;return e===t?e:e+"|"+t}).join("|"),n=new RegExp("(\\s*"+o+"\\s*|"+e+"|\\s+)","g"),l=t.split(n).filter(Boolean),f=l.length,p=[],d=[];function h(){return d.length&&(p.push(d.join("")),d=[])}for(var g,r=0;r<f;++r){var i=function(t){var e=l[t].trim(),n=t,r=vt(c,function(t){return t.open===e}),i=vt(c,function(t){return t.close===e});if(r){if(-1!==(n=st(r,l,t,f,c))&&u)return h()&&a?(g=t,"break"):(p.push(l.slice(t,n+1).join("")),t=n,a?(g=t,"break"):(g=t,"continue"))}else{if(i&&!ut(i,l,t))throw new Error("invalid format: "+i.close);if(r=e,!((""!==(i=o)&&" "!=i||""!==r&&" "!=r)&&r!==i||s))return h(),a?(g=t,"break"):(g=t,"continue")}d.push(l.slice(t,(n=-1===n?f-1:n)+1).join("")),g=t=n}(r),r=g;if("break"===i)break}return d.length&&p.push(d.join("")),p}function S(t){return ct(t,"")}function lt(t){return ct(t,",")}function ft(t){t=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!t||t.length<4?{}:{prefix:t[1],value:t[2],suffix:t[3]}}function pt(t){t=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!t)return{prefix:"",unit:"",value:NaN};var e=t[1],n=t[2];return{prefix:e,unit:t[3],value:parseFloat(n)}}function dt(t,r){return void 0===r&&(r="-"),t.replace(/([a-z])([A-Z])/g,function(t,e,n){return""+e+r+n.toLowerCase()})}function ht(){return Date.now?Date.now():(new Date).getTime()}function gt(t,e,n){void 0===n&&(n=-1);for(var r=t.length,i=0;i<r;++i)if(e(t[i],i,t))return i;return n}function vt(t,e,n){e=gt(t,e);return-1<e?t[e]:n}var mt=function(){var n=ht(),t=w&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame);return t?t.bind(window):function(t){var e=ht();return window.setTimeout(function(){t(e-n)},1e3/60)}}(),bt=function(){var t=w&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame);return t?t.bind(window):function(t){clearTimeout(t)}}();function xt(t){if(Object.keys)return Object.keys(t);var e,n=[];for(e in n)n.push(e);return n}function Z(t,e){var t=pt(t),n=t.value,t=t.unit;if(z(e)){var r=e[t];if(r){if(at(r))return r(n);if(G[t])return G[t](n,r)}}else if("%"===t)return n*e/100;return G[t]?G[t](n):n}function Et(t,e,n){return Math.max(e,Math.min(t,n))}function St(t,r,i,e){return void 0===e&&(e=t[0]/t[1]),[[N(r[0],A),N(r[0]/e,A)],[N(r[1]*e,A),N(r[1],A)]].filter(function(t){return t.every(function(t,e){var e=r[e],n=N(e,A);return i?t<=e||t<=n:e<=t||n<=t})})[0]||t}function yt(t,n,r,e){if(!e)return t.map(function(t,e){return Et(t,n[e],r[e])});var i=t[0],o=t[1],e=!0===e?i/o:e,a=St(t,n,!1,e),s=a[0],a=a[1],t=St(t,r,!0,e),e=t[0],t=t[1];return i<s||o<a?(i=s,o=a):(e<i||t<o)&&(i=e,o=t),[i,o]}function Mt(t){for(var e=t.length,n=0,r=e-1;0<=r;--r)n+=t[r];return e?n/e:0}function F(t,e){var n=e[0]-t[0],e=e[1]-t[1],t=Math.atan2(e,n);return 0<=t?t:t+2*Math.PI}function Dt(t){n=t;var n,e=[0,1].map(function(e){return Mt(n.map(function(t){return t[e]}))}),r=F(e,t[0]),e=F(e,t[1]);return r<e&&e-r<Math.PI||e<r&&e-r<-Math.PI?1:-1}function D(t,e){return Math.sqrt(Math.pow((e?e[0]:0)-t[0],2)+Math.pow((e?e[1]:0)-t[1],2))}function N(t,e){if(!e)return t;var n=1/e;return Math.round(t/e)/n}function Ct(n,r){n.forEach(function(t,e){n[e]=N(n[e],r)})}function P(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function Rt(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function wt(t,e){t.classList?t.classList.remove(e):(e=new RegExp("(\\s|^)"+e+"(\\s|$)"),t.className=t.className.replace(e," "))}function Ot(t,e,n,r){t.addEventListener(e,n,r)}function d(t,e,n,r){t.removeEventListener(e,n,r)}var zt=function(t,e){return(zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Pt(t,e){function n(){this.constructor=t}zt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Bt=function(){return(Bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Gt(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function Tt(t,e){if(t===e)return!1;for(var n in t)if(!(n in e))return!0;for(var n in e)if(t[n]!==e[n])return!0;return!1}function _t(n,r){var i=Object.keys(n),e=Object.keys(r),t=l(i,e,function(t){return t}),o={},a={},s={};return t.added.forEach(function(t){t=e[t];o[t]=r[t]}),t.removed.forEach(function(t){t=i[t];a[t]=n[t]}),t.maintained.forEach(function(t){var t=t[0],t=i[t],e=[n[t],r[t]];n[t]!==r[t]&&(s[t]=e)}),{added:o,removed:a,changed:s}}function At(t){t.forEach(function(t){t()})}function It(t){var e=0;return t.map(function(t){return null==t?"$compat"+ ++e:""+t})}function kt(t,e,n,r){return b(t)||ot(t)?new Yt("text_"+t,e,n,r,null,{}):new("string"==typeof t.type?qt:t.type.prototype.render?Ut:Lt)(t.type,e,n,r,t.ref,t.props)}function Ft(t){var e=t.className,t=Gt(t,["className"]);return null!=e&&(t.class=e),delete t.style,delete t.children,t}function Nt(t,e){if(!e)return t;for(var n in e)U(t[n])&&(t[n]=e[n]);return t}function m(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var e=e||{},i=e.key,o=e.ref,e=Gt(e,["key","ref"]);return{type:t,key:i,ref:o,props:Bt(Bt({},e),{children:function e(t){var n=[];return t.forEach(function(t){n=n.concat($(t)?e(t):t)}),n}(n).filter(function(t){return null!=t&&!1!==t})})}}var Wt=function(){function t(t,e,n,r,i,o){void 0===o&&(o={}),this.type=t,this.key=e,this.index=n,this.container=r,this.ref=i,this.props=o,this._providers=[]}var e=t.prototype;return e._should=function(t,e){return!0},e._update=function(t,e,n,r){if(this.base&&!b(e)&&!r&&!this._should(e.props,n))return!1;this.original=e,this._setState(n);r=this.props;return b(e)||(this.props=e.props,this.ref=e.ref),this._render(t,this.base?r:{},n),!0},e._mounted=function(){var t=this.ref;t&&t(this.base)},e._setState=function(t){},e._updated=function(){var t=this.ref;t&&t(this.base)},e._destroy=function(){var t=this.ref;t&&t(null)},t}();function jt(t){var e,n={},r={};for(e in t)0===e.indexOf("on")?r[e.replace("on","").toLowerCase()]=t[e]:n[e]=t[e];return{attributes:n,events:r}}var Yt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Pt(e,t);var n=e.prototype;return n._render=function(t){var e=this,n=!this.base;return n&&(this.base=document.createTextNode(this.type.replace("text_",""))),t.push(function(){n?e._mounted():e._updated()}),!0},n._unmount=function(){this.base.parentNode.removeChild(this.base)},e}(Wt),qt=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.events={},t._isSVG=!1,t}Pt(t,e);var n=t.prototype;return n.addEventListener=function(t,e){var n=this.events;n[t]=function(t){t.nativeEvent=t,e(t)},this.base.addEventListener(t,n[t])},n.removeEventListener=function(t){var e=this.events;this.base.removeEventListener(t,e[t]),delete e[t]},n._should=function(t){return Tt(this.props,t)},n._render=function(t,e){var n,r=this,i=!this.base,o=(i&&(o=this._hasSVG(),this._isSVG=o,(s=this.props.portalContainer)||(a=this.type,s=o?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)),this.base=s),Jt(this,this._providers,this.props.children,t,null),this.base),a=jt(e),s=a.attributes,a=a.events,u=jt(this.props),c=u.attributes,u=u.events,s=Ft(s),c=Ft(c),l=o,f=(s=_t(s,c)).added,c=s.removed,p=s.changed;for(n in f)l.setAttribute(n,f[n]);for(n in p)l.setAttribute(n,p[n][1]);for(n in c)l.removeAttribute(n);var d,c=a,h=this,g=(c=_t(c,a=u)).added,a=c.removed,v=c.changed;for(d in a)h.removeEventListener(d);for(d in g)h.addEventListener(d,g[d]);for(d in v)h.removeEventListener(d),h.addEventListener(d,v[d][1]);for(d in a)h.removeEventListener(d);var m,u=e.style||{},c=this.props.style||{},e=o,b=e.style,x=(e=_t(u,c)).added,u=e.removed,E=e.changed;for(m in x){var S=dt(m,"-");b.setProperty?b.setProperty(S,x[m]):b[S]=x[m]}for(m in E){S=dt(m,"-");b.setProperty?b.setProperty(S,E[m][1]):b[S]=E[m][1]}for(m in u){S=dt(m,"-");b.removeProperty?b.removeProperty(S):b[S]=""}return t.push(function(){i?r._mounted():r._updated()}),!0},n._unmount=function(){var t,e=this.events,n=this.base;for(t in e)n.removeEventListener(t,e[t]);this._providers.forEach(function(t){t._unmount()}),this.events={},this.props.portalContainer||n.parentNode.removeChild(n)},n._hasSVG=function(){if(this._isSVG||"svg"===this.type)return!0;var t=Xt(this.container);return t&&"ownerSVGElement"in t},t}(Wt);function Xt(t){if(!t)return null;var e=t.base;return e instanceof Node?e:Xt(t.container)}function Ht(t){if(!t)return null;if(t instanceof Node)return t;t=t.$_provider._providers;return t.length?Ht(t[0].base):null}var Lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Pt(e,t);var n=e.prototype;return n._render=function(t){var e=this.type(this.props);return Jt(this,this._providers,e?[e]:[],t),!0},n._unmount=function(){this._providers.forEach(function(t){t._unmount()})},e}(Wt),Vt=function(n){function t(t){var e=n.call(this,"container","container",0,null)||this;return e.base=t,e}Pt(t,n);var e=t.prototype;return e._render=function(){return!0},e._unmount=function(){},t}(Wt),Ut=function(a){function t(t,e,n,r,i,o){return a.call(this,t,e,n,r,i,Nt(o=void 0===o?{}:o,t.defaultProps))||this}Pt(t,a);var e=t.prototype;return e._should=function(t,e){return this.base.shouldComponentUpdate(Nt(t,this.type.defaultProps),e||this.base.state)},e._render=function(t,e){var n=this,r=(this.props=Nt(this.props,this.type.defaultProps),!this.base),i=(r?(this.base=new this.type(this.props),this.base.$_provider=this):this.base.props=this.props,this.base),o=i.state,a=i.render();a&&a.props&&!a.props.children.length&&(a.props.children=this.props.children),Jt(this,this._providers,a?[a]:[],t),t.push(function(){r?(n._mounted(),i.componentDidMount()):(n._updated(),i.componentDidUpdate(e,o))})},e._setState=function(t){var e=this.base;e&&t&&(e.state=t)},e._unmount=function(){this._providers.forEach(function(t){t._unmount()}),clearTimeout(this.base.$_timer),this.base.componentWillUnmount()},t}(Wt),Wt=function(){function t(t){this.props=t=void 0===t?{}:t,this.state={},this.$_timer=0,this.$_state={}}var e=t.prototype;return e.shouldComponentUpdate=function(t,e){return!0},e.render=function(){return null},e.setState=function(t,e,n){var r=this;this.$_timer||(this.$_state={}),clearTimeout(this.$_timer),this.$_timer=0,this.$_state=Bt(Bt({},this.$_state),t),n?this.$_setState(e,n):this.$_timer=setTimeout(function(){r.$_timer=0,r.$_setState(e,n)})},e.forceUpdate=function(t){this.setState({},t,!0)},e.componentDidMount=function(){},e.componentDidUpdate=function(t,e){},e.componentWillUnmount=function(){},e.$_setState=function(t,e){var n=[],r=this.$_provider;Jt(r.container,[r],[r.original],n,Bt(Bt({},this.state),this.$_state),e)&&(t&&n.push(t),At(n))},t}(),$t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Pt(e,t),e.prototype.shouldComponentUpdate=function(t,e){return Tt(this.props,t)||Tt(this.state,e)},e}(Wt),Zt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Pt(e,t);var n=e.prototype;return n.componentDidMount=function(){var t=this.props,e=t.element,t=t.container;this._portalProvider=new Vt(t),Qt(e,t,this._portalProvider)},n.componentDidUpdate=function(){var t=this.props;Qt(t.element,t.container,this._portalProvider)},n.componentWillUnmount=function(){Qt(null,this.props.container,this._portalProvider),this._portalProvider=null},e}($t);function Kt(r,i,o){var a=o.map(function(t){return b(t)?null:t.key}),t=l(It(i.map(function(t){return t.key})),It(a),function(t){return t}),e=(t.removed.forEach(function(t){i.splice(t,1)[0]._unmount()}),t.ordered.forEach(function(t){var e=t[0],t=t[1],e=i.splice(e,1)[0],e=(i.splice(t,0,e),Ht(e.base)),t=Ht(i[t+1]&&i[t+1].base);e&&e.parentNode.insertBefore(e,t)}),t.added.forEach(function(t){i.splice(t,0,kt(o[t],a[t],t,r))}),t.maintained.filter(function(t){t[0];var t=t[1],e=o[t],n=i[t];return(b(e)?"text_"+e:e.type)!==n.type?(n._unmount(),i.splice(t,1,kt(e,a[t],t,r)),!0):(n.index=t,!1)}));return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t.added,e.map(function(t){return t[0],t[1]}))}function Jt(n,r,i,o,a,s){var t=Kt(n,r,i),e=r.filter(function(t,e){return t._update(o,i[e],a,s)}),u=Xt(n);return u&&t.reverse().forEach(function(t){var t=r[t],e=Ht(t.base);e&&u!==e&&!e.parentNode&&(t=function(t,e){for(var n=t._providers,r=n.length,i=e.index+1;i<r;++i){var o=Ht(n[i].base);if(o)return o}return null}(n,t),u.insertBefore(e,t))}),0<e.length}function Qt(t,e,n){var r,i,o=!!(n=void 0===n?e.__REACT_COMPAT__:n);n=n||new Vt(e),t=t?[t]:[],i=[],Jt(n,n._providers,t,i,r),At(i),o||(e.__REACT_COMPAT__=n)}function te(t,e,n){var r=e.__REACT_COMPAT__;t&&!r&&(e.innerHTML=""),Qt(t,e,r),n&&n()}var ee="simple-1.1.0";function ne(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return!0;return!1}function re(t,e){for(var n=t.length,r=0;r<n;++r)if(e(t[r],r))return t[r];return null}function ie(t){if(void 0===t){if("undefined"==typeof navigator||!navigator)return"";t=navigator.userAgent||""}return t.toLowerCase()}function oe(t,e){try{return new RegExp(t,"g").exec(e)}catch(t){return null}}function ae(t){return t.replace(/_/g,".")}function se(t,n){var r=null,i="-1";return ne(t,function(t){var e=oe("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",n);if(e&&!t.brand)return r=t,i=e[3]||"-1",t.versionAlias?i=t.versionAlias:t.versionTest&&(e=t.versionTest.toLowerCase(),i=((e=oe("("+e+")((?:\\/|\\s|:)([0-9|\\.|_]+))",n))?e[3]:"")||i),i=ae(i),1}),{preset:r,version:i}}function ue(t,n){var r={brand:"",version:"-1"};return ne(t,function(t){var e=ce(n,t);return e&&(r.brand=t.id,r.version=t.versionAlias||e.version,"-1"!==r.version)}),r}function ce(t,e){return re(t,function(t){t=t.brand;return oe(""+e.test,t.toLowerCase())})}var le=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],fe=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome",versionTest:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",versionAlias:"-1",brand:!0}],pe=[{test:"applewebkit",id:"webkit",versionTest:"applewebkit|safari"}],de=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],he=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"win32|windows",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"macos|macintel|mac os x",id:"mac"},{test:"android|linux armv81",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function ge(t){return!!se(de,t).preset}function ve(t){return void 0===t&&function(){var t;if("undefined"!=typeof navigator&&navigator&&navigator.userAgentData)return(t=(t=navigator.userAgentData).brands||t.uaList)&&t.length}()?(i=((c=navigator.userAgentData).uaList||c.brands).slice(),o=r&&r.fullVersionList,a=c.mobile||!1,s=i[0],u=(r&&r.platform||c.platform||navigator.platform).toLowerCase(),c={name:s.brand,version:s.version,majorVersion:-1,webkit:!1,webkitVersion:"-1",chromium:!1,chromiumVersion:"-1",webview:!!ue(de,i).brand||ge(ie())},s={name:"unknown",version:"-1",majorVersion:-1},c.webkit=!c.chromium&&ne(pe,function(t){return ce(i,t)}),l=ue(fe,i),c.chromium=!!l.brand,c.chromiumVersion=l.version,c.chromium||(l=ue(pe,i),c.webkit=!!l.brand,c.webkitVersion=l.version),l=re(he,function(t){return new RegExp(""+t.test,"g").exec(u)}),s.name=l?l.id:"",r&&(s.version=r.platformVersion),o&&o.length?(l=ue(le,o),c.name=l.brand||c.name,c.version=l.version||c.version):(o=ue(le,i),c.name=o.brand||c.name,c.version=o.brand&&r?r.uaFullVersion:o.version),c.webkit&&(s.name=a?"ios":"mac"),"ios"===s.name&&c.webview&&(c.version="-1"),s.version=ae(s.version),c.version=ae(c.version),s.majorVersion=parseInt(s.version,10),c.majorVersion=parseInt(c.version,10),{browser:c,os:s,isMobile:a,isHints:!0}):(l=ie(l=t),r=!!/mobi/g.exec(l),o={name:"unknown",version:"-1",majorVersion:-1,webview:ge(l),chromium:!1,chromiumVersion:"-1",webkit:!1,webkitVersion:"-1"},c={name:"unknown",version:"-1",majorVersion:-1},a=(s=se(le,l)).preset,s=s.version,e=(t=se(he,l)).preset,t=t.version,n=se(fe,l),o.chromium=!!n.preset,o.chromiumVersion=n.version,o.chromium||(n=se(pe,l),o.webkit=!!n.preset,o.webkitVersion=n.version),e&&(c.name=e.id,c.version=t,c.majorVersion=parseInt(t,10)),a&&(o.name=a.id,o.version=s,o.webview&&"ios"===c.name&&"safari"!==o.name&&(o.webview=!1)),o.majorVersion=parseInt(o.version,10),{browser:o,os:c,isMobile:r,isHints:!1});var e,n,r,i,o,a,s,u,c,l}function me(t,e,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),i=0;i<n;++i)r[i*n+e-1]=0,r[(e-1)*n+i]=0;return r[(e-1)*(n+1)]=1,r}function y(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=t.slice(),r=k(e),i=0;i<e;++i){var o=e*i+i;if(!N(n[o],A))for(var a=i+1;a<e;++a)if(n[e*i+a]){v=g=h=d=p=f=l=c=u=s=void 0;for(var s=n,u=r,c=i,l=a,f=e,p=0;p<f;++p){var d=c+p*f,h=l+p*f,g=s[d],v=u[d];s[d]=s[h],s[h]=g,u[d]=u[h],u[h]=v}break}if(!N(n[o],A))return[];M=y=S=E=x=b=m=void 0;for(var m=n,b=r,x=i,E=e,S=n[o],y=0;y<E;++y){var M=x+y*E;m[M]/=S,b[M]/=S}for(a=0;a<e;++a){var D=a,C=n[a+i*e];if(N(C,A)&&i!==a){_=T=G=B=P=z=O=w=R=void 0;for(var R=n,w=r,O=D,z=i,P=e,B=-C,G=0;G<P;++G){var T=O+G*P,_=z+G*P;R[T]+=R[_]*B,w[T]+=w[_]*B}}}}return r}function be(t,e){for(var n=[],r=t[(e=void 0===e?Math.sqrt(t.length):e)*e-1],i=0;i<e-1;++i)n[i]=t[e*(e-1)+i]/r;return n[e-1]=0,n}function xe(t,e){for(var n=k(e),r=0;r<e-1;++r)n[e*(e-1)+r]=t[r]||0;return n}function Ee(t,e){for(var n=t.slice(),r=t.length;r<e-1;++r)n[r]=0;return n[e-1]=1,n}function I(t,e,n){if((e=void 0===e?Math.sqrt(t.length):e)===n)return t;for(var r=k(n),i=Math.min(e,n),o=0;o<i-1;++o){for(var a=0;a<i-1;++a)r[o*n+a]=t[o*e+a];r[(o+1)*n-1]=t[(o+1)*e-1],r[(n-1)*n+o]=t[(e-1)*e+o]}return r[n*n-1]=t[e*e-1],r}function Se(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=k(e);return t.forEach(function(t){r=K(r,t,e)}),r}function K(t,e,n){void 0===n&&(n=Math.sqrt(t.length));var r=[],i=t.length/n,o=e.length/i;if(!i)return e;if(!o)return t;for(var a=0;a<n;++a)for(var s=0;s<o;++s)for(var u=r[s*n+a]=0;u<i;++u)r[s*n+a]+=t[u*n+a]*e[s*i+u];return r}function J(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]+e[i];return r}function T(t,e){for(var n=Math.min(t.length,e.length),r=t.slice(),i=0;i<n;++i)r[i]=r[i]-e[i];return r}function ye(t,e){return(e=void 0===e?6===t.length:e)?[t[0],t[1],0,t[2],t[3],0,t[4],t[5],1]:t}function Me(t,e){return(e=void 0===e?9===t.length:e)?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function B(t,e,n){var t=K(t,e,n=void 0===n?e.length:n),r=t[n-1];return t.map(function(t){return t/r})}function De(t,e){return K(t,[1,0,0,0,0,Math.cos(e),Math.sin(e),0,0,-Math.sin(e),Math.cos(e),0,0,0,0,1],4)}function Ce(t,e){return K(t,[Math.cos(e),0,-Math.sin(e),0,0,1,0,0,Math.sin(e),0,Math.cos(e),0,0,0,0,1],4)}function Re(t,e){return K(t,Be(e,4))}function we(t,e){var n=e[0],r=e[1],e=e[2];return K(t,[void 0===n?1:n,0,0,0,0,void 0===r?1:r,0,0,0,0,void 0===e?1:e,0,0,0,0,1],4)}function Oe(t,e){return B(Be(e,3),Ee(t,3))}function ze(t,e){var n=e[0],r=e[1],e=e[2];return K(t,[1,0,0,0,0,1,0,0,0,0,1,0,void 0===n?0:n,void 0===r?0:r,void 0===e?0:e,1],4)}function Pe(t,e){return K(t,e,4)}function Be(t,e){var n=Math.cos(t),t=Math.sin(t),r=k(e);return r[0]=n,r[1]=t,r[e]=-t,r[e+1]=n,r}function k(t){for(var e=t*t,n=[],r=0;r<e;++r)n[r]=r%(t+1)?0:1;return n}function Ge(t,e){for(var n=k(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[(e+1)*i]=t[i];return n}function Te(t,e){for(var n=k(e),r=Math.min(t.length,e-1),i=0;i<r;++i)n[e*(e-1)+i]=t[i];return n}function _e(t,e,n,r,i,o,a,s){var u=t[0],t=t[1],c=e[0],e=e[1],l=n[0],n=n[1],f=r[0],r=r[1],p=i[0],i=i[1],d=o[0],o=o[1],h=a[0],a=a[1],g=s[0],s=s[1],u=y([u,0,c,0,l,0,f,0,t,0,e,0,n,0,r,0,1,0,1,0,1,0,1,0,0,u,0,c,0,l,0,f,0,t,0,e,0,n,0,r,0,1,0,1,0,1,0,1,-p*u,-i*u,-d*c,-o*c,-h*l,-a*l,-g*f,-s*f,-p*t,-i*t,-d*e,-o*e,-h*n,-a*n,-g*r,-s*r],8);if(!u.length)return[];c=K(u,[p,i,d,o,h,a,g,s],8);return c[8]=1,I(function(t,e){void 0===e&&(e=Math.sqrt(t.length));for(var n=[],r=0;r<e;++r)for(var i=0;i<e;++i)n[i*e+r]=t[e*r+i];return n}(c),3,4)}function Ae(t){return ke(Fe(t))}function Ie(t,e){t=B(t,[e[0],e[1]||0,e[2]||0,1],4),e=t[3]||1;return[t[0]/e,t[1]/e,t[2]/e]}function ke(t){var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach(function(t){var e=t.matrixFunction,t=t.functionValue;e&&(n=e(n,t))}),n}function Fe(t){return($(t)?t:S(t)).map(function(t){var e,n,r,t=ft(t),i=t.prefix,t=t.value,o=null,a=i,s="";return"translate"===i||"translateX"===i||"translate3d"===i?(o=ze,s=[(r=lt(t).map(function(t){return parseFloat(t)}))[0],void 0===(e=r[1])?0:e,void 0===(e=r[2])?0:e]):"translateY"===i?(o=ze,s=[0,parseFloat(t),0]):"translateZ"===i?(o=ze,s=[0,0,parseFloat(t)]):"scale"===i||"scale3d"===i?(o=we,s=[n=(r=lt(t).map(function(t){return parseFloat(t)}))[0],void 0===(e=r[1])?n:e,void 0===(e=r[2])?1:e]):"scaleX"===i?(o=we,s=[n=parseFloat(t),1,1]):"scaleY"===i?(o=we,s=[1,parseFloat(t),1]):"scaleZ"===i?(o=we,s=[1,1,parseFloat(t)]):"rotate"===i||"rotateZ"===i||"rotateX"===i||"rotateY"===i?(e=(r=pt(t)).unit,n=r.value,"rotate"===i||"rotateZ"===i?(a="rotateZ",o=Re):"rotateX"===i?o=De:"rotateY"===i&&(o=Ce),s="rad"===e?n:n*Math.PI/180):"matrix3d"===i?(o=Pe,s=lt(t).map(function(t){return parseFloat(t)})):"matrix"===i?(o=Pe,s=[(r=lt(t).map(function(t){return parseFloat(t)}))[0],r[1],0,0,r[2],r[3],0,0,0,0,1,0,r[4],r[5],0,1]):a="",{name:i,functionName:a,value:t,matrixFunction:o,functionValue:s}})}var Ne=function(t,e){return(Ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var We,je="function"==typeof Map?void 0:(We=0,function(t){return t.__DIFF_KEY__||(t.__DIFF_KEY__=++We)}),Ye=function(e){function t(){this.constructor=n}var n,r;function i(t){return e.call(this,t=void 0===t?[]:t,je)||this}return Ne(n=i,r=e),n.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t),i}(t);function qe(t,e){return l(t,e,je)}function Xe(t){return N(t,A)}function He(n){return n.length<3?0:Math.abs(function(t){for(var e=0,n=t.length-1;0<=n;--n)e+=t[n];return e}(n.map(function(t,e){e=n[e+1]||n[0];return t[0]*e[1]-e[0]*t[1]})))/2}function Le(t,e){var n=e.width,r=e.height,i=e.left,o=e.top,e=Ve(t),a=e.minX,s=e.minY,u=e.maxX,e=e.maxY,c=n/(u-a),l=r/(e-s);return t.map(function(t){return[i+(t[0]-a)*c,o+(t[1]-s)*l]})}function Ve(t){var e=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]});return{minX:Math.min.apply(Math,e),minY:Math.min.apply(Math,t),maxX:Math.max.apply(Math,e),maxY:Math.max.apply(Math,t)}}function Ue(i,t,e){var r=i[0],o=i[1],n=Ve(t),a=n.minX,n=n.maxX,s=[[a,o],[n,o]],u=$e(s[0],s[1]),a=Je(t),c=[];if(a.forEach(function(t){var n,e=$e(t[0],t[1]),r=t[0];n=e,u.every(function(t,e){return 0===Xe(t-n[e])})?c.push({pos:i,line:t,type:"line"}):Ke(Ze(u,e),[s,t]).forEach(function(n){t.some(function(t){return e=n,!Xe((t=t)[0]-e[0])&&!Xe(t[1]-e[1]);var e})?c.push({pos:n,line:t,type:"point"}):0!==Xe(r[1]-o)&&c.push({pos:n,line:t,type:"intersection"})})}),!e&&vt(c,function(t){return t[0]===r}))return!0;var l=0,f={};return c.forEach(function(t){var e=t.pos,n=t.type,t=t.line;e[0]>r||("intersection"===n?++l:"line"!==n&&"point"===n&&(n=vt(t,function(t){return t[1]!==o}),t=f[e[0]],n=n[1]>o?1:-1,t?t!==n&&++l:f[e[0]]=n))}),l%2==1}function $e(t,e){var n=t[0],t=t[1],r=e[0]-n,e=e[1]-t,i=(Math.abs(r)<A&&(r=0),Math.abs(e)<A&&(e=0),0),o=0,a=0;return r?a=e?(o=1,-(i=-e/r)*n-t):(o=1,-t):e&&(i=-1,a=n),[i,o,a]}function Ze(t,e){var n,r,i=t[0],o=t[1],t=t[2],a=e[0],s=e[1],e=e[2],u=0===i&&0===a,c=0===o&&0===s;return u&&c?[]:u?(u=-t/o)!=-e/s?[]:[[-1/0,u],[1/0,u]]:c?(u=-t/i)!=-e/a?[]:[[u,-1/0],[u,1/0]]:(0===i?[[n=-(s*(r=-t/o)+e)/a,r]]:0===a?[[n=-(o*(r=-e/s)+t)/i,r]]:0===o?[[n=-t/i,r=-(a*n+e)/s]]:0===s?[[n=-e/a,r=-(i*n+t)/o]]:[[n=(o*e-s*t)/(s*i-o*a),r=-(i*n+t)/o]]).map(function(t){return[t[0],t[1]]})}function Ke(t,e){var r=e.map(function(e){return[0,1].map(function(t){return[Math.min(e[0][t],e[1][t]),Math.max(e[0][t],e[1][t])]})}),e=[];if(2===t.length){var n=t[0],i=n[0],n=n[1];if(Xe(i-t[1][0])){if(!Xe(n-t[1][1])){var o=Math.max.apply(Math,r.map(function(t){return t[0][0]})),a=Math.min.apply(Math,r.map(function(t){return t[0][1]}));if(0<Xe(o-a))return[];e=[[o,n],[a,n]]}}else{o=Math.max.apply(Math,r.map(function(t){return t[1][0]})),a=Math.min.apply(Math,r.map(function(t){return t[1][1]}));if(0<Xe(o-a))return[];e=[[i,o],[i,a]]}}return(e=e.length?e:t.filter(function(t){var e=t[0],n=t[1];return r.every(function(t){return 0<=Xe(e-t[0][0])&&0<=Xe(t[0][1]-e)&&0<=Xe(n-t[1][0])&&0<=Xe(t[1][1]-n)})})).map(function(t){return[Xe(t[0]),Xe(t[1])]})}function Je(n){return function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(n.slice(1),[n[0]]).map(function(t,e){return[n[e],t]})}function Qe(t,e){var i,a,s,u,c,l,n;return e=e,i=(t=t).slice(),a=e.slice(),-1===Dt(i)&&i.reverse(),-1===Dt(a)&&a.reverse(),s=Je(i),u=Je(a),t=s.map(function(t){return $e(t[0],t[1])}),c=u.map(function(t){return $e(t[0],t[1])}),l=[],t.forEach(function(n,r){var i=s[r],o=[];c.forEach(function(t,e){t=Ke(Ze(n,t),[i,u[e]]);o.push.apply(o,t.map(function(t){return{index1:r,index2:e,pos:t,type:"intersection"}}))}),o.sort(function(t,e){return D(i[0],t.pos)-D(i[0],e.pos)}),l.push.apply(l,o),Ue(i[1],a)&&l.push({index1:r,index2:-1,pos:i[1],type:"inside"})}),u.forEach(function(t,n){var r,e;Ue(t[1],i)&&(r=!1,-1===(e=gt(l,function(t){if(t.index2!==n)return!!r;r=!0}))&&(r=!1,e=gt(l,function(t){var e=t.index1,t=t.index2;if(-1!==e||t+1!==n)return!!r;r=!0})),-1===e?l.push({index1:-1,index2:n,pos:t[1],type:"inside"}):l.splice(e,0,{index1:-1,index2:n,pos:t[1],type:"inside"}))}),n={},l.filter(function(t){t=t.pos,t=t[0]+"x"+t[1];return!n[t]&&(n[t]=!0)}).map(function(t){return t.pos})}function tn(t,e){return He(Qe(t,e))}var en=function(){return(en=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var nn=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(z(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(z(t))for(var n in t)this.off(n);else{var r,i;e?(r=this._events[t])&&-1<(i=gt(r,function(t){return t.listener===e}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var r=this,t=(void 0===n&&(n={}),this._events[e]);if(!e||!t)return!0;var i=!1;return n.eventType=e,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t).forEach(function(t){t.listener(n),t.once&&r.off(e,t.listener)}),!i},e.trigger=function(t,e){return this.emit(t,e=void 0===e?{}:e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(en({listener:e},n))},t}(),rn=function(t,e){return(rn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var on=function(){return(on=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function an(t){t=t.container;return t===document.body?[t.scrollLeft||document.documentElement.scrollLeft,t.scrollTop||document.documentElement.scrollTop]:[t.scrollLeft,t.scrollTop]}function sn(t){return t?at(t)?t():t instanceof Element?t:"current"in t?t.current:"value"in t?t.value:void 0:null}var un=function(e){function t(){this.constructor=n}var n;function r(){var t=null!==e&&e.apply(this,arguments)||this;return t._startRect=null,t._startPos=[],t._prevTime=0,t._timer=0,t._prevScrollPos=[0,0],t._isWait=!1,t._flag=!1,t}rn(n=r,i=e),n.prototype=null===i?Object.create(i):(t.prototype=i.prototype,new t);var i=r.prototype;return i.dragStart=function(t,e){var n,r,i,o,a=sn(e.container);a?(o=i=r=n=0,o=a===document.body?(i=window.innerWidth,window.innerHeight):(n=(a=a.getBoundingClientRect()).top,r=a.left,i=a.width,a.height),this._flag=!0,this._startPos=[t.clientX,t.clientY],this._startRect={top:n,left:r,width:i,height:o},this._prevScrollPos=this._getScrollPosition([0,0],e)):this._flag=!1},i.drag=function(t,e){var n,r,i,o,a,s;if(this._flag)return n=t.clientX,r=t.clientY,i=e.threshold,i=void 0===i?0:i,o=this._startRect,a=this._startPos,s=[0,0],o.top>r-i?(a[1]>o.top||r<a[1])&&(s[1]=-1):o.top+o.height<r+i&&(a[1]<o.top+o.height||r>a[1])&&(s[1]=1),o.left>n-i?(a[0]>o.left||n<a[0])&&(s[0]=-1):o.left+o.width<n+i&&(a[0]<o.left+o.width||n>a[0])&&(s[0]=1),clearTimeout(this._timer),!(!s[0]&&!s[1])&&this._continueDrag(on(on({},e),{direction:s,inputEvent:t,isDrag:!0}))},i.checkScroll=function(t){var e=this;if(this._isWait)return!1;var n=t.prevScrollPos,n=void 0===n?this._prevScrollPos:n,r=t.direction,i=t.throttleTime,i=void 0===i?0:i,o=t.inputEvent,a=t.isDrag,s=this._getScrollPosition(r||[0,0],t),u=s[0]-n[0],n=s[1]-n[1],r=r||[u?Math.abs(u)/u:0,n?Math.abs(n)/n:0];return this._prevScrollPos=s,!(!u&&!n)&&(this.trigger("move",{offsetX:r[0]?u:0,offsetY:r[1]?n:0,inputEvent:o}),i&&a&&(this._timer=window.setTimeout(function(){e._continueDrag(t)},i)),!0)},i.dragEnd=function(){clearTimeout(this._timer)},i._getScrollPosition=function(t,e){var n=e.container,e=e.getScrollPosition;return(void 0===e?an:e)({container:sn(n),direction:t})},i._continueDrag=function(t){var e=this,n=t.container,r=t.direction,i=t.throttleTime,o=t.useScroll,a=t.isDrag,s=t.inputEvent;if(!a||!this._isWait){var u=ht(),i=Math.max(i+this._prevTime-u,0);if(0<i)return this._timer=window.setTimeout(function(){e._continueDrag(t)},i),!1;this._prevTime=u;i=this._getScrollPosition(r,t);return this._prevScrollPos=i,a&&(this._isWait=!0),this.trigger("scroll",{container:sn(n),direction:r,inputEvent:s}),this._isWait=!1,o||this.checkScroll(on(on({},t),{prevScrollPos:i,direction:r,inputEvent:s}))}},r}(nn),cn=function(t,e){return(cn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ln(t){return 180*(e=[t[0].clientX,t[0].clientY],t=[t[1].clientX,t[1].clientY],n=t[0]-e[0],t=t[1]-e[1],(0<=(e=Math.atan2(t,n))?e:e+2*Math.PI)/Math.PI);var e,n}function fn(t){if(!t)return[];if(t.touches){for(var e=t.touches,n=Math.min(e.length,2),r=[],i=0;i<n;++i)r.push(hn(e[i]));return r}return[hn(t)]}function pn(t,e,n){var r=n.length,t=gn(t,r),i=t.clientX,o=t.clientY,a=t.originalClientX,t=t.originalClientY,e=gn(e,r),s=e.clientX,e=e.clientY,n=gn(n,r);return{clientX:a,clientY:t,deltaX:i-s,deltaY:o-e,distX:i-n.clientX,distY:o-n.clientY}}function dn(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function hn(t){return{clientX:t.clientX,clientY:t.clientY}}function gn(t,e){void 0===e&&(e=t.length);for(var n={clientX:0,clientY:0,originalClientX:0,originalClientY:0},r=0;r<e;++r){var i=t[r];n.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,n.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,n.clientX+=i.clientX,n.clientY+=i.clientY}return e?{clientX:n.clientX/e,clientY:n.clientY/e,originalClientX:n.originalClientX/e,originalClientY:n.originalClientY/e}:n}var vn=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var e=t.prototype;return e.getAngle=function(t){return ln(t=void 0===t?this.prevClients:t)},e.getRotation=function(t){return ln(t=void 0===t?this.prevClients:t)-ln(this.startClients)},e.getPosition=function(t,e){var n=pn((t=void 0===t?this.prevClients:t)||this.prevClients,this.prevClients,this.startClients),r=n.deltaX,i=n.deltaY;return this.movement+=Math.sqrt(r*r+i*i),this.prevClients=t,n},e.getPositions=function(n){void 0===n&&(n=this.prevClients);var r=this.prevClients;return this.startClients.map(function(t,e){return pn([n[e]],[r[e]],[t])})},e.getMovement=function(t){var e=this.movement;if(!t)return e;var t=gn(t,this.length),n=gn(this.prevClients,this.length),r=t.clientX-n.clientX,t=t.clientY-n.clientY;return Math.sqrt(r*r+t*t)+e},e.getDistance=function(t){return dn(t=void 0===t?this.prevClients:t)},e.getScale=function(t){return dn(t=void 0===t?this.prevClients:t)/dn(this.startClients)},e.move=function(e,n){this.startClients.forEach(function(t){t.clientX-=e,t.clientY-=n})},t}(),mn=["textarea","input"],bn=function(o){function t(){this.constructor=e}var e;function n(t,e){void 0===e&&(e={});var n,p=o.call(this)||this,t=(p.options={},p.flag=!1,p.pinchFlag=!1,p.datas={},p.isDrag=!1,p.isPinch=!1,p.isMouse=!1,p.isTouch=!1,p.clientStores=[],p.targets=[],p.prevTime=0,p.doubleFlag=!1,p._dragFlag=!1,p.onDragStart=function(t,e){if(void 0===e&&(e=!0),p.flag||!1!==t.cancelable){var n=p.options,r=n.container,i=n.pinchOutside,o=n.preventWheelClick,a=n.preventRightClick,s=n.preventDefault,n=n.checkInput,u=p.isTouch,c=!p.flag;if(o&&(2===t.which||1===t.button)||a&&(3===t.which||2===t.button))return p.initDrag(),!1;if(c){var o=document.activeElement,a=t.target,l=a.tagName.toLowerCase(),l=-1<mn.indexOf(l),f=a.isContentEditable;if(l||f){if(n||o===a)return!1;if(o&&f&&o.isContentEditable&&o.contains(a))return!1}else(s||"touchstart"===t.type)&&o&&(l=o.tagName,(o.isContentEditable||-1<mn.indexOf(l))&&o.blur());p.clientStores=[new vn(fn(t))],p.flag=!0,p.isDrag=!1,p._dragFlag=!0,p.datas={},p.doubleFlag=ht()-p.prevTime<200,!1===p.emit("dragStart",h(h({datas:p.datas,inputEvent:t,isTrusted:e,isDouble:p.doubleFlag},p.getCurrentStore().getPosition()),{preventDefault:function(){t.preventDefault()},preventDrag:function(){p._dragFlag=!1}}))&&p.initDrag(),p.flag&&s&&t.preventDefault()}if(!p.flag)return!1;n=0;c&&u&&i&&(n=setTimeout(function(){Ot(r,"touchstart",p.onDragStart,{passive:!1})})),!c&&u&&i&&d(r,"touchstart",p.onDragStart),p.flag&&((f=t).touches&&2<=f.touches.length)&&(clearTimeout(n),c&&t.touches.length!==t.changedTouches.length||p.pinchFlag||p.onPinchStart(t))}},p.onDrag=function(t,e){if(p.flag){var n=fn(t),r=p.moveClients(n,t,!1);if(p._dragFlag){if(p.pinchFlag||r.deltaX||r.deltaY)if(!1===p.emit("drag",h(h({},r),{isScroll:!!e,inputEvent:t})))return void p.stop();p.pinchFlag&&p.onPinch(t,n)}p.getCurrentStore().getPosition(n,!0)}},p.onDragEnd=function(t){var e,n,r;p.flag&&(n=(e=p.options).pinchOutside,e=e.container,p.isTouch&&n&&d(e,"touchstart",p.onDragStart),p.pinchFlag&&p.onPinchEnd(t),0!==(n=null!=t&&t.touches?fn(t):[]).length&&p.options.keepDragging?p._addStore(new vn(n)):p.flag=!1,e=p._getPosition(),n=ht(),r=!p.isDrag&&p.doubleFlag,p.prevTime=p.isDrag||r?0:n,p.flag||(p.emit("dragEnd",h({datas:p.datas,isDouble:r,isDrag:p.isDrag,isClick:!p.isDrag,inputEvent:t},e)),p.clientStores=[]))},p.onBlur=function(){p.onDragEnd()},[].concat(t)),e=(p.options=h({checkInput:!1,container:1<t.length?window:t[0],preventRightClick:!0,preventWheelClick:!0,preventDefault:!0,checkWindowBlur:!1,keepDragging:!1,pinchThreshold:0,events:["touch","mouse"]},e),p.options),r=e.container,i=e.events,e=e.checkWindowBlur;return p.isTouch=-1<i.indexOf("touch"),p.isMouse=-1<i.indexOf("mouse"),p.targets=t,p.isMouse&&(t.forEach(function(t){Ot(t,"mousedown",p.onDragStart)}),Ot(r,"mousemove",p.onDrag),Ot(r,"mouseup",p.onDragEnd),Ot(r,"contextmenu",p.onDragEnd)),e&&Ot(window,"blur",p.onBlur),p.isTouch&&(n={passive:!1},t.forEach(function(t){Ot(t,"touchstart",p.onDragStart,n)}),Ot(r,"touchmove",p.onDrag,n),Ot(r,"touchend",p.onDragEnd,n),Ot(r,"touchcancel",p.onDragEnd,n)),p}cn(e=n,r=o),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t);var r=n.prototype;return r.stop=function(){this.isDrag=!1,this.flag=!1,this.clientStores=[],this.datas={}},r.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce(function(t,e){return t+e.movement},0)},r.isDragging=function(){return this.isDrag},r.isFlag=function(){return this.flag},r.isPinchFlag=function(){return this.pinchFlag},r.isDoubleFlag=function(){return this.doubleFlag},r.isPinching=function(){return this.isPinch},r.scrollBy=function(t,e,n,r){void 0===r&&(r=!0),this.flag&&(this.clientStores[0].move(t,e),r&&this.onDrag(n,!0))},r.move=function(t,e){var n=t[0],r=t[1],t=this.getCurrentStore().prevClients;return this.moveClients(t.map(function(t){var e=t.clientX,t=t.clientY;return{clientX:e+n,clientY:t+r,originalClientX:e,originalClientY:t}}),e,!0)},r.triggerDragStart=function(t){this.onDragStart(t,!1)},r.setEventDatas=function(t){var e,n=this.datas;for(e in t)n[e]=t[e];return this},r.getCurrentEvent=function(t){return h(h({datas:this.datas},this._getPosition()),{movement:this.getMovement(),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:t})},r.getEventDatas=function(){return this.datas},r.unset=function(){var e=this,t=this.targets,n=this.options.container;this.off(),d(window,"blur",this.onBlur),this.isMouse&&(t.forEach(function(t){d(t,"mousedown",e.onDragStart)}),d(n,"mousemove",this.onDrag),d(n,"mouseup",this.onDragEnd),d(n,"contextmenu",this.onDragEnd)),this.isTouch&&(t.forEach(function(t){d(t,"touchstart",e.onDragStart)}),d(n,"touchstart",this.onDragStart),d(n,"touchmove",this.onDrag),d(n,"touchend",this.onDragEnd),d(n,"touchcancel",this.onDragEnd))},r.onPinchStart=function(t){var e=this.options.pinchThreshold;this.isDrag&&this.getMovement()>e||(e=new vn(fn(t)),this.pinchFlag=!0,this._addStore(e),!1===this.emit("pinchStart",h(h({datas:this.datas,angle:e.getAngle(),touches:this.getCurrentStore().getPositions()},e.getPosition()),{inputEvent:t}))&&(this.pinchFlag=!1))},r.onPinch=function(t,e){var n;!this.flag||!this.pinchFlag||e.length<2||(n=this.getCurrentStore(),this.isPinch=!0,this.emit("pinch",h(h({datas:this.datas,movement:this.getMovement(e),angle:n.getAngle(e),rotation:n.getRotation(e),touches:n.getPositions(e),scale:n.getScale(e),distance:n.getDistance(e)},n.getPosition(e)),{inputEvent:t})))},r.onPinchEnd=function(t){var e,n;this.pinchFlag&&(e=this.isPinch,this.isPinch=!1,this.pinchFlag=!1,n=this.getCurrentStore(),this.emit("pinchEnd",h(h({datas:this.datas,isPinch:e,touches:n.getPositions()},n.getPosition()),{inputEvent:t})))},r.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.doubleFlag=!1,this.prevTime=0,this.flag=!1},r.getCurrentStore=function(){return this.clientStores[0]},r.moveClients=function(t,e,n){n=this._getPosition(t,n);return(n.deltaX||n.deltaY)&&(this.isDrag=!0),h(h({datas:this.datas},n),{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:e})},r._addStore=function(t){this.clientStores.splice(0,0,t)},r._getPosition=function(t,e){var t=this.getCurrentStore().getPosition(t,e),e=this.clientStores.slice(1).reduce(function(t,e){e=e.getPosition();return t.distX+=e.distX,t.distY+=e.distY,t},t),n=e.distX,e=e.distY;return h(h({},t),{distX:n,distY:e})},n}(nn);var xn=function(t){for(var e=5381,n=t.length;n;)e=33*e^t.charCodeAt(--n);return e>>>0};function En(t,e,n,r){var i,o=document.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("data-styled-id",t),n.nonce&&o.setAttribute("nonce",n.nonce),o.innerHTML=(i=t,t=e,n.original?t:t.replace(/([^};{\s}][^};{]*|^\s*){/gm,function(t,e){e=e.trim();return(e?lt(e):[""]).map(function(t){t=t.trim();return 0===t.indexOf("@")?t:-1<t.indexOf(":global")?t.replace(/\:global/g,""):-1<t.indexOf(":host")?""+t.replace(/\:host/g,"."+i):t?"."+i+" "+t:"."+i}).join(", ")+" {"})),(r||document.head||document.body).appendChild(o),o}function Sn(o){var a,s="rCS"+xn(o).toString(36),u=0;return{className:s,inject:function(t,e){void 0===e&&(e={});var n,r=function(t){if(t&&t.getRootNode){t=t.getRootNode();if(11===t.nodeType)return t}}(t),i=0===u;return(r||i)&&(n=En(s,o,e,r)),i&&(a=n),r||++u,{destroy:function(){r?(t.removeChild(n),n=null):(0<u&&--u,0===u&&a&&(a.parentNode.removeChild(a),a=null))}}}}}var yn=function(t,e){return(yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Mn(t,e){function n(){this.constructor=t}yn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Dn=function(){return(Dn=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Cn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}Mn(t,e);var n=t.prototype;return n.render=function(){var t=this.props,e=t.className,e=void 0===e?"":e,n=(t.cspNonce,t.portalContainer),t=function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}(t,["className","cspNonce","portalContainer"]),r=this.injector.className,i=this.tag,o={};return-1<ee.indexOf("simple")&&n&&(o={portalContainer:n}),m(i,Dn({ref:v(this,"element"),"data-styled-id":r,className:e+" "+r},o,t))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},t}(Wt);function Rn(n,t){var r=Sn(t);return function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injector=r,t.tag=n,t}return Mn(t,e),t}(Cn)}var wn=function(t,e){return(wn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function On(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}wn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var W=function(){return(W=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Q(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function zn(t,e){var n;return W({events:{},props:((n={})[t]=Boolean,n),name:t},e)}var t=ve(),Pn=t.browser.webkit,Bn=Pn&&(ui="undefined"==typeof window?{userAgent:""}:window.navigator,!!(ui=/applewebkit\/([^\s]+)/g.exec(ui.userAgent.toLowerCase()))&&parseFloat(ui[1])<605),Gn=612<=parseInt(t.browser.webkitVersion,10)||15<=parseInt(t.browser.version,10),Tn="moveable-",_n="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --moveable-color: #4af;\n    --zoom: 1;\n    --zoompx: 1px;\n    will-change: transform;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n    position: absolute;\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n    background: #4af;\n    background: var(--moveable-color);\n\tmargin-top: -7px;\n    margin-left: -7px;\n    border: 2px solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\twidth: 1px;\n    height: 1px;\n    background: #4af;\n    background: var(--moveable-color);\n\ttransform-origin: 0px 50%;\n}\n.line.edge {\n    z-index: 1;\n    background: transparent;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top-color: #4af;\n    border-top-color: var(--moveable-color);\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left-color: #4af;\n    border-left-color: var(--moveable-color);\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n}\n.line.horizontal.bold {\n    height: 2px;\n}\n\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n\tpointer-events: none;\n}\n".concat([0,15,30,45,60,75,90,105,120,135,150,165].map(function(t){return'\n.direction[data-rotation="'.concat(t,'"] {\n\t').concat((n=t=t,e='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(32*(e=1),'px" height="').concat(32*e,'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate(').concat(n,'deg);transform-origin: 16px 16px"></path></svg>'),n=45*Math.round(t/45)%180,t="ns-resize",135==n?t="nwse-resize":45==n?t="nesw-resize":90==n&&(t="ew-resize"),"cursor:".concat(t,";cursor: url('").concat(e,"') 16 16, ").concat(t,";")),"\n}\n");var e,n}).join("\n"),"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n").concat(Bn?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"","\n"),An=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],In=1e-4,j=1e-7,kn=Math.pow(10,10),Fn=-kn,Nn=["n","w","s","e"],Wn=["n","w","s","e","nw","ne","sw","se"],jn={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Yn={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},qn={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},Xn=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager","forceUpdate"];function Hn(t,e,n,r,i,o){var n=e.gestos[o=void 0===o?"draggable":o].move(n,t.inputEvent),a=n.originalDatas||n.datas,a=a[o]||(a[o]={});return W(W({},i?Kr(e,n):n),{isPinch:!!r,parentEvent:!0,datas:a,originalDatas:t.originalDatas})}var Ln=function(){function t(t){var e;this.ableName=t=void 0===t?"draggable":t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return(this.datas=n)[this.ableName]||(n[this.ableName]={}),W(W({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=n,clientY:this.prevY=r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Vn(t,e){var n=e.clientX,r=e.clientY,e=e.datas,t=t.state,i=t.moveableClientRect,o=t.rootMatrix,a=t.is3d,t=t.pos1,o=T(Zr(o,[n-i.left,r-i.top],a?4:3),t),n=Qn({datas:e,distX:o[0],distY:o[1]});return[n[0],n[1]]}function Un(t,e){var e=e.datas,t=t.state,n=t.allMatrix,r=t.beforeMatrix,i=t.is3d,o=t.left,a=t.top,s=t.origin,u=t.offsetMatrix,c=t.targetMatrix,t=t.transformOrigin,l=i?4:3;e.is3d=i,e.matrix=n,e.targetMatrix=c,e.beforeMatrix=r,e.offsetMatrix=u,e.transformOrigin=t,e.inverseMatrix=y(n,l),e.inverseBeforeMatrix=y(r,l),e.absoluteOrigin=Ee(J([o,a],s),l),e.startDragBeforeDist=B(e.inverseBeforeMatrix,e.absoluteOrigin,l),e.startDragDist=B(e.inverseMatrix,e.absoluteOrigin,l)}function $n(t,e){var n,r,i,o,a,s,u,c,l,f,p,d,h,g=t.datas,t=t.originalDatas.beforeRenderable,v=g.transformIndex,m=t.nextTransforms,b=m.length,x=t.nextTransformAppendedIndexes,E=0,m=(-1===v?(E=m.length,g.transformIndex=E):E=vt(x,function(t){return t.index===v&&t.functionName===e})?v:v+x.filter(function(t){return t.index<v}).length,n=E,r=(m=m).slice(0,n<0?void 0:n),i=m.slice(0,n<0?void 0:n+1),o=m[n]||"",a=n<0?[]:m.slice(n),n=n<0?[]:m.slice(n+1),s=Fe(r),u=Fe(i),c=Fe([o]),l=Fe(a),f=Fe(n),S=ke(s),y=ke(u),p=ke(l),d=ke(f),h=K(S,p,4),{transforms:m,beforeFunctionMatrix:S,beforeFunctionMatrix2:y,targetFunctionMatrix:ke(c),afterFunctionMatrix:p,afterFunctionMatrix2:d,allFunctionMatrix:h,beforeFunctions:s,beforeFunctions2:u,targetFunction:c[0],afterFunctions:l,afterFunctions2:f,beforeFunctionTexts:r,beforeFunctionTexts2:i,targetFunctionText:o,afterFunctionTexts:a,afterFunctionTexts2:n}),S=m.targetFunction,y="rotate"===e?"rotateZ":e;g.beforeFunctionTexts=m.beforeFunctionTexts,g.afterFunctionTexts=m.afterFunctionTexts,g.beforeTransform=m.beforeFunctionMatrix,g.beforeTransform2=m.beforeFunctionMatrix2,g.targetTansform=m.targetFunctionMatrix,g.afterTransform=m.afterFunctionMatrix,g.afterTransform2=m.afterFunctionMatrix2,g.targetAllTransform=m.allFunctionMatrix,S.functionName===y?(g.afterFunctionTexts.splice(0,1),g.isAppendTransform=!1):E<b&&(g.isAppendTransform=!0,t.nextTransformAppendedIndexes=Q(Q([],x,!0),[{functionName:e,index:E,isAppend:!0}],!1))}function Zn(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function Kn(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,t=t.targetAllTransform,e=n?K(t,e,4):K(e,t,4),t=K(y(n?o:r,4),e,4);return K(t,y(n?a:i,4),4)}function Jn(t){var e=t.datas,n=t.distX,t=t.distY,r=e.inverseBeforeMatrix,i=e.is3d,o=e.startDragBeforeDist,i=i?4:3;return T(B(r,J(e.absoluteOrigin,[n,t]),i),o)}function Qn(t,e){var n=t.datas,r=t.distX,t=t.distY,i=n.inverseBeforeMatrix,o=n.inverseMatrix,a=n.is3d,s=n.startDragBeforeDist,u=n.startDragDist,a=a?4:3;return T(B(e?i:o,J(n.absoluteOrigin,[r,t]),a),e?s:u)}function tr(t){var e=[];return 0<=t[1]&&(0<=t[0]&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(0<=t[0]&&e.push(1),t[0]<=0&&e.push(0)),e}function Y(t,e){var n=(e[0]+1)/2,e=(e[1]+1)/2,r=[i(t[0][0],t[1][0],n,1-n),i(t[0][1],t[1][1],n,1-n)],t=[i(t[2][0],t[3][0],n,1-n),i(t[2][1],t[3][1],n,1-n)];return[i(r[0],t[0],e,1-e),i(r[1],t[1],e,1-e)]}function er(t,e,n,r){return K(t,hr(e,r,n),r)}function nr(n){var r=n.originalDatas.beforeRenderable;return{setTransform:function(t,e){void 0===e&&(e=-1),r.startTransforms=$(t)?t:S(t),ir(n,e)},setTransformIndex:function(t){ir(n,t)}}}function rr(t,e){ir(t,gt(t.originalDatas.beforeRenderable.startTransforms,function(t){return 0===t.indexOf("".concat(e,"("))}))}function ir(t,e){var n=t.originalDatas.beforeRenderable,t=t.datas;-1!==(t.transformIndex=e)&&(n=n.startTransforms[e])&&(e=Fe([n]),t.startValue=e[0].functionValue)}function or(t,e){t.originalDatas.beforeRenderable.nextTransforms=S(e)}function ar(t){return t.originalDatas.beforeRenderable.nextTransforms}function sr(t){return ar(t).join(" ")}function ur(t,e,n,r,i){or(i,e);var o=t.getAble("draggable"),o=o&&o.drag(t,Hn(i,t.state,n,r,!1)),i=o?o.transform:e;return W(W({transform:e,drag:o},Yr({transform:i})),{afterTransform:i})}function cr(t,e,n,r,i){var o=t.state,a=o.left,o=o.top,s=t.props.groupable;u=t.state,c=i,l=u.transformOrigin,f=u.offsetMatrix,u=u.is3d,p=i.beforeTransform,c=i.afterTransform,u=u?4:3;var u,c,l,f,p,i=s?a:0,a=s?o:0,s=T(r,lr(t,n,er(f,I(K(K(p,Ae([e]),4),c,4),4,u),l,u)));return T(s,[i,a])}function lr(t,e,n){void 0===n&&(n=t.state.allMatrix);var t=t.state,r=t.width,i=t.height,t=t.is3d;return q(n,[r/2*(1+e[0]),i/2*(1+e[1])],t?4:3)}function fr(t,e,n,r,i,o){var a=t.props.groupable,t=t.state,s=t.transformOrigin,u=t.offsetMatrix,c=t.is3d,l=t.width,f=t.height,p=t.left,d=t.top,h=o.fixedDirection,o=o.nextTargetMatrix||t.targetMatrix,t=c?4:3;g=e,v=n,void 0===(m=l)&&(m=g),void 0===(b=f)&&(b=v),void 0===(x=s)&&(x=[0,0]);var g,v,m,b,x,c=a?p:0,l=a?d:0,s=er(u,o,(f=i)?f.map(function(t,e){var n=pt(t),r=n.value,n=n.unit,i=e?b:m,o=e?v:g;return"%"===t||isNaN(r)?o*(i?x[e]/i:0):"%"!==n?r:o*r/100}):x,t);return p=r,a=h,d=Y(Cr(d=s,e,n,t),a),T([p[0]-d[0],p[1]-d[1]],[c,l])}function pr(t,e){return Y(Wr(t.state),e)}function _(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.apply(void 0,Q([Tn],t,!1))}function dr(t){t()}function hr(t,e,n){return Se(e,Te(n,e),t,Te(n.map(function(t){return-t}),e))}function gr(r){return vr(Lr(r,":before")).map(function(t,e){var t=pt(t),n=t.value,t=t.unit;return n*(n=r,e=0===e,"%"===t?Dr(n.ownerSVGElement)[e?"width":"height"]/100:1)})}function vr(t){t=t.transformOrigin;return t?t.split(" "):["0","0"]}function mr(t,e){var n=(e=void 0===e?Lr(t):e).transform;if(n&&"none"!==n)return e.transform;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var i=r.length;if(!i)return"";for(var o=[],a=0;a<i;++a)!function(t){var e=r[t].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(t){return e[t]}).join(", "),")"))}(a);return o.join(" ")}return""}function br(t,e,n){for(var r=document.body,i=!t||n?t:(null==(n=null==t?void 0:t.assignedSlot)?void 0:n.parentElement)||t.parentElement,o=!1,a=t===e||i===e,s="relative";i&&i!==r;){e===i&&(a=!0);var u=Lr(i),c=i.tagName.toLowerCase(),l=mr(i,u),s=u.position;if("svg"===c||"static"!==s||l&&"none"!==l)break;u=i.parentNode;if(u&&11===u.nodeType){i=u.host,o=!0;break}i=u,s="relative"}return{isCustomElement:o,isStatic:"static"===s,isEnd:a||!i||i===r,offsetParent:i||r}}function xr(t,e){var n,r,i=t.tagName.toLowerCase(),o=t.offsetLeft,a=t.offsetTop,s=U(o),u=!s;return u||"svg"===i?r=(n=vr(e).map(function(t){return parseFloat(t)})).slice():(r=(n=Bn?gr(t):vr(e).map(function(t){return parseFloat(t)})).slice(),u=!0,o=(e=function(t,e){if(!t.getBBox||"g"===t.tagName.toLowerCase())return[0,0,0,0];var n=t.getBBox(),t=Dr(t.ownerSVGElement),r=n.x-t.x,n=n.y-t.y;return[r,n,e[0]-r,e[1]-n]}(t,n))[0],a=e[1],n[0]=e[2],n[1]=e[3]),{tagName:i,isSVG:s,hasOffset:u,offset:[o||0,a||0],origin:n,targetOrigin:r}}function Er(t,e,n){void 0===n&&(n=Lr(t));var t=Lr(document.body),r=t.position;if(!(e||r&&"static"!==r))return[0,0];e=parseInt(t.marginLeft,10),r=parseInt(t.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(r=0),"auto"===n.left&&"auto"===n.right||(e=0)),[e,r]}function Sr(t){t.forEach(function(t){var e=t.matrix;e&&(t.matrix=I(e,3,4))})}function yr(t,e,n){for(var r,i,o,a=t,s=[],u=!n&&t===e||t===document.body,c=u,l=!1,f=3,p=!1,d=br(e,e,!0).offsetParent;a&&!c;){var c=u,h=Lr(a),g=h.position,v=mr(a,h),v=ye((v=v)&&"none"!==v?z(v)?v:Ae(v):[1,0,0,1,0,0]),m="fixed"===g,b={hasTransform:!1,fixedContainer:null},x=(m&&(p=!0,d=(b=function(t){for(var e=t.parentElement,n=!1;e;){var r=Lr(e).transform;if(r&&"none"!==r){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}(a)).fixedContainer),v.length),x=(l||16!==x||(l=!0,f=4,Sr(s),o=o&&I(o,3,4)),l&&9===x&&(v=I(v,3,4)),xr(a,h)),E=x.tagName,S=x.hasOffset,y=x.isSVG,M=x.origin,D=x.targetOrigin,x=x.offset,C=x[0],x=x[1],E=("svg"===E&&o?(s.push({type:"target",target:a,matrix:function(t,e){var n=Dr(t),r=n.width,i=n.height,o=n.clientWidth,n=n.clientHeight,a=o/r,s=n/i,t=t.preserveAspectRatio.baseVal,u=t.align,t=t.meetOrSlice,c=[0,0],l=[a,s],f=[0,0];{var p;1!==u&&(p=(u-2)%3,u=Math.floor((u-2)/3),c[0]=r*p/2,c[1]=i*u/2,t=2===t?Math.max(s,a):Math.min(a,s),l[0]=t,l[1]=t,f[0]=(o-r)/2*p,f[1]=(n-i)/2*u)}a=Ge(l,e);return a[e*(e-1)]=f[0],a[e*(e-1)+1]=f[1],hr(a,e,c)}(a,f)}),s.push({type:"offset",target:a,matrix:k(f)})):"g"===E&&t!==a&&(x=C=0),void 0),R=!1,w=!1,O=(m?(E=b.fixedContainer,R=!0):(E=(O=br(a,e)).offsetParent,R=O.isEnd,w=O.isStatic),!Pn||Gn||!S||y||!w||"relative"!==g&&"static"!==g||(C-=E.offsetLeft,x-=E.offsetTop,u=u||R),0),y=0,w=0,g=0;if(m?S&&b.hasTransform&&(w=E.clientLeft,g=E.clientTop):(S&&d!==E&&(O=E.clientLeft,y=E.clientTop),S&&E===document.body&&(C+=(b=Er(a,!1,h))[0],x+=b[1])),s.push({type:"target",target:a,matrix:hr(v,f,M)}),S?s.push({type:"offset",target:a,matrix:Te([C-a.scrollLeft+O-w,x-a.scrollTop+y-g],f)}):s.push({type:"offset",target:a,origin:M}),o=o||v,r=r||M,i=i||D,c||m)break;a=E,u=R,n&&a!==document.body||(c=u)}return{offsetContainer:d,matrixes:s,targetMatrix:o=o||k(f),transformOrigin:r=r||[0,0],targetOrigin:i=i||[0,0],is3d:l,hasFixed:p}}function Mr(t,e){return void 0===e&&(e=9<t.length),"".concat(e?"matrix3d":"matrix","(").concat(Me(t,!e).join(","),")")}function Dr(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};t=t.viewBox,t=t&&t.baseVal||{x:0,y:0,width:0,height:0};return{x:t.x,y:t.y,width:t.width||e,height:t.height||n,clientWidth:e,clientHeight:n}}function q(t,e,n){return B(t,Ee(e,n),n)}function Cr(e,t,n,r){return[[0,0],[t,0],[0,n],[t,n]].map(function(t){return q(e,t,r)})}function Rr(t){var e=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]}),n=Math.min.apply(Math,e),r=Math.min.apply(Math,t),e=Math.max.apply(Math,e),t=Math.max.apply(Math,t);return{left:n,top:r,right:e,bottom:t,width:e-n,height:t-r}}function wr(t,e,n,r){return Rr(Cr(t,e,n,r))}function Or(t,e,n,r){var i=16===t.length?4:3,n=Cr(t,n,r,i),r=n[0],o=r[0],r=r[1],a=n[1],s=a[0],a=a[1],u=n[2],c=u[0],u=u[1],l=n[3],f=l[0],l=l[1],t=q(t,e,i),e=t[0],i=t[1],t=Math.min(o,s,c,f),p=Math.min(r,a,u,l);return{left:t,top:p,right:Math.max(o,s,c,f),bottom:Math.max(r,a,u,l),origin:[e-t||0,i-p||0],pos1:[o-t||0,r-p||0],pos2:[s-t||0,a-p||0],pos3:[c-t||0,u-p||0],pos4:[f-t||0,l-p||0],direction:Dt(n)}}function zr(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Pr(t,e){return zr([e[0]-t[0],e[1]-t[1]])}function Br(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=F(t,e));e=Pr(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(e,"px")}}function Gr(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,o=n.reduce(function(t,e){return t+e[0]},0)/i,i=n.reduce(function(t,e){return t+e[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(i,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Tr(t,e){e=t[e];return z(e)?W(W({},t),e):t}function _r(t,e){void 0===e&&(e=t?Lr(t):null);var n,r,i,o,a,s,u,c,l=t&&!U(t.offsetWidth),f=0,p=0,d=0,h=0,g=0,v=0,m=0,b=0,x=0,E=0,S=0,y=0,M=1/0,D=1/0,C=1/0,R=1/0,w=!1;return t&&(h=l||"svg"===t.tagName.toLowerCase()?(l=t.style,n="border-box"===e.boxSizing,o=parseFloat(e.borderLeftWidth)||0,i=parseFloat(e.borderRightWidth)||0,a=parseFloat(e.borderTopWidth)||0,c=parseFloat(e.borderBottomWidth)||0,o=(r=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0))+(o+i),a=(i=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0))+(a+c),x=Math.max(r,Z(e.minWidth,0)),E=Math.max(i,Z(e.minHeight,0)),M=Z(e.maxWidth,0),D=Z(e.maxHeight,0),isNaN(M)&&(D=M=1/0),c=Z(l.width,0),l=Z(l.height,0),s=parseFloat(e.width),u=parseFloat(e.height),g=parseFloat(e.width),v=parseFloat(e.height),d=f=m=Math.abs(s-c)<1?Et(x,c||parseFloat(e.width),M):s,h=p=b=Math.abs(u-l)<1?Et(E,l||parseFloat(e.height),D):u,n?(C=M,R=D,S=x,y=E,m=f-o,b=p-a):(C=M+o,R=D+a,S=x+o,y=E+a,f=m+o,p=b+a),d=m+r,b+i):(w=!0,g=f=(c=t.getBBox()).width,v=p=c.height,d=m=f,b=p)),{svg:w,offsetWidth:f,offsetHeight:p,clientWidth:d,clientHeight:h,contentWidth:m,contentHeight:b,cssWidth:g,cssHeight:v,minWidth:x,minHeight:E,maxWidth:M,maxHeight:D,minOffsetWidth:S,minOffsetHeight:y,maxOffsetWidth:C,maxOffsetHeight:R}}function Ar(t,e){return F(0<e?t[0]:t[1],0<e?t[1]:t[0])}function Ir(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function kr(t,e){var n=0,r=0,i=0,o=0,a=(t&&(t===document.body||t===document.documentElement?(i=window.innerWidth,o=window.innerHeight,n=(a=[-(a=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop])[0],-a[1]])[0],r=a[1]):(n=(a=t.getBoundingClientRect()).left,r=a.top,i=a.width,o=a.height)),{left:n,top:r,width:i,height:o,right:n+i,bottom:r+o});return t&&e&&(a.clientLeft=t.clientLeft,a.clientTop=t.clientTop,a.clientWidth=t.clientWidth,a.clientHeight=t.clientHeight,a.scrollWidth=t.scrollWidth,a.scrollHeight=t.scrollHeight,a.overflow="visible"!==Lr(t).overflow),a}function Fr(t){if(t){var e,t=t.getAttribute("data-direction");if(t)return e=[0,0],-1<t.indexOf("w")&&(e[0]=-1),-1<t.indexOf("e")&&(e[0]=1),-1<t.indexOf("n")&&(e[1]=-1),-1<t.indexOf("s")&&(e[1]=1),e}}function Nr(t,e){return[J(e,t[0]),J(e,t[1]),J(e,t[2]),J(e,t[3])]}function Wr(t){var e=t.left,n=t.top;return Nr([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function jr(t,e){var n;null!=(n=t[e])&&n.unset(),t[e]=null}function Yr(e){return{style:e,cssText:xt(e).map(function(t){return"".concat(t,": ").concat(e[t],";")}).join("")}}function qr(t,e){var n=e.afterTransform||e.transform;return W(W({},Yr(W(W(W({},t.style),e.style),{transform:n}))),{afterTransform:n,transform:t.transform})}function tt(t,e,n,r){var i=e.datas,n=(i.datas||(i.datas={}),W(W({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas}));return i.isStartEvent?r||(i.lastEvent=n):i.isStartEvent=!0,n}function Xr(t,e,n){var r=e.datas,i=("isDrag"in n?n:e).isDrag;return r.datas||(r.datas={}),W(W({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function Hr(t,e,n){t._emitter.on(e,n)}function et(t,e,n,r){return t.triggerEvent(e,n,r)}function Lr(t,e){return window.getComputedStyle(t,e)}function Vr(t,n,r){var i={},o={};return t.filter(function(e){var t=e.name;if(i[t]||!n.some(function(t){return e[t]}))return!1;if(!r&&e.ableGroup){if(o[e.ableGroup])return!1;o[e.ableGroup]=!0}return i[t]=!0})}function Ur(t,e){return t===e||null==t&&null==e}function $r(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),t[0]}function Zr(t,e,n){return B(y(t,n),Ee(e,n),n)}function Kr(t,e){var n=t.is3d,t=Zr(t.rootMatrix,[e.distX,e.distY],n?4:3);return e.distX=t[0],e.distY=t[1],e}function Jr(t,e,n,r,i){return T(q(t,J(n,e),i),r)}function Qr(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function ti(t){return Math.abs(t)<=j?0:t}function ei(r,i){return void 0===i&&(i=[r]),function(t,e){if(e.isRequest)return!!i.some(function(t){return e.requestAble===t})&&e.parentDirection;var n=e.inputEvent.target;return P(n,_("direction"))&&(!r||P(n,_(r)))}}function ni(t){var e,n={};for(e in t)n[t[e]]=e;return n}function ri(t,e){return t?b(t)?e?document.querySelector(t):t:at(t)?t():"current"in t?t.current:t:null}function ii(t,n){return t?((e=t)&&z(e)&&(!(e instanceof Element)&&($(e)||"length"in e))?[].slice.call(t):[t]).reduce(function(t,e){return b(e)&&n?Q(Q([],t,!0),[].slice.call(document.querySelectorAll(e)),!0):(t.push(ri(e,n)),t)},[]):[];var e}function oi(t,e){var n=t.rootMatrix,t=t.is3d,n=y(n,t?4:3);return(n=t?n:I(n,3,4))[12]=0,n[13]=0,n[14]=0,Ie(n,e)}function ai(t,e,n,r,i){var o,a,s=t[0],t=t[1],u=0,c=0;return i&&s&&t?(i=F([0,0],e),o=F([0,0],r),a=zr(e),i=Math.cos(i-o)*a,r[0]?c=r[1]?(o=2*r[0]*s,a=2*r[1]*t,s=zr([o+e[0],a+e[1]])-zr([o,a]),t=F([0,0],[n,1]),u=Math.cos(t)*s,Math.sin(t)*s):(u=i)/n:u=(c=i)*n):(u=r[0]*e[0],c=r[1]*e[1]),[u,c]}function si(e,t,n,r){var i,o,a=n.ratio,s=n.startOffsetWidth,u=n.startOffsetHeight,c=0,l=0,f=r.distX,p=r.distY,d=r.parentDistance,h=r.parentDist,r=r.parentScale,g=n.fixedDirection,v=[0,1].map(function(t){return Math.abs(e[t]-g[t])}),m=[0,1].map(function(t){t=v[t];return t=0!==t?2/t:t});return h?(c=h[0],l=h[1],t&&(c?l=l||c/a:c=l*a)):l=r?(c=(r[0]-1)*s,(r[1]-1)*u):d?(c=d/(i=zr([h=s*v[0],r=u*v[1]]))*h*m[0],d/i*r*m[1]):(o=Qn({datas:n,distX:f,distY:p}),c=(h=ai([s,u],o=m.map(function(t,e){return o[e]*t}),a,e,t))[0],h[1]),{distWidth:c,distHeight:l}}var ui=zn("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(n,r){var t=r.datas,e=r.targets,i=r.angle,o=r.originalDatas,a=n.props,s=a.pinchable,a=a.ables;if(!s)return!1;var u="onPinch".concat(e?"Group":"","Start"),c="drag".concat(e?"Group":"","ControlStart"),a=(!0===s?n.controlAbles:a.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),l=tt(n,r,{}),e=(e&&(l.targets=e),et(n,u,l)),u=(t.isPinch=!1!==e,t.ables=a,t.isPinch);return!!u&&(a.forEach(function(t){var e;o[t.name]=o[t.name]||{},t[c]&&(e=W(W({},r),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](n,e))}),n.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},u)},pinch:function(e,n){var r,i,t=n.datas,o=n.scale,a=n.distance,s=n.originalDatas,u=n.inputEvent,c=n.targets,l=n.angle;if(t.isPinch)return r=a*(1-1/o),a=tt(e,n,{}),c&&(a.targets=c),o="onPinch".concat(c?"Group":""),et(e,o,a),o=t.ables,i="drag".concat(c?"Group":"","Control"),o.forEach(function(t){t[i]&&t[i](e,W(W({},n),{datas:s[t.name],inputEvent:u,parentDistance:r,parentRotate:l,isPinch:!0}))}),a},pinchEnd:function(e,n){var t,r,i,o=n.datas,a=n.isPinch,s=n.inputEvent,u=n.targets,c=n.originalDatas;if(o.isPinch)return r="onPinch".concat(u?"Group":"","End"),t=Xr(e,n,{isDrag:a}),u&&(t.targets=u),et(e,r,t),r=o.ables,i="drag".concat(u?"Group":"","ControlEnd"),r.forEach(function(t){t[i]&&t[i](e,W(W({},n),{isDrag:a,datas:c[t.name],inputEvent:s,isPinch:!0}))}),a},pinchGroupStart:function(t,e){return this.pinchStart(t,W(W({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,W(W({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,W(W({},e),{targets:t.props.targets}))}});function ci(t,n,r){var e=r.originalDatas,e=(e.groupable=e.groupable||{},e.groupable),i=(e.childDatas=e.childDatas||[],e.childDatas);return t.moveables.map(function(t,e){return i[e]=i[e]||{},i[e][n]=i[e][n]||{},W(W({},r),{datas:i[e][n],originalDatas:i[e]})})}function li(t,a,s,u,e,c,l){var f=!!s.match(/Start$/g),p=!!s.match(/End$/g),d=e.isPinch,h=e.datas,e=ci(t,a.name,e),g=t.moveables,t=e.map(function(t,e){var n=g[e],r=n.state,i=r.gestos,o=t;if(f)o=new Ln(l).dragStart(u,t);else{if(i[l]||(i[l]=h.childGestos[e]),!i[l])return;o=Hn(t,r,u,d,c,l)}e=a[s](n,W(W({},o),{parentFlag:!0}));return p&&(i[l]=null),e});return f&&(h.childGestos=g.map(function(t){return t.state.gestos[l]})),t}function fi(t,i,o,e,a,s){void 0===a&&(a=function(t,e){return e});var u=!!o.match(/End$/g),e=ci(t,i.name,e),c=t.moveables;return e.map(function(t,e){var n=c[e],r=a(n,t),r=i[o](n,W(W({},r),{parentFlag:!0}));return r&&s&&s(n,t,r,e),u&&(n.state.gestos={}),r})}var pi=["left","right","center"],di=["top","bottom","middle"],hi={start:"left",end:"right",center:"center"},gi={start:"top",end:"bottom",center:"middle"};function vi(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,u=n.snapGridWidth,n=n.snapGridHeight,t=t.state,c=t.guidelines,t=t.enableSnap;return r&&t&&!(e&&!0!==r&&r.indexOf(e)<0)&&!!(u||n||i||o||c&&c.length||a&&a.length||s&&s.length)}function mi(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function bi(t,e){var n=function(t,e){var n,r=mi(t),i={};for(n in r)n in e&&r[n]&&(i[n]=e[n]);return i}(t,e),t=di.filter(function(t){return t in n}),e=pi.filter(function(t){return t in n});return{horizontal:t.map(function(t){return n[t]}),vertical:e.map(function(t){return n[t]})}}function xi(t,e,n,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0);var s=[],u=(a=void 0===a?{left:0,top:0,right:0,bottom:0}:a).left,c=a.top,l=a.bottom,f=n+a.right-u,p=r+l-c;return t&&t.forEach(function(t){t=z(t)?t:{pos:t};s.push({type:"horizontal",pos:[u,N(t.pos-o+c,.1)],size:f,className:t.className})}),e&&e.forEach(function(t){t=z(t)?t:{pos:t};s.push({type:"vertical",pos:[N(t.pos-i+u,.1),c],size:p,className:t.className})}),s}function Ei(t,e){if(!e.length)return[];var t=t.state,n=t.containerClientRect,r=t.targetClientRect,i=r.top,r=r.left,o=t.rootMatrix,a=t.is3d?4:3,n=(c=q(c=o,[(n=n).clientLeft,n.clientTop],a),[n.left+c[0],n.top+c[1]]),s=n[0],u=n[1],c=Ve(Wr(t)),n=T([c.minX,c.minY],Zr(o,[r-s,i-u],a)).map(function(t){return t=t,Math.round(t%1==-.5?t-1:t)}),l=n[0],f=n[1];return e.map(function(t){var e=t.element.getBoundingClientRect(),n=e.left-s,r=e.top-u,i=r+e.height,e=n+e.width,n=Zr(o,[n,r],a),r=n[0],n=n[1],e=Zr(o,[e,i],a),i=e[0],e=e[1];return W(W({},t),{rect:{left:r+l,right:i+l,top:n+f,bottom:e+f,center:(r+i)/2+l,middle:(n+e)/2+f}})})}function Si(t){var e,n,r,o,v,u,m,i=t.state,a=i.snapOffset,i=i.containerClientRect,s=i.overflow,c=i.scrollHeight,l=i.scrollWidth,f=i.clientHeight,p=i.clientWidth,d=i.clientLeft,i=i.clientTop,h=t.props,g=h.snapGap,g=void 0===g||g,b=h.verticalGuidelines,x=h.horizontalGuidelines,E=h.snapThreshold,E=void 0===E?5:E,S=h.snapGridWidth,S=void 0===S?0:S,h=h.snapGridHeight,h=void 0===h?0:h,y=Q([],function(t){var e=t.state,n=t.props.elementGuidelines;if(!(n=void 0===n?[]:n).length)return e.elementRects=[],[];var r=(e.elementRects||[]).filter(function(t){return!t.refresh}),i=n.map(function(t){return z(t)&&"element"in t?t:{element:ri(t,!0)}}).filter(function(t){return t.element}),o=(n=qe(r.map(function(t){return t.element}),i.map(function(t){return t.element}))).maintained,a=n.added,s=[],g=(o.forEach(function(t){var e=t[0],t=t[1];s[t]=r[e]}),Ei(t,a.map(function(t){return i[t]})).map(function(t,e){s[a[e]]=t}),e.elementRects=s,mi(t.props.elementSnapDirections)),v=[];return s.forEach(function(e){var n=e.element,t=e.top,t=void 0===t?g.top:t,r=e.left,r=void 0===r?g.left:r,i=e.right,i=void 0===i?g.right:i,o=e.bottom,o=void 0===o?g.bottom:o,a=e.center,a=void 0===a?g.center:a,s=e.middle,s=void 0===s?g.middle:s,u=e.className,c=e.rect,t=bi({top:t,right:i,left:r,bottom:o,center:a,middle:s},c),i=t.horizontal,r=t.vertical,l=c.top,f=c.left,p=c.right-f,d=c.bottom-l,h=[p,d];r.forEach(function(t){v.push({type:"vertical",element:n,pos:[N(t,.1),l],size:d,sizes:h,className:u,elementRect:e})}),i.forEach(function(t){v.push({type:"horizontal",element:n,pos:[f,N(t,.1)],size:p,sizes:h,className:u,elementRect:e})})}),v}(t),!0);return g&&(e=(g=Rr(Wr(t.state))).top,n=g.left,r=g.bottom,g=g.right,y.push.apply(y,(o={top:e,left:n,bottom:r,right:g,center:(n+g)/2,middle:(e+r)/2},v=E,u=t.state.elementRects,m=[],[["vertical",hi,gi],["horizontal",gi,hi]].forEach(function(t){var f=t[0],p=t[1],a=t[2],d=o[p.start],h=o[p.end],g=o[p.center],n=o[a.start],r=o[a.end];function i(t){t=t.rect;return t[p.end]<d+v?d-t[p.end]:h-v<t[p.start]?t[p.start]-h:-1}var e=u.filter(function(t){var e=t.rect;return!(e[a.start]>r||e[a.end]<n)&&0<i(t)}).sort(function(t,e){return i(t)-i(e)}),s=[];e.forEach(function(o){e.forEach(function(t){var e,n,r,i;o!==t&&(r=o.rect,e=t.rect,n=r[a.start],r=r[a.end],i=e[a.start],e[a.end]<n||r<i||s.push([o,t]))})}),s.forEach(function(t){var e=t[0],t=t[1],n=e.rect,r=t.rect,i=n[p.start],n=n[p.end],o=r[p.start],r=r[p.end],a=0,s=0,u=!1,c=!1,l=!1;if(n<=d&&h<=o){if(c=!0,s=n+(a=(o-n-(h-d))/2)+(h-d)/2,Math.abs(s-g)>v)return}else if(n<o&&r<d+v){if(u=!0,s=r+(a=o-n),Math.abs(s-d)>v)return}else{if(!(n<o&&h-v<i))return;if(l=!0,s=i-(a=o-n),Math.abs(s-h)>v)return}a&&m.push({type:f,pos:"vertical"===f?[s,0]:[0,s],element:t.element,size:0,className:t.className,isStart:u,isCenter:c,isEnd:l,gap:a,hide:!0,gapRects:[e,t]})})}),m))),y.push.apply(y,function(t,e,n,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(e)for(var s=0;s<=r;s+=e)a.push({type:"horizontal",pos:[0,N(s-o,.1)],size:n,hide:!0});if(t)for(s=0;s<=n;s+=t)a.push({type:"vertical",pos:[N(s-i,.1),0],size:r,hide:!0});return a}(S,h,s?l:p,s?c:f,d,i)),y.push.apply(y,xi(x||!1,b||!1,s?l:p,s?c:f,d,i,a)),y}function yi(t,e,n,r){r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!U(i))return i}return t[n]}(r,t.props.snapThreshold,5);return Mi(t.state.guidelines,e,n,r)}function Mi(t,e,n,r){return{vertical:Ri(t,"vertical",e,r),horizontal:Ri(t,"horizontal",n,r)}}function Di(t,e,n){e=bi(t.props.snapDirections,e);return yi(t,e.vertical,e.horizontal,n)}function Ci(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var t=t.posInfos[0],n=t.guidelineInfos[0],r=n.offset,i=n.dist,n=n.guideline;return{isSnap:e,offset:r,dist:i,pos:t.pos,guideline:n}}function Ri(r,i,t,o){if(!r||!r.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===i?0:1,t=t.map(function(n,t){var e=r.map(function(t){var e=t.pos,e=n-e[a];return{offset:e,dist:Math.abs(e),guideline:t}}).filter(function(t){var e=t.guideline,t=t.dist;return!(e.type!==i||o<t)}).sort(function(t,e){return t.dist-e.dist});return{pos:n,index:t,guidelineInfos:e}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}),e=0<t.length;return{isSnap:e,index:e?t[0].index:-1,posInfos:t}}function wi(t,e,n){var r,i=[];if(n[0]&&n[1])i=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(t){return Y(e,t)});else if(n[0]||n[1])t.props.keepRatio?i=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(t){return Y(e,t)}):(r=e,1<(i=tr(n).map(function(t){return r[t]})).length&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));else for(var o=[e[0],e[1],e[3],e[2],e[0]],a=0;a<4;++a)i.push(o[a]),i.push([(o[a][0]+o[a+1][0])/2,(o[a][1]+o[a+1][1])/2]);return yi(t,i.map(function(t){return t[0]}),i.map(function(t){return t[1]}),1)}function Oi(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<j?1:r<j?-1:n-r}function zi(t,a){return t.slice().sort(function(t,e){var n=t.sign[a],r=e.sign[a],i=t.offset[a],o=e.offset[a];return n?r?Oi({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:e.isBound,isSnap:e.isSnap,offset:o}):-1:1})[0]}function Pi(t,e){var n=Mt([e[0][0],e[1][0]]),e=Mt([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:e<=t[1]}}function Bi(t,e){var n,r=e[0],e=e[1],i=e[0]-r[0],e=e[1]-r[1];return Math.abs(i)<j&&(i=0),Math.abs(e)<j&&(e=0),e=i?(n=e?e/i*(t[0]-r[0])+r[1]:r[1],t[1]):(n=r[0],t[0]),n-e}function Gi(t,e,n,r){return void 0===r&&(r=j),t.every(function(t){t=Bi(t,e);return t<=0===n||Math.abs(t)<=r})}function Ti(t,e,n,r,i){return void 0===i&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function _i(t,e,n,r,i,o){var a,s,u=e[0],e=e[1],t=t[0],c=n[0],n=n[1],l=ti(n[1]-c[1]),f=e,p=u,u=-u/e;return ti(n[0]-c[0])?l||o&&!f?{isBound:!1,offset:0}:p?Ti((c[1]-t[1])/u+t[0],c[0],n[0],r,i):(a=c[1]-t[1],{isBound:s=Math.abs(a)<=(i||0),offset:s?a:0}):o&&!p?{isBound:!1,offset:0}:f?Ti(u*(c[0]-t[0])+t[1],c[1],n[1],r,i):(a=c[0]-t[0],{isBound:s=Math.abs(a)<=(i||0),offset:s?a:0})}function Ai(a,t,s){return t.map(function(t){var e=function(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,o=e.horizontalSign,e=e.lineConstants;if(!(t=t.props.innerBounds))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var a=t.left,s=t.top,u=t.width,t=t.height,c=[[a,s],[a,s+t]],l=[[a,s],[a+u,s]],f=[[a+u,s],[a+u,s+t]],p=[[a,s+t],[a+u,s+t]];return Gi([[a,s],[a+u,s],[a,s+t],[a+u,s+t]],n,r)?{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]}:(a=_i(n,e,l,i),u=_i(n,e,p,i),s=_i(n,e,c,o),t=_i(n,e,f,o),r=a.isBound&&u.isBound,l=a.isBound||u.isBound,p=s.isBound&&t.isBound,i=s.isBound||t.isBound,c=$r(a.offset,u.offset),n=$r(s.offset,t.offset),f=!(e=[0,0]),{isAllBound:Math.abs(n)<Math.abs(c)?(e=[c,0],f=l,r):(e=[0,n],f=i,p),isVerticalBound:l,isHorizontalBound:i,isBound:f,offset:e})}(a,t),n=e.isBound,r=e.offset,i=e.isVerticalBound,e=e.isHorizontalBound,o=t.multiple,t=Qn({datas:s,distX:r[0],distY:r[1]}).map(function(t,e){return t*(o[e]?2/o[e]:0)});return{sign:o,isBound:n,isVerticalBound:i,isHorizontalBound:e,isSnap:!1,offset:t}})}function Ii(t,e,n){var r,i,o,a,s,u,t=Ai(t,ki(t,e,[0,0],!1).map(function(t){return W(W({},t),{multiple:t.multiple.map(function(t){return 2*Math.abs(t)})})}),n),e=zi(t,0),t=zi(t,1),c=0,l=0,f=e.isVerticalBound||t.isVerticalBound,p=e.isHorizontalBound||t.isHorizontalBound;return(f||p)&&(n={datas:n,distX:-e.offset[0],distY:-t.offset[1]},e=n.datas,t=n.distX,n=n.distY,i=e.beforeMatrix,o=e.matrix,a=e.is3d,s=e.startDragBeforeDist,u=e.startDragDist,e=e.absoluteOrigin,a=a?4:3,c=(i=T(B(r?i:o,J(r?s:u,[t,n]),a),e))[0],l=i[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:p,offset:l}}}function ki(t,l,e,n){var r,i,t=t.state,f=Cr(t.allMatrix,100,100,t.is3d?4:3),p=Y(f,[0,0]);return t=n,n=[],r=(e=e)[0],i=e[1],r&&i?n.push([[0,2*i],e,[-r,i]],[[2*r,0],e,[r,-i]]):r?(n.push([[2*r,0],[r,1],[r,-1]]),t&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,2*i],[1,i],[-1,i]]),t&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n.map(function(t){var e,n,r=t[0],i=t[1],t=t[2],o=[Y(f,i),Y(f,t)],a=(u=(a=o)[0],s=(a=a[1])[0]-u[0],a=a[1]-u[1],Math.abs(s)<A&&(s=0),Math.abs(a)<A&&(a=0),n=e=c=0,n=s?a?(c=-a/s)*u[0]-u[e=1]:-u[e=1]:(c=-1,u[0]),[c,e,n].map(function(t){return N(t,A)})),s=Pi(p,o),u=s.vertical,c=s.horizontal;return{multiple:r,centerSign:Bi(p,o)<=0,verticalSign:u,horizontalSign:c,lineConstants:a,line:[Y(l,i),Y(l,t)]}})}function Fi(t,n,r,e){t=e?t.map(function(t){return Oe(t,e)}):t;return[[t[0],t[1]],[t[1],t[3]],[t[3],t[2]],[t[2],t[0]]].some(function(t){var e=Bi(r,t)<=0;return!Gi(n,t,e)})}function Ni(t,a,e,n,r){var t=t.props.innerBounds,s=r*Math.PI/180;if(!t)return[];var r=t.left,i=t.top,o=t.width,t=t.height,u=r-n[0],r=r+o-n[0],o=i-n[1],i=i+t-n[1],c=[[u,o],[r,o],[u,i],[r,i]],l=Y(e,[0,0]);if(!Fi(e,c,l,0))return[];var f=[],p=c.map(function(t){return[zr(t),F([0,0],t)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(t){var e,n,r,i=F([0,0],(r=(n=t)[0],e=(n=n[1])[0]-r[0],n=n[1]-r[1],e?n?[-(e=-(n/=e)*r[0]+r[1])/(n+1/n),e/(n*n+1)]:[0,r[1]]:[r[0],0])),o=(n=(e=t)[0],r=(e=e[1])[0]-n[0],e=e[1]-n[1],r?e?(e/=r,Math.abs((-e*n[0]+n[1])/Math.sqrt(Math.pow(e,2)+1))):Math.abs(n[1]):Math.abs(n[0]));f.push.apply(f,p.filter(function(t){t=t[0];return t&&o<=t}).map(function(t){var e=t[0],t=t[1],e=Math.acos(e?o/e:0);return[s+(t+e)-i,s+(t-e)-i]}).reduce(function(t,e){return t.push.apply(t,e),t},[]).filter(function(t){return!Fi(a,c,l,t)}).map(function(t){return N(180*t/Math.PI,j)}))}),f}function Wi(t,e,n){var t=t||{},r=t.position,i=t.left,o=t.top,a=t.right,t=t.bottom,r={position:void 0===r?"client":r,left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===t?1/0:t};return{vertical:Yi(r,e,!0),horizontal:Yi(r,n,!1)}}function ji(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,r=r.clientTop,n=n.snapOffset,s=n.left,u=n.top,c=n.right,n=n.bottom,e=e||t.props.bounds||{},t="css"===(e.position||"client"),l=e.left,f=e.top,p=e.right,p=void 0===p?t?-1/0:1/0:p,e=e.bottom,e=void 0===e?t?-1/0:1/0:e;return t&&(p=o+c-s-p,e=i+n-u-e),{left:(void 0===l?-1/0:l)+s-a,right:p+s-a,top:(void 0===f?-1/0:f)+u-r,bottom:e+u-r}}function Yi(t,e,n){var r=t[n?"left":"top"],t=t[n?"right":"bottom"],n=Math.min.apply(Math,e),e=Math.max.apply(Math,e),i=[];return n<r+1&&i.push({isBound:!0,offset:n-r,pos:r}),t-1<e&&i.push({isBound:!0,offset:e-t,pos:t}),i.length||i.push({isBound:!1,offset:0,pos:0}),i.sort(function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)})}function qi(t,e,n){return(n?t.map(function(t){return Oe(t,n)}):t).some(function(t){return t[0]<e.left&&.1<Math.abs(t[0]-e.left)||t[0]>e.right&&.1<Math.abs(t[0]-e.right)||t[1]<e.top&&.1<Math.abs(t[1]-e.top)||t[1]>e.bottom&&.1<Math.abs(t[1]-e.bottom)})}function Xi(t,s,e,n,r){if(!t.props.bounds)return[];var u=r*Math.PI/180,r=ji(t),t=r.left,i=r.top,o=r.right,r=r.bottom,t=t-n[0],o=o-n[0],i=i-n[1],r=r-n[1],c={left:t,top:i,right:o,bottom:r};if(!qi(e,c,0))return[];var l=[];return[[t,0],[o,0],[i,1],[r,1]].forEach(function(t){var o=t[0],a=t[1];e.forEach(function(t){var n,e,r,i=F([0,0],t);l.push.apply(l,(e=o,r=a,t=zr(n=t),[t=Math.sqrt(t*t-e*e)||0,-t].sort(function(t,e){return Math.abs(t-n[r?0:1])-Math.abs(e-n[r?0:1])}).map(function(t){return F([0,0],r?[t,e]:[e,t])}).map(function(t){return u+t-i}).filter(function(t){return!qi(s,c,t)}).map(function(t){return N(180*t/Math.PI,j)})))})}),l}function Hi(t,e){return t=W(W({},t),{classNames:Q([_("line","guideline",t.direction)],t.classNames,!0).filter(function(t){return t}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(t){return"".concat(N(t,.1),"px")})}),e=e,n=t.direction,r=t.classNames,i=t.size,o=t.pos,a=t.zoom,t=t.key,s=(n="horizontal"===n)?"Y":"X",e.createElement("div",{key:t,className:r.join(" "),style:((e={})[n?"width":"height"]="".concat(i),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(s,"(-50%) scale").concat(s,"(").concat(a,")"),e)});var n,r,i,o,a,s}function Li(t,i,e,o,a,s,u,c){var l=t.props.zoom;return e.map(function(t,e){var n=t.type,t=t.pos,r=[0,0];return r[u]=o,r[u?0:1]=-a+t,Hi({key:"".concat(i,"TargetGuideline").concat(e),classNames:[_("target","bold",n)],posValue:r,sizeValue:s,zoom:l,direction:i},c)})}function Vi(t,o,e,a,n,s){var t=t.props,u=t.zoom,r=t.isDisplayInnerSnapDigit,i="horizontal"===o?hi:gi,c=n[i.start],l=n[i.end];return e.filter(function(t){var e=t.hide,t=t.elementRect;if(e)return!1;if(r&&t){e=t.rect;if(e[i.start]<=c&&l<=e[i.end])return!1}return!0}).map(function(t,e){var n=t.pos,r=t.size,i=t.element,t=t.className,n=[-a[0]+n[0],-a[1]+n[1]];return Hi({key:"".concat(o,"-default-guideline-").concat(e),classNames:i?[_("bold"),t]:[t],direction:o,posValue:n,sizeValue:r,zoom:u},s)})}function Ui(t,e,n,r,i,o,a,s){var t=t.props,u=t.snapDigit,u=void 0===u?0:u,c=t.isDisplaySnapDigit,c=void 0===c||c,l=t.snapDistFormat,l=void 0===l?function(t,e){return t}:l,t=t.zoom,f="horizontal"===e?"X":"Y",p="vertical"===e?"height":"width",i=Math.abs(i),c=c?parseFloat(i.toFixed(u)):0;return s.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:_("guideline-group",e),style:((u={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")})[p]="".concat(i,"px"),u)},Hi({direction:e,classNames:[_(n),a],size:"100%",posValue:[0,0],sizeValue:i,zoom:t},s),s.createElement("div",{className:_("size-value","gap"),style:{transform:"translate".concat(f,"(-50%) scale(").concat(t,")")}},0<c?l(c,e):""))}function $i(y,e,M,D,C){var n=y.props.isDisplayInnerSnapDigit,R=[];return["vertical","horizontal"].forEach(function(a){var u,c,i,o,s,l,f,p,d,h,g,t=e.filter(function(t){return t.type===a}),v="vertical"===a?1:0,m=v?0:1,t=(t=t,c=n,p="vertical"===(u=a)?1:0,h=D[(d=(f="vertical"===u?0:1)?hi:gi).start],g=D[d.end],o=function(t){return t.pos[f]},s=[],l=[],(i=t).forEach(function(t,e){var e=o(t,e,i),n=l.indexOf(e),r=s[n]||[];-1===n&&(l.push(e),s.push(r)),r.push(t)}),s.map(function(t){var a=[],s=[];return t.forEach(function(t){var e,n,r,i=t.element,o=t.elementRect.rect;o[d.end]<h?a.push(t):g<o[d.start]?s.push(t):o[d.start]<=h&&g<=o[d.end]&&c&&(e=t.pos,n={element:i,rect:W(W({},o),((n={})[d.end]=o[d.start],n))},o={element:i,rect:W(W({},o),((i={})[d.start]=o[d.end],i))},i=[0,0],(r=[0,0])[f]=e[f],r[p]=e[p],i[f]=e[f],i[p]=e[p]+t.size,a.push({type:u,pos:r,size:0,elementRect:n}),s.push({type:u,pos:i,size:0,elementRect:o}))}),a.sort(function(t,e){return e.pos[p]-t.pos[p]}),s.sort(function(t,e){return t.pos[p]-e.pos[p]}),{total:t,start:a,end:s,inner:[]}})),b=v?gi:hi,x=v?hi:gi,E=D[b.start],S=D[b.end];t.forEach(function(t){var e=t.total,n=t.start,r=t.end,t=t.inner,o=M[m]+e[0].pos[m]-D[x.start],i=D;n.forEach(function(t){var e,n=t.elementRect.rect,r=i[b.start]-n[b.end];0<r&&((e=[0,0])[v]=M[v]+i[b.start]-E-r,e[m]=o,R.push(Ui(y,a,"dashed",R.length,r,e,t.className,C))),i=n}),i=D,r.forEach(function(t){var e,n=t.elementRect.rect,r=n[b.start]-i[b.end];0<r&&((e=[0,0])[v]=M[v]+i[b.end]-E,e[m]=o,R.push(Ui(y,a,"dashed",R.length,r,e,t.className,C))),i=n}),t.forEach(function(t){var e=t.elementRect.rect,n=E-e[b.start],e=e[b.end]-S,r=[0,0],i=[0,0];r[v]=M[v]-n,r[m]=o,i[v]=M[v]+S-E,i[m]=o,R.push(Ui(y,a,"dashed",R.length,n,r,t.className,C)),R.push(Ui(y,a,"dashed",R.length,e,i,t.className,C))})})}),R}function Zi(t,e,n,r,i){o=t,n=n,r=r,a=(u=e)[0]-o[0],s=u[1]-o[1],Math.abs(a)<A&&(a=0),Math.abs(s)<A&&(s=0);var o=a?s?(s/=a,a=o[1]-s*o[0],r?[n,s*(u[0]+n)+a-u[1]]:[(u[1]+n-a)/s-u[0],n]):r?[n,0]:[0,0]:r?[0,0]:[0,n];if(!o)return{isOutside:!1,offset:[0,0]};var a=D(t,e),s=D(o,t),u=D(o,e),r=a<s||a<u,n=Qn({datas:i,distX:o[0],distY:o[1]});return{offset:[n[0],n[1]],isOutside:r}}function Ki(t,e){return t.isBound?t.offset:e.isSnap?Ci(e).offset:0}function Ji(t,e,n,r,i,o){if(!vi(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a,s,u,c,l=Nr(o.absolutePoses,[e,n]),f=Rr(l),p=f.left,d=f.right,h=f.top,f=f.bottom,g={horizontal:l.map(function(t){return t[1]}),vertical:l.map(function(t){return t[0]})},i=Qi(t,i,bi(mi(t.props.snapDirections),{left:p,right:d,top:h,bottom:f,center:(p+d)/2,middle:(h+f)/2}),g),p=i.vertical,d=i.horizontal,h=Ii(t,l,o),f=h.vertical,g=h.horizontal,i=p.isSnap,t=d.isSnap,l=p.isBound||f.isBound,o=d.isBound||g.isBound,h=$r(p.offset,f.offset),p=$r(d.offset,g.offset),v=(f=r,d=[l,o],g=[i,t],r=[h,p],s=(h=[e,n])[0],u=h[1],h=d[0],d=d[1],p=g[0],g=g[1],e=r[0],r=r[1],n=-e,c=-r,f&&s&&u?(c=n=0,v=[],h&&d?v.push([0,r],[e,0]):h?v.push([e,0]):d?v.push([0,r]):p&&g?v.push([0,r],[e,0]):p?v.push([e,0]):g&&v.push([0,r]),v.length&&(v.sort(function(t,e){return zr(T([s,u],t))-zr(T([s,u],e))}),(p=v[0])[0]&&Math.abs(s)>A?(n=-p[0],c=u*Math.abs(s+n)/Math.abs(s)-u):p[1]&&Math.abs(u)>A&&(g=u,c=-p[1],n=s*Math.abs(u+c)/Math.abs(g)-s),f&&d&&h&&(Math.abs(n)>A&&Math.abs(n)<Math.abs(e)?(n*=a=Math.abs(e)/Math.abs(n),c*=a):Math.abs(c)>A&&Math.abs(c)<Math.abs(r)?(n*=a=Math.abs(r)/Math.abs(c),c*=a):(n=$r(-e,n),c=$r(-r,c))))):(n=s||h?-e:0,c=u||d?-r:0),[n,c]);return[{isBound:l,isSnap:i,offset:v[0]},{isBound:o,isSnap:t,offset:v[1]}]}function Qi(t,e,n,r){var r=Wi(ji(t),(r=void 0===r?n:r).vertical,r.horizontal),i=r.horizontal,r=r.vertical,e=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:yi(t,n.vertical,n.horizontal),t=e.horizontal,n=e.vertical,e=Ki(i[0],t),o=Ki(r[0],n),a=Math.abs(e),s=Math.abs(o);return{horizontal:{isBound:i[0].isBound,isSnap:t.isSnap,snapIndex:t.index,offset:e,dist:a,bounds:i,snap:t},vertical:{isBound:r[0].isBound,isSnap:n.isSnap,snapIndex:n.index,offset:o,dist:s,bounds:r,snap:n}}}function to(t,e,n,r,i){var e=Wi(e,n,r),o=e.horizontal,e=e.vertical,t=Mi(t,n,r,i),n=t.horizontal,r=t.vertical,i=Ki(o[0],n),t=Ki(e[0],r),a=Math.abs(i),s=Math.abs(t);return{horizontal:{isBound:o[0].isBound,isSnap:n.isSnap,snapIndex:n.index,offset:i,dist:a,bounds:o,snap:n},vertical:{isBound:e[0].isBound,isSnap:r.isSnap,snapIndex:r.index,offset:t,dist:s,bounds:e,snap:r}}}function eo(M,D,t,C,R,w){return t.map(function(t){var e=t[0],t=t[1],n=Y(D,e),r=Y(D,t),i=C?(l=R,u=function(t,e,n){var r,i,o=(t=ji(t)).left,a=t.top,s=t.right,t=t.bottom,u=n[0],c=n[1],l=(e=T(n,e))[0],e=e[1],f=(Math.abs(l)<j&&(l=0),0<(e=Math.abs(e)<j?0:e)),p=0<l,d={isBound:!1,offset:0,pos:0},h={isBound:!1,offset:0,pos:0};return 0===l&&0===e||(0===l?f?t<c&&(h.pos=t,h.offset=c-t):c<a&&(h.pos=a,h.offset=c-a):0===e?p?s<u&&(d.pos=s,d.offset=u-s):u<o&&(d.pos=o,d.offset=u-o):(e=n[1]-(n=e/l)*u,r=l=0,i=!1,p&&s<=u?(l=n*s+e,r=s,i=!0):!p&&u<=o&&(l=n*o+e,r=o,i=!0),(i=i&&(l<a||t<l)?!1:i)||(f&&t<=c?(r=((l=t)-e)/n,i=!0):!f&&c<=a&&(r=((l=a)-e)/n,i=!0)),i&&(d.isBound=!0,d.pos=r,d.offset=u-r,h.isBound=!0,h.pos=l,h.offset=c-l))),{vertical:d,horizontal:h}}(o=M,c=n,a=r),i=u.horizontal,u=u.vertical,l=l?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],i=n[1],o=e[0],a=e[1],s=(e=T(n,e))[0],u=0<(e=e[1]),c=0<s,s=ti(s),e=ti(e),l={isSnap:!1,offset:0,pos:0},f={isSnap:!1,offset:0,pos:0};if(0===s&&0===e)return{vertical:l,horizontal:f};var p,d=(t=yi(t,s?[r]:[],e?[i]:[])).vertical,t=t.horizontal;d.posInfos.filter(function(t){t=t.pos;return c?o<=t:t<=o}),t.posInfos.filter(function(t){t=t.pos;return u?a<=t:t<=a}),d.isSnap=0<d.posInfos.length,t.isSnap=0<t.posInfos.length;var h=(d=Ci(d)).isSnap,d=d.guideline,g=(t=Ci(t)).isSnap,t=t.guideline,v=g?t.pos[1]:0,d=h?d.pos[0]:0;return 0===s?g&&(f.isSnap=!0,f.pos=t.pos[1],f.offset=i-f.pos):0===e?h&&(l.isSnap=!0,l.pos=d,l.offset=r-d):(n=n[1]-(t=e/s)*r,s=e=0,p=!1,h?(e=t*(s=d)+n,p=!0):g&&(s=((e=v)-n)/t,p=!0),p&&(l.isSnap=!0,l.pos=s,l.offset=r-s,f.isSnap=!0,f.pos=e,f.offset=i-e)),{vertical:l,horizontal:f}}(o,c,a),o=l.horizontal,c=l.vertical,a=no(i,o),l=no(u,c),s=Math.abs(a),f=Math.abs(l),{horizontal:{isBound:i.isBound,isSnap:o.isSnap,offset:a,dist:s},vertical:{isBound:u.isBound,isSnap:c.isSnap,offset:l,dist:f}}):Qi(M,R,{vertical:[r[0]],horizontal:[r[1]]}),o=i.horizontal,a=o.offset,s=o.isBound,u=o.isSnap,c=i.vertical,l=c.offset,f=c.isBound,p=c.isSnap,d=T(t,e);if(!l&&!a)return{isBound:f||s,isSnap:p||u,sign:d,offset:[0,0]};E=i,g=C,h=F(h=n,S=r)/Math.PI*180,y=(S=E.vertical).isBound,v=S.isSnap,S=S.dist,m=(E=E.horizontal).isBound,b=E.isSnap,x=(h=h%180)<3||177<h,h=87<h&&h<93;var h,g,v,m,b,x,E=E.dist<S&&(y||v&&!h&&(!g||!x))?"vertical":!m&&(!b||x||g&&h)?"":"horizontal";if(!E)return{sign:d,isBound:!1,isSnap:!1,offset:[0,0]};var S="vertical"==E,y=[0,0];return y=(y=C||1!==Math.abs(t[0])||1!==Math.abs(t[1])||e[0]===t[0]||e[1]===t[1]?Zi(n,r,-(S?l:a),S,w).offset:Qn({datas:w,distX:-l,distY:-a})).map(function(t,e){return t*(d[e]?2/d[e]:0)}),{sign:d,isBound:S?f:s,isSnap:S?p:u,offset:y}})}function no(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function ro(t){var e,n,r,i,o=t.state;o.guidelines&&o.guidelines.length||(r=t.state.container,i=t.props.snapContainer||r,e=o.containerClientRect,n={left:0,top:0,bottom:0,right:0},r!==i&&(r=ri(i,!0))&&(r=oi(o,[(i=kr(r)).left-e.left,i.top-e.top]),i=oi(o,[i.right-e.right,i.bottom-e.bottom]),n.left=N(r[0],1e-5),n.top=N(r[1],1e-5),n.right=N(i[0],1e-5),n.bottom=N(i[1],1e-5)),o.snapOffset=n,o.guidelines=Si(t),o.enableSnap=!0)}function io(t,e,n,r,i,o){t=Cr(t,e,n,o?4:3);return Nr(t,T(i,Y(t,r)))}function oo(t,e,n,r,i,o){var a,s,u,c,l=o.fixedDirection,l=(a=n,s=l,c=[],r?(1!==Math.abs(s[0])||1!==Math.abs(s[1])?c.push([s,[-1,-1]],[s,[-1,1]],[s,[1,-1]],[s,[1,1]]):c.push([s,[a[0],-a[1]]],[s,[-a[0],a[1]]]),c.push([s,a])):a[0]&&a[1]||!a[0]&&!a[1]?(u=a[0]?a:[1,1],[1,-1].forEach(function(e){[1,-1].forEach(function(t){t=[e*u[0],t*u[1]];s[0]===t[0]&&s[1]===t[1]||c.push([s,t])})})):a[0]?(1===Math.abs(s[0])?[1]:[1,-1]).forEach(function(t){c.push([[s[0],-1],[t*a[0],-1]],[[s[0],0],[t*a[0],0]],[[s[0],1],[t*a[0],1]])}):a[1]&&(1===Math.abs(s[1])?[1]:[1,-1]).forEach(function(t){c.push([[-1,s[1]],[-1,t*a[1]]],[[0,s[1]],[0,t*a[1]]],[[1,s[1]],[1,t*a[1]]])}),c),n=ki(t,e,n,r),e=Q(Q([],eo(t,e,l,r,i,o),!0),Ai(t,n,o),!0),l=zi(e,0),r=zi(e,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:r.isBound,offset:r.offset[1]}}}function ao(t,e,n,r,i,o,a,s){for(var u,c,l,f,p,d,h,g,v,m,b,x,E,S,y,M,I,D,C,R=Wr(t.state),k=t.props.keepRatio,w=0,O=0,z=0;z<2;++z){var P=oo(t,e(w,O),i,k,a,s),B=P.width,P=P.height,G=B.isBound,T=P.isBound,_=B.offset,A=P.offset;if(1===z&&(G||(_=0),T||(A=0)),0===z&&a&&!G&&!T)return[0,0];k&&(B=Math.abs(_)*(n?1/n:1),P=Math.abs(A)*(r?1/r:1),(G&&T?B<P:T||!G&&B<P)?_=n*A/r:A=r*_/n),w+=_,O+=A}return i[0]&&i[1]&&(h=t,g=R,v=o,m=s,y=[-(R=i)[0],-R[1]],M=(o=h.state).width,I=o.height,o=h.props.bounds,C=D=1/0,o&&(h=[[R[0],-R[1]],[-R[0],R[1]]],R=o.left,b=void 0===R?-1/0:R,R=o.top,x=void 0===R?-1/0:R,R=o.right,E=void 0===R?1/0:R,R=o.bottom,S=void 0===R?1/0:R,h.forEach(function(t){var e,n,r=t[0]!==y[0],i=t[1]!==y[1],t=Y(g,t),o=360*F(v,t)/Math.PI;i&&(e=t.slice(),(Math.abs(o-360)<2||Math.abs(o-180)<2)&&(e[1]=v[1]),n=(i=Zi(v,e,(v[1]<t[1]?S:x)-t[1],!1,m)).offset[1],i=i.isOutside,isNaN(n)||(C=I+(i?1:-1)*Math.abs(n))),r&&(e=t.slice(),(Math.abs(o-90)<2||Math.abs(o-270)<2)&&(e[0]=v[0]),n=(i=Zi(v,e,(v[0]<t[0]?E:b)-t[0],!0,m)).offset[0],r=i.isOutside,isNaN(n)||(D=M+(r?1:-1)*Math.abs(n)))})),R=(o={maxWidth:D,maxHeight:C}).maxWidth,h=o.maxHeight,o=t,u=e(w,O).map(function(t){return t.map(function(t){return N(t,In)})}),c=n+w,l=r+O,R=R,h=h,p=a,d=s,u=Y(u,f=i),p=(o=Qi(o,p,{vertical:[u[0]],horizontal:[u[1]]})).horizontal.offset,w+=_=(p=(u=o.vertical.offset)||p?(d=(o=Qn({datas:d,distX:-u,distY:-p}))[0],u=o[1],[Math.min(R||1/0,c+f[0]*d)-c,Math.min(h||1/0,l+f[1]*u)-l]):[0,0])[0],O+=A=p[1]),[w,O]}function so(t,o,e,n,a){if(!vi(t,"scalable"))return[0,0];var s=a.startOffsetWidth,u=a.startOffsetHeight,c=a.fixedPosition,l=a.fixedDirection,f=a.is3d,t=ao(t,function(t,e){return io((n=a,t=J(o,[t/s,e/u]),e=n.transformOrigin,r=n.offsetMatrix,i=n.is3d?4:3,er(r,K(n.targetMatrix,Ge(t,i),i),e,i)),s,u,l,c,f);var n,r,i},s,u,e,c,n,a);return[t[0]/s,t[1]/u]}function uo(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){t=t.guideline;-1<e.indexOf(t)||e.push(t)})}),e}function co(t,e,n,r,i,o){o=Wi(ji(t,o),e,n),e=o.vertical,n=o.horizontal,e.forEach(function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})}),n.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),o=function(t){if(!(n=t.props.innerBounds))return{vertical:[],horizontal:[]};var e=t.getRect(),a=Y(e=[e.pos1,e.pos2,e.pos3,e.pos4],[0,0]),s=n.left,u=n.top,c=n.width,l=n.height,f=[[s,u],[s,u+l]],p=[[s,u],[s+c,u]],d=[[s+c,u],[s+c,u+l]],h=[[s,u+l],[s+c,u+l]],n=ki(t,e,[0,0],!1),g=[],v=[],m={top:!1,bottom:!1,left:!1,right:!1};return n.forEach(function(t){var e=t.line,t=t.lineConstants,n=Pi(a,e),r=n.horizontal,n=n.vertical,i=_i(e,t,p,n,1,!0),n=_i(e,t,h,n,1,!0),o=_i(e,t,f,r,1,!0),e=_i(e,t,d,r,1,!0);i.isBound&&!m.top&&(g.push(u),m.top=!0),n.isBound&&!m.bottom&&(g.push(u+l),m.bottom=!0),o.isBound&&!m.left&&(v.push(s),m.left=!0),e.isBound&&!m.right&&(v.push(s+c),m.right=!0)}),{horizontal:g,vertical:v}}(t),e=o.vertical,n=o.horizontal;e.forEach(function(n){0<=gt(r,function(t){var e=t.type,t=t.pos;return"bounds"===e&&t===n})||r.push({type:"bounds",pos:n})}),n.forEach(function(n){0<=gt(i,function(t){var e=t.type,t=t.pos;return"bounds"===e&&t===n})||i.push({type:"bounds",pos:n})})}var lo=ei("",["resizable","scalable"]),t={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,a=n.pos2,s=n.pos3,u=n.pos4,c=n.snapRenderInfo;if(!c||!vi(t,""))return[];n.guidelines=Si(t);var h,g,v,m,b,x,n=Math.min(o[0],a[0],s[0],u[0]),o=Math.min(o[1],a[1],s[1],u[1]),a=c.externalPoses||[],s=Wr(t.state),l=[],f=[],p=[],d=[],u=[],E=Rr(s),S=E.width,y=E.height,M=E.top,D=E.left,C=E.bottom,E=E.right,R={left:D,right:E,top:M,bottom:C,center:(D+E)/2,middle:(M+C)/2},w=0<a.length,a=w?Rr(a):{},s=(c.request||(c.direction&&u.push(wi(t,s,c.direction)),c.snap&&(s=Rr(s),c.center&&(s.middle=(s.top+s.bottom)/2,s.center=(s.left+s.right)/2),u.push(Di(t,s,1))),w&&(c.center&&(a.middle=(a.top+a.bottom)/2,a.center=(a.left+a.right)/2),u.push(Di(t,a,1))),u.forEach(function(t){var e=t.vertical.posInfos,t=t.horizontal.posInfos;l.push.apply(l,e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),f.push.apply(f,t.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),p.push.apply(p,uo(e)),d.push.apply(d,uo(t))})),co(t,[D,E],[M,C],l,f),w&&co(t,[a.left,a.right],[a.top,a.bottom],l,f,c.externalBounds),Q(Q([],p,!0),d,!0)),u=s.filter(function(t){return t.element&&!t.gapRects}),D=s.filter(function(t){return t.gapRects});return et(t,"onSnap",{guidelines:s.filter(function(t){return!t.element}),elements:u,gaps:D},!0),Q(Q(Q(Q(Q(Q([],$i(t,u,[n,o],R,e),!0),(h=t,g=D,v=[n,o],m=R,b=e,x=[],["horizontal","vertical"].forEach(function(e){var t=g.filter(function(t){return t.type===e}),a="vertical"===e?0:1,s=a?0:1,u=a?gi:hi,c=a?hi:gi,l=m[u.start],f=m[u.end],p=m[c.start],d=m[c.end];t.forEach(function(t){var n=t.gap,e=t.gapRects,r=t.className,t=Math.max.apply(Math,Q([p],e.map(function(t){return t.rect[c.start]}),!1)),i=Math.min.apply(Math,Q([d],e.map(function(t){return t.rect[c.end]}),!1)),o=(t+i)/2;t!==i&&o!=(p+d)/2&&e.forEach(function(t){var t=t.rect,e=[v[0],v[1]];if(t[u.end]<l)e[a]+=t[u.end]-l;else{if(!(f<t[u.start]))return;e[a]+=t[u.start]-l-n}e[s]+=o-p,x.push(Ui(h,a?"vertical":"horizontal","gap",x.length,n,e,r,b))})})}),x),!0),Vi(t,"horizontal",d,[i,r],R,e),!0),Vi(t,"vertical",p,[i,r],R,e),!0),Li(t,"horizontal",f,n,r,S,0,e),!0),Li(t,"vertical",l,o,i,y,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},ro(t)},drag:function(t){t.state.guidelines=Si(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!lo(t,e)&&!yo(t,e))||(!e.isRequest&&e.inputEvent?P(e.inputEvent.target,_("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,ro(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,ro(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){t=t.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function fo(t,a,e,s){var n=t.state,u=n.renderPoses,c=n.rotation,n=n.direction,l=Tr(t.props,a).zoom,f=0<n?1:-1,p=c/Math.PI*180,d={},n=t.renderState,h=(n.renderDirectionMap||(n.renderDirectionMap={}),n.renderDirectionMap);return e.forEach(function(t){t=t.dir;d[t]=!0}),e.map(function(t){var e=t.data,n=t.classNames,t=t.dir,r=Yn[t];if(!r||!d[t])return null;h[t]=!0;var i=(N(p,15)+f*qn[t]+720)%180,o={};return xt(e).forEach(function(t){o["data-".concat(t)]=e[t]}),s.createElement("div",W({className:_.apply(void 0,Q(["control","direction",t,a],n,!1)),"data-rotation":i,"data-direction":t},o,{key:"direction-".concat(t),style:Gr.apply(void 0,Q([c,l],r.map(function(t){return u[t]}),!1))}))})}function po(t,e,n,r){var i=Tr(t.props,n).renderDirections,e=void 0===i?e:i;return e?fo(t,n,(!0===e?Wn:e).map(function(t){return{data:{},classNames:[],dir:t}}),r):[]}function ho(t,e,n,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=F(n,r),c=e?N(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line".concat(o),className:_.apply(void 0,Q(["line","direction",e?"edge":"",e],a,!1)),"data-rotation":c,"data-line-index":o,"data-direction":e,style:Br(n,r,i,u)})}function go(i,o,t,a,s){return(!0===t?Nn:t).map(function(t,e){var n=Yn[t],r=n[0],n=n[1];if(null!=n)return ho(i,t,a[r],a[n],s,"".concat(o,"Edge").concat(e),o)}).filter(Boolean)}function vo(r){return function(t,e){var n=Tr(t.props,r).edge;return n&&(!0===n||n.length)?Q(Q([],go(e,r,n,t.state.renderPoses,t.props.zoom),!0),po(t,["nw","ne","sw","se"],r,e),!0):mo(t,r,e)}}function mo(t,e,n){return po(t,Wn,e,n)}function bo(t,e,n,r,i){var o=t.state,a=o.is3d?4:3,s=e.origin,t=q(t.state.rootMatrix,T([s[0],s[1]],[o.left,o.top]),a),s=J([i.left,i.top],t);e.startAbsoluteOrigin=s,e.prevDeg=F(s,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=D(s,[n,r])}function xo(t,e,n){var r=n.defaultDeg,i=n.prevDeg,o=i%360,i=Math.floor(i/360),o=(o<0&&(o+=360),t<o&&270<o&&t<90?++i:o<t&&o<90&&270<t&&--i,e*(360*i+t-r));return n.prevDeg=r+o,o}function Eo(t,e,n,r){return xo(F(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function So(t,e,n,r,i,o){var a=t.props.throttleRotate,a=void 0===a?0:a,s=n.prevSnapDeg,o=N(i+(r=o?function(t,e,n,r){if(!vi(t,"rotatable"))return r;var i=e.pos1,o=e.pos2,a=e.pos3,e=e.pos4,s=r*Math.PI/180,o=(i=[i,o,a,e].map(function(t){return T(t,n)})).map(function(t){return Oe(t,s)});return(a=Q(Q([],Xi(t,i,o,n,r),!0),Ni(t,i,o,n,r),!0)).sort(function(t,e){return Math.abs(t-r)-Math.abs(e-r)}),a.length?a[0]:r}(t,e,n.origin,r):r),a),t=o-i;return[(n.prevSnapDeg=t)-s,r,o]}function yo(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if(P(n,_("rotation-control"))||P(n,_("around-control"))||P(n,_("control"))&&P(n,_("rotatable")))return!0;e=t.props.rotationTarget;return!!e&&ii(e,!0).some(function(t){return!!t&&(n===t||n.contains(t))})}var Mo=Wn.map(function(t){var e="",n="",r="center",i="center";return-1<t.indexOf("n")&&(e="top: -20px;",i="bottom"),-1<t.indexOf("s")&&(e="top: 0px;",i="top"),-1<t.indexOf("w")&&(n="left: -20px;",r="right"),-1<t.indexOf("e")&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(n).concat(e,"\n        transform-origin: ").concat(r," ").concat(i,";\n    }")}).join("\n"),Mo=".rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n.rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n".concat(Mo,"\n"),Mo={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[Mo],render:function(t,e){var n=Tr(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,o=n.zoom,a=n.renderDirections,s=n.rotateAroundControls,u=n.resolveAblesWithRotatable,n=t.state,c=n.renderPoses,n=n.direction;if(!r)return null;var l,f,p,d,h,g,v,r=function(t,e,n){var r,i,o=e[0],a=e[1],s=e[2],e=e[3];if("none"!==t)return t=(t||"top").split("-"),r=t[0],t=t[1],i=[o,a],"left"===r?i=[s,o]:"right"===r?i=[a,e]:"bottom"===r&&(i=[e,s]),o=[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2],a=Ar(i,n),t&&(e="bottom"===r||"left"===r,o=i[(s="top"===t||"left"===t)&&!e||!s&&e?0:1]),[o,a]}(i,c,n),i=[];return r&&(c=r[0],n=r[1],i.push(e.createElement("div",{key:"rotation",className:_("rotation"),style:{transform:"translate(-50%) translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(n,"rad)")}},e.createElement("div",{className:_("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:_("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))),a&&(r=xt(u||{}),l={},r.forEach(function(e){u[e].forEach(function(t){l[t]=e})}),c=[],$(a)&&(c=a.map(function(t){var e=l[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}})),i.push.apply(i,fo(t,"rotatable",c,e))),s&&i.push.apply(i,(f=e,(o=(n=t).renderState).renderDirectionMap||(o.renderDirectionMap={}),p=(r=n.state).renderPoses,d=r.rotation,r=r.direction,o=o.renderDirectionMap,h=n.props.zoom,g=0<r?1:-1,v=d/Math.PI*180,xt(o).map(function(t){var e=Yn[t];if(!e)return null;var n=(N(v,15)+g*qn[t]+720)%180;return f.createElement("div",{className:_("around-control"),"data-rotation":n,"data-direction":t,key:"direction-around-".concat(t),style:Gr.apply(void 0,Q([d,h],e.map(function(t){return p[t]}),!1))})}))),i},dragControlCondition:yo,dragControlStart:function(o,t){var a=t.datas,e=t.clientX,n=t.clientY,r=t.parentRotate,i=t.parentFlag,s=t.isPinch,u=t.isRequest,c=o.state,l=c.target,f=c.left,p=c.top,d=c.direction,h=c.beforeDirection,g=c.targetTransform,v=c.moveableClientRect,m=c.offsetMatrix,b=c.targetMatrix,x=c.allMatrix,E=c.width,S=c.height;if(!u&&!l)return!1;var y,M,D,C,R,l=o.getRect(),g=(a.rect=l,a.transform=g,a.left=f,a.top=p,function(t){a.fixedDirection=t,a.fixedPosition=lr(o,t),z&&z.setFixedDirection(t)}),w=e,O=n,p=(u||s||i?(a.beforeInfo={origin:l.beforeOrigin,prevDeg:f=r||0,defaultDeg:f,prevSnapDeg:0,startDist:0},a.afterInfo=W(W({},a.beforeInfo),{origin:l.origin}),a.absoluteInfo=W(W({},a.beforeInfo),{origin:l.origin,startValue:f})):((e=null==(p=t.inputEvent)?void 0:p.target)&&(n=e.getAttribute("data-direction")||"",(u=jn[n])&&(a.isControl=!0,a.isAroundControl=P(e,_("around-control")),a.controlDirection=u,(s=e.getAttribute("data-resolve"))&&(a.resolveAble=s),M=c.rootMatrix,i=c.renderPoses,r=v,D=16===M.length?4:3,i=i.map(function(t){return q(M,t,D)}),C=r.left,R=r.top,w=(f=Y(i.map(function(t){return[t[0]+C,t[1]+R]}),u))[0],O=f[1])),a.beforeInfo={origin:l.beforeOrigin},a.afterInfo={origin:l.origin},a.absoluteInfo={origin:l.origin,startValue:l.rotation},y=g,g=function(t){var e=c.is3d?4:3,n=Y([[0,0],[E,0],[0,S],[E,S]],t),r=J(be(b,e),n),i=r[0],r=r[1],i=B(m,Ee([i,r],e)),r=B(x,Ee([n[0],n[1]],e));y(t),a.beforeInfo.origin=i,a.afterInfo.origin=r,a.absoluteInfo.origin=r,bo(o,a.beforeInfo,w,O,v),bo(o,a.afterInfo,w,O,v),bo(o,a.absoluteInfo,w,O,v)}),a.startClientX=w,a.startClientY=O,a.direction=d,a.beforeDirection=h,a.startValue=0,a.datas={},rr(t,"rotate"),!1),z=!1,u=(a.isControl&&a.resolveAble&&"resizable"===a.resolveAble&&(n=o.getAble("resizable"),z=!!n&&n.dragControlStart(o,W(W({},new Ln("resizable").dragStart([0,0],t)),{parentDirection:a.controlDirection,parentFixedDirection:a.fixedDirection}))),z||(p=!!(e=o.getAble("draggable"))&&e.dragStart(o,(new Ln).dragStart([0,0],t))),g((r=(s=(s=o).state).width,i=s.height,[(s=s.transformOrigin)[0]/(r/2)-1,s[1]/(i/2)-1])),tt(o,t,W(W({set:function(t){a.startValue=t*Math.PI/180},setFixedDirection:g},nr(t)),{dragStart:p,resizeStart:z}))),f=et(o,"onRotateStart",u);return a.isRotate=!1!==f,c.snapRenderInfo={request:t.isRequest},!!a.isRotate&&u},dragControl:function(t,e){var n=e.datas,r=e.distX,i=e.distY,o=e.parentRotate,a=e.parentFlag,s=e.isPinch,u=e.groupDelta,c=n.beforeDirection,l=n.beforeInfo,f=n.afterInfo,p=n.absoluteInfo,d=n.isRotate,h=n.startValue,g=n.rect,v=n.startClientX,m=n.startClientY;if(d){$n(e,"rotate");var b,x,E,d=c*Or(e.datas.beforeTransform,[50,50],100,100).direction,S=t.props.parentMoveable,y=180/Math.PI*h,h=p.startValue,M=!1,v=v+r,r=m+i;if(!a&&"parentDist"in e?(m=e.parentDist,E=x=b=m):s||a?(b=xo(o,c,l),x=xo(o,d,f),E=xo(o,d,p)):(b=Eo(v,r,c,l),x=Eo(v,r,d,f),E=Eo(v,r,d,p),M=!0),et(t,"onBeforeRotate",tt(t,e,{beforeRotation:y+b,rotation:y+x,absoluteRotation:h+E,setRotation:function(t){E=b=x=t-y}},!0)),m=(i=So(t,g,l,b,y,M))[0],b=i[1],a=i[2],c=(o=So(t,g,f,x,y,M))[0],x=o[1],d=o[2],i=(l=So(t,g,p,E,h,M))[0],E=l[1],f=l[2],i||c||m||S)return o=Zn(n,"rotate(".concat(d,"deg)"),"rotate(".concat(x,"deg)")),g=x,M=(h=n).fixedDirection,l=h.fixedPosition,u=T(J(u||[0,0],S=cr(t,"rotate(".concat(g,"deg)"),M,l,h)),n.prevInverseDist||[0,0]),n.prevInverseDist=S,n.requestValue=null,M=g=ur(t,o,u,s,e),l=D([v,r],p.startAbsoluteOrigin)-p.startDist,h=void 0,"resizable"===n.resolveAble&&(S=t.getAble("resizable").dragControl(t,W(W({},Hn(e,t.state,[e.deltaX,e.deltaY],!!s,!1,"resizable")),{resolveMatrix:!0,parentDistance:l})))&&(M=qr(M,h=S)),et(t,"onRotate",o=tt(t,e,W(W({delta:c,dist:x,rotate:d,rotation:d,beforeDist:b,beforeDelta:m,beforeRotate:a,beforeRotation:a,absoluteDist:E,absoluteDelta:i,absoluteRotate:f,absoluteRotation:f,isPinch:!!s,resize:h},g),M))),o}},dragControlAfter:function(t,e){e.datas.requestValue},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate)return n.isRotate=!1,n=Xr(t,e,{}),et(t,"onRotateEnd",n),n},dragGroupControlCondition:yo,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,o=r.top,a=r.beforeOrigin,r=this.dragControlStart(t,e);if(!r)return!1;r.set(n.beforeDirection*t.rotation);e=fi(t,this,"dragControlStart",e,function(t,e){var t=t.state,n=t.left,r=t.top,t=t.beforeOrigin,n=J(T([n,r],[i,o]),T(t,a));return e.datas.groupClient=n,W(W({},e),{parentRotate:0})}),t=et(t,"onRotateGroupStart",W(W({},r),{targets:t.props.targets,events:e}));return n.isRotate=!1!==t,!!n.isRotate&&r},dragGroupControl:function(e,n){var t=n.datas;if(t.isRotate){Hr(e,"onBeforeRotate",function(t){et(e,"onBeforeRotateGroup",tt(e,n,W(W({},t),{targets:e.props.targets}),!0))});var a,s,u,r=this.dragControl(e,n);if(r)return a=t.beforeDirection,s=r.beforeDist,u=r.beforeDelta/180*Math.PI,t=fi(e,this,"dragControl",n,function(t,e){var n=e.datas.groupClient,r=n[0],n=n[1],i=Oe([r,n],u*a),o=i[0],i=i[1],r=[o-r,i-n];return e.datas.groupClient=[o,i],W(W({},e),{parentRotate:s,groupDelta:r})}),e.rotation=a*r.beforeRotation,t=W({targets:e.props.targets,events:t,set:function(t){e.rotation=t},setGroupRotation:function(t){e.rotation=t}},r),et(e,"onRotateGroup",t),t}},dragGroupControlEnd:function(t,e){var n,r=e.isDrag;if(e.datas.isRotate)return this.dragControlEnd(t,e),n=fi(t,this,"dragControlEnd",e),et(t,"onRotateGroupEnd",Xr(t,e,{targets:t.props.targets,events:n})),r},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Do={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.props,r=n.throttleDragRotate,n=n.zoom,t=t.state,i=t.dragInfo,t=t.beforeOrigin;if(!r||!i)return[];r=i.dist;if(!r[0]&&!r[1])return[];i=zr(r),r=F(r,[0,0]);return[e.createElement("div",{className:_("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(i,"px"),transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,a=o.target,o=o.gestos;if(o.draggable)return!1;o.draggable=i||t.targetGesto;i=Lr(a),n.datas={},n.left=parseFloat(i.left||"")||0,n.top=parseFloat(i.top||"")||0,n.bottom=parseFloat(i.bottom||"")||0,n.right=parseFloat(i.right||"")||0,n.startValue=[0,0],Un(t,e),rr(e,"translate"),n.absolutePoses=Wr(t.state),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0],a=tt(t,e,W({set:function(t){n.startValue=t}},nr(e)));return!1!==(r||et(t,"onDragStart",a))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),!!n.isDrag&&a},drag:function(t,e){if(e){$n(e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,a=e.isRequest,s=e.deltaOffset,u=e.distX,c=e.distY,l=n.isDrag,f=n.prevDist,p=n.prevBeforeDist,d=n.startValue;if(l){s&&(u+=s[0],c+=s[1]);var l=t.props,h=l.parentMoveable,g=!r&&l.throttleDrag||0,v=!r&&l.throttleDragRotate||0,m=!1,b=0,i=(!r&&0<v&&(u||c)&&(l=N((l=l.startDragRotate||0)+180*F([0,0],[u,c])/Math.PI,v)-l,x=c*Math.abs(Math.cos((l-90)/180*Math.PI)),x=zr([u*Math.abs(Math.cos(l/180*Math.PI)),x]),b=l*Math.PI/180,u=x*Math.cos(b),c=x*Math.sin(b)),o||r||i||v&&!u&&!c||(x=(l=Ji(t,u,c,v,a||s,n))[0],b=l[1],i=x.isSnap,a=x.isBound,s=x.offset,l=b.isSnap,x=b.isBound,m=i||l||a||x,u+=s,c+=b.offset),J(Jn({datas:n,distX:u,distY:c}),d)),x=J((l=Jn({datas:a=(l={datas:n,distX:u,distY:c}).datas,distX:l.distX,distY:l.distY}),B(Kn(a,xe([l[0],l[1]],4)),Ee([0,0,0],4),4)),d),s=(v||m||(Ct(x,g),Ct(i,g)),Ct(x,j),Ct(i,j),T(i,d)),b=T(x,d),u=T(b,f),c=T(s,p),a=(n.prevDist=b,n.prevBeforeDist=s,n.passDelta=u,n.passDist=b,n.left+s[0]),l=n.top+s[1],v=n.right-s[0],m=n.bottom-s[1],g=Zn(n,"translate(".concat(x[0],"px, ").concat(x[1],"px)"),"translate(".concat(b[0],"px, ").concat(b[1],"px)"));if(or(e,g),t.state.dragInfo.dist=r?[0,0]:b,r||h||!u.every(function(t){return!t})||!c.some(function(t){return!t}))return f=(d=t.state).width,p=d.height,n=tt(t,e,W({transform:g,dist:b,delta:u,translate:x,beforeDist:s,beforeDelta:c,beforeTranslate:i,left:a,top:l,right:v,bottom:m,width:f,height:p,isPinch:o},Yr({style:g}))),r||et(t,"onDrag",n),n}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return!(!r[0]&&!r[1])&&(n.deltaOffset=[0,0],this.drag(t,W(W({},e),{deltaOffset:r})))},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,r=Xr(t,e,{}),n||et(t,"onDragEnd",r),r},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=this.dragStart(t,e);if(!o)return!1;r=li(t,this,"dragStart",[r||0,i||0],e,!1,"draggable"),i=et(t,"onDragGroupStart",W(W({},o),{targets:t.props.targets,events:r}));return n.isDrag=!1!==i,!!n.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),e=li(t,this,"drag",e.datas.passDelta,e,!1,"draggable");if(n)return et(t,"onDragGroup",t=W({targets:t.props.targets,events:e},n)),t}},dragGroupEnd:function(t,e){var n,r=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),n=li(t,this,"dragEnd",[0,0],e,!1,"draggable"),et(t,"onDragGroupEnd",Xr(t,e,{targets:t.props.targets,events:n})),r},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}},Co=ei("resizable"),Co={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:vo("resizable"),dragControlCondition:Co,dragControlStart:function(t,e){var n=e.inputEvent,r=e.isPinch,i=e.isGroup,o=e.parentDirection,a=e.parentGesto,s=e.datas,u=e.parentFixedDirection,c=e.parentEvent,o=o||(r?[0,0]:Fr(n.target)),n=t.state,l=n.target,f=n.width,p=n.height,d=n.gestos;if(!o||!l)return!1;if(d.resizable)return!1;d.resizable=a||t.controlGesto,r||Un(t,e),s.datas={},s.direction=o,s.startOffsetWidth=f,s.startOffsetHeight=p,s.prevWidth=0,s.prevHeight=0,s.minSize=[0,0],s.startWidth=n.cssWidth,s.startHeight=n.cssHeight,s.maxSize=[1/0,1/0],i||(s.minSize=[n.minOffsetWidth,n.minOffsetHeight],s.maxSize=[n.maxOffsetWidth,n.maxOffsetHeight]);l=t.props.transformOrigin||"% %";function h(t){s.ratio=t&&isFinite(t)?t:0}function g(t){s.fixedDirection=t,s.fixedPosition=Y(s.startPositions,t)}function v(t){s.minSize=[Z("".concat(t[0]),0)||0,Z("".concat(t[1]),0)||0]}function m(t){t=[t[0]||1/0,t[1]||1/0];ot(t[0])&&!isFinite(t[0])||(t[0]=Z("".concat(t[0]),0)||1/0),ot(t[1])&&!isFinite(t[1])||(t[1]=Z("".concat(t[1]),0)||1/0),s.maxSize=t}s.transformOrigin=l&&b(l)?l.split(" "):l,s.startOffsetMatrix=n.offsetMatrix,s.startTransformOrigin=n.transformOrigin,s.isWidth=null!=(d=null==e?void 0:e.parentIsWidth)?d:!o[0]&&!o[1]||o[0]||!o[1],s.startPositions=Wr(t.state),h(f/p),g(u||[-o[0],-o[1]]),s.setFixedDirection=g,s.setMin=v,s.setMax=m;a=tt(t,e,{direction:o,startRatio:s.ratio,set:function(t){var e=t[0],t=t[1];s.startWidth=e,s.startHeight=t},setMin:v,setMax:m,setRatio:h,setFixedDirection:g,setOrigin:function(t){s.transformOrigin=t},dragStart:Do.dragStart(t,(new Ln).dragStart([0,0],e))});return!1!==(c||et(t,"onResizeStart",a))&&(s.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!s.isResize&&a},dragControl:function(t,n){var r=n.datas,e=n.parentFlag,i=n.isPinch,o=n.parentKeepRatio,a=n.dragClient,s=n.parentDist,u=n.isRequest,c=n.isGroup,l=n.parentEvent,f=n.resolveMatrix,p=r.isResize,d=r.transformOrigin,h=r.startWidth,g=r.startHeight,v=r.prevWidth,m=r.prevHeight,b=r.minSize,x=r.maxSize,E=r.ratio,S=r.startOffsetWidth,y=r.startOffsetHeight,M=r.isWidth;if(p){f&&(p=t.state.is3d,f=r.startOffsetMatrix,C=r.startTransformOrigin,p=p?4:3,w=Ae(ar(n)),C=Cr(f=er(f,w=p!==(f=Math.sqrt(w.length))?I(w,f,p):w,C,p),S,y,p),r.startPositions=C,r.nextTargetMatrix=w,r.nextAllMatrix=f);var p=Tr(t.props,"resizable"),D=p.resizeFormat,C=p.throttleResize,R=void 0===C?e?0:1:C,w=p.parentMoveable,f=p.keepRatioFinally,C=r.direction,O=C,z=0,P=0,B=(C[0]||C[1]||(O=[1,1]),E&&(null!=o?o:p.keepRatio)||!1),o=_(),G=o[0],T=o[1],p=(l||(r.setFixedDirection(r.fixedDirection),et(t,"onBeforeResize",tt(t,n,{setFixedDirection:function(t){return r.setFixedDirection(t),t=_(),G=t[0],T=t[1],[G,T]},boundingWidth:G,boundingHeight:T,setSize:function(t){G=t[0],T=t[1]}},!0))),a),o=(a||(p=!e&&i?pr(t,[0,0]):r.fixedPosition),[0,0]),u=(i||(o=function(t,n,r,e,i,o,a){if(!vi(t,"resizable"))return[0,0];var s=a.fixedDirection,u=a.nextAllMatrix,c=t.state,l=c.allMatrix,f=c.is3d;return ao(t,function(t,e){return io(u||l,n+t,r+e,s,i,f)},n,r,e,i,o,a)}(t,G,T,C,p,u,r)),s&&(s[0]||(o[0]=0),s[1]||(o[1]=0)),B?(O[0]&&O[1]&&o[0]&&o[1]&&(Math.abs(o[0])>Math.abs(o[1])?o[1]=0:o[0]=0),(a=!o[0]&&!o[1])&&A(),O[0]&&!O[1]||o[0]&&!o[1]||a&&M?(G+=o[0],T=G/E):(!O[0]&&O[1]||!o[0]&&o[1]||a&&!M)&&(T+=o[1],G=T*E)):(G+=o[0],T+=o[1],G=Math.max(0,G),T=Math.max(0,T)),e=yt([G,T],b,x,!!B&&E),G=e[0],T=e[1],A(),B&&(c||f)&&(M?T=G/E:G=T*E),[(z=G-S)-v,(P=T-y)-m]),s=(r.prevWidth=z,r.prevHeight=P,fr(t,G,T,p,d,r));if(w||!u.every(function(t){return!t})||!s.every(function(t){return!t}))return o=(a=Do.drag(t,Hn(n,t.state,s,!!i,!1,"draggable"))).transform,b=tt(t,n,W({width:h+z,height:g+P,offsetWidth:Math.round(G),offsetHeight:Math.round(T),startRatio:E,boundingWidth:G,boundingHeight:T,direction:C,dist:[z,P],delta:u,isPinch:!!i,drag:a},qr({style:{width:"".concat(G,"px"),height:"".concat(T,"px")},transform:o},a))),l||et(t,"onResize",b),b}function _(){var t=r.fixedDirection,e=si(O,B,r,n),e=(z=e.distWidth,P=e.distHeight,O[0]-t[0]||B?Math.max(S+z,j):S),t=O[1]-t[1]||B?Math.max(y+P,j):y;return B&&S&&y&&(M?t=e/E:e=t*E),[e,t]}function A(){var t;D&&(t=D([G,T]),G=t[0],T=t[1]),G=N(G,R),T=N(T,R)}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(r)return r=t.state,i=r.width-(i+a),a=r.height-(o+s),r=3<Math.abs(i),o=3<Math.abs(a),r&&(n.startWidth+=i,n.startOffsetWidth+=i,n.prevWidth+=i),o&&(n.startHeight+=a,n.startOffsetHeight+=a,n.prevHeight+=a),r||o?this.dragControl(t,e):void 0},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize)return n.isResize=!1,n=Xr(t,e,{}),r||et(t,"onResizeEnd",n),n},dragGroupControlCondition:Co,dragGroupControlStart:function(i,t){var o=t.datas,e=this.dragControlStart(i,W(W({},t),{isGroup:!0}));if(!e)return!1;var a=ci(i,"resizable",t);function r(t,e){var n=o.fixedDirection,r=o.fixedPosition,t=Y(e.datas.startPositions||Wr(t.state),n),n=B(Be(-i.rotation/180*Math.PI,3),[t[0]-r[0],t[1]-r[1],1],3),t=n[0],r=n[1];return e.datas.originalX=t,e.datas.originalY=r,e}var s=o.startOffsetWidth,u=o.startOffsetHeight;function n(){var r=o.minSize;a.forEach(function(t){var t=t.datas,e=t.minSize,n=t.startOffsetWidth,t=t.startOffsetHeight,n=s*(n?e[0]/n:0),e=u*(t?e[1]/t:0);r[0]=Math.max(r[0],n),r[1]=Math.max(r[1],e)})}function c(){var r=o.maxSize;a.forEach(function(t){var t=t.datas,e=t.maxSize,n=t.startOffsetWidth,t=t.startOffsetHeight,n=s*(n?e[0]/n:0),e=u*(t?e[1]/t:0);r[0]=Math.min(r[0],n),r[1]=Math.min(r[1],e)})}function l(n){e.setFixedDirection(n),f.forEach(function(t,e){t.setFixedDirection(n),r(t.moveable,a[e])})}var f=fi(i,this,"dragControlStart",t,r),t=(n(),c(),o.setFixedDirection=l,W(W({},e),{targets:i.props.targets,events:f.map(function(e){return W(W({},e),{setMin:function(t){e.setMin(t),n()},setMax:function(t){e.setMax(t),c()}})}),setFixedDirection:l,setMin:function(t){e.setMin(t),n()},setMax:function(t){e.setMax(t),c()}})),t=et(i,"onResizeGroupStart",t);return o.isResize=!1!==t,!!o.isResize&&e},dragGroupControl:function(i,e){var t=e.datas;if(t.isResize){var n,o,a,s,r,u,c=Tr(i.props,"resizable"),l=(Hr(i,"onBeforeResize",function(t){et(i,"onBeforeResizeGroup",tt(i,e,W(W({},t),{targets:c.targets}),!0))}),this.dragControl(i,W(W({},e),{isGroup:!0})));if(l)return r=l.boundingWidth,u=l.boundingHeight,n=l.dist,o=c.keepRatio,a=[r/(r-n[0]),u/(u-n[1])],s=t.fixedPosition,r=fi(i,this,"dragControl",e,function(t,e){var n=B(Be(i.rotation/180*Math.PI,3),[e.datas.originalX*a[0],e.datas.originalY*a[1],1],3),r=n[0],n=n[1];return W(W({},e),{parentDist:null,parentScale:a,dragClient:J(s,[r,n]),parentKeepRatio:o})}),u=W({targets:c.targets,events:r},l),et(i,"onResizeGroup",u),u}},dragGroupControlEnd:function(t,e){var n,r=e.isDrag;if(e.datas.isResize)return this.dragControlEnd(t,e),n=fi(t,this,"dragControlEnd",e),et(t,"onResizeGroupEnd",Xr(t,e,{targets:t.props.targets,events:n})),r},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null==(t=null==t?void 0:t.horizontal)||t}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},Ro=ei("scalable"),Ro={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:vo("scalable"),dragControlCondition:Ro,dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,i=e.parentDirection||(r?[0,0]:Fr(i.target)),o=t.state,a=o.width,s=o.height,u=o.targetTransform,c=o.target,l=o.pos1,f=o.pos2,o=o.pos4;if(!i||!c)return!1;r||Un(t,e),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=i,n.startOffsetWidth=a,n.startOffsetHeight=s,n.startValue=[1,1];c=D(l,f),r=D(f,o),u=!i[0]&&!i[1]||i[0]||!i[1];function p(t){n.ratio=t&&isFinite(t)?t:0}function d(t){n.fixedDirection=t,n.fixedPosition=Y(n.startPositions,t)}n.scaleWidth=c,n.scaleHeight=r,n.scaleXRatio=c/a,n.scaleYRatio=r/s,rr(e,"scale"),n.isWidth=u,n.startPositions=Wr(t.state),n.setFixedDirection=d,p(D(l,f)/D(f,o)),d([-i[0],-i[1]]);c=tt(t,e,W(W({direction:i,set:function(t){n.startValue=t},setRatio:p,setFixedDirection:d},nr(e)),{dragStart:Do.dragStart(t,(new Ln).dragStart([0,0],e))}));return!1!==et(t,"onScaleStart",c)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:i}),!!n.isScale&&c},dragControl:function(t,n){$n(n,"scale");var r=n.datas,e=n.parentKeepRatio,i=n.parentFlag,o=n.isPinch,a=n.dragClient,s=n.isRequest,u=r.prevDist,c=r.direction,l=r.startOffsetWidth,f=r.startOffsetHeight,p=r.isScale,d=r.startValue,h=r.isWidth,g=r.ratio;if(!p)return!1;var p=t.props,v=p.throttleScale,m=p.parentMoveable,b=c,x=(c[0]||c[1]||(b=[1,1]),g&&(null!=e?e:p.keepRatio)||!1),e=t.state;function E(){var t=si(b,x,r,n),e=t.distWidth,t=t.distHeight,e=(l+e)/l,t=(f+t)/f,e=b[0]||x?e*d[0]:d[0],t=b[1]||x?t*d[1]:d[1];return[e=0===e?1e-9*(0<u[0]?1:-1):e,t=0===t?1e-9*(0<u[1]?1:-1):t]}var S=E(),p=(o||!t.props.groupable||$(p=(e.snapRenderInfo||{}).direction)&&(p[0]||p[1])&&(e.snapRenderInfo={direction:c,request:n.isRequest}),et(t,"onBeforeScale",tt(t,n,{scale:S,setFixedDirection:function(t){return r.setFixedDirection(t),S=E()},setScale:function(t){S=t}},!0)),[S[0]/d[0],S[1]/d[1]]),e=a,y=[0,0],i=(a||(e=!i&&o?pr(t,[0,0]):r.fixedPosition),o||(y=so(t,p,c,s,r)),x?(b[0]&&b[1]&&y[0]&&y[1]&&(Math.abs(y[0]*l)>Math.abs(y[1]*f)?y[1]=0:y[0]=0),(a=!y[0]&&!y[1])&&(h?p[0]=N(p[0]*d[0],v)/d[0]:p[1]=N(p[1]*d[1],v)/d[1]),b[0]&&!b[1]||y[0]&&!y[1]||a&&h?(p[0]+=y[0],i=l*p[0]*d[0]/g,p[1]=i/f/d[1]):(!b[0]&&b[1]||!y[0]&&y[1]||a&&!h)&&(p[1]+=y[1],s=f*p[1]*d[1]*g,p[0]=s/l/d[0])):(p[0]+=y[0],p[1]+=y[1],y[0]||(p[0]=N(p[0]*d[0],v)/d[0]),y[1]||(p[1]=N(p[1]*d[1],v)/d[1])),0===p[0]&&(p[0]=1e-9*(0<u[0]?1:-1)),0===p[1]&&(p[1]=1e-9*(0<u[1]?1:-1)),[p[0]/u[0],p[1]/u[1]]),s=(S=[p[0]*d[0],p[1]*d[1]],a=r.fixedDirection,h=e,g=r,cr(t,"scale(".concat(p.join(", "),")"),a,h,g)),y=T(s,r.prevInverseDist||[0,0]);if(r.prevDist=p,r.prevInverseDist=s,S[0]===u[0]&&S[1]===u[1]&&y.every(function(t){return!t})&&!m)return!1;v=Zn(r,"scale(".concat(S.join(", "),")"),"scale(".concat(p.join(", "),")")),e=tt(t,n,W({offsetWidth:l,offsetHeight:f,direction:c,scale:S,dist:p,delta:i,isPinch:!!o},ur(t,v,y,o,n)));return et(t,"onScale",e),e},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,et(t,"onScaleEnd",Xr(t,e,{})),r)},dragGroupControlCondition:Ro,dragGroupControlStart:function(i,t){var o=t.datas,e=this.dragControlStart(i,t);if(!e)return!1;var r=ci(i,"resizable",t);function a(t,e){var n=o.fixedDirection,r=o.fixedPosition,t=Y(e.datas.startPositions||Wr(t.state),n),n=B(Be(-i.rotation/180*Math.PI,3),[t[0]-r[0],t[1]-r[1],1],3),t=n[0],r=n[1];return e.datas.originalX=t,e.datas.originalY=r,e}o.moveableScale=i.scale;function n(n){e.setFixedDirection(n),s.forEach(function(t,e){t.setFixedDirection(n),a(t.moveable,r[e])})}var s=fi(i,this,"dragControlStart",t,a),t=(o.setFixedDirection=n,W(W({},e),{targets:i.props.targets,events:s,setFixedDirection:n})),u=et(i,"onScaleGroupStart",t);return o.isScale=!1!==u,!!o.isScale&&t},dragGroupControl:function(i,e){var t=e.datas;if(t.isScale){Hr(i,"onBeforeScale",function(t){et(i,"onBeforeScaleGroup",tt(i,e,W(W({},t),{targets:i.props.targets}),!0))});var o,a,s,u,n,r=this.dragControl(i,e);if(r)return n=t.moveableScale,i.scale=[r.scale[0]*n[0],r.scale[1]*n[1]],o=i.props.keepRatio,a=r.dist,s=r.scale,u=t.fixedPosition,n=fi(i,this,"dragControl",e,function(t,e){var n=B(Be(i.rotation/180*Math.PI,3),[e.datas.originalX*a[0],e.datas.originalY*a[1],1],3),r=n[0],n=n[1];return W(W({},e),{parentDist:null,parentScale:s,parentKeepRatio:o,dragClient:J(u,[r,n])})}),t=W({targets:i.props.targets,events:n},r),et(i,"onScaleGroup",t),t}},dragGroupControlEnd:function(t,e){var n,r=e.isDrag;if(e.datas.isScale)return this.dragControlEnd(t,e),n=fi(t,this,"dragControlEnd",e),et(t,"onScaleGroupEnd",Xr(t,e,{targets:t.props.targets,events:n})),r},request:function(){var e={},n=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return n+=t.deltaWidth,r+=t.deltaHeight,{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function wo(t,n){return t.map(function(t,e){return i(t,n[e],1,2)})}function Oo(t,e,n){e=F(t,e),t=F(t,n)-e;return 0<=t?t:t+2*Math.PI}var zo={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,n=n.zoom;if(r||i||!o)return[];var r=t.state,i=r.pos1,o=r.pos2,a=r.pos3,r=r.pos4,s=wo(i,o),u=wo(o,i),c=wo(i,a),i=wo(a,i),l=wo(a,r),a=wo(r,a),f=wo(o,r),r=wo(r,o);return Q([e.createElement("div",{className:_("line"),key:"middeLine1",style:Br(s,l,n)}),e.createElement("div",{className:_("line"),key:"middeLine2",style:Br(u,a,n)}),e.createElement("div",{className:_("line"),key:"middeLine3",style:Br(c,f,n)}),e.createElement("div",{className:_("line"),key:"middeLine4",style:Br(i,r,n)})],mo(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;e=e.inputEvent.target;return P(e,_("direction"))&&P(e,_("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,r=Fr(r.target);if(!r||!i)return!1;var i=t.state,o=i.transformOrigin,a=i.is3d,s=i.targetTransform,u=i.targetMatrix,c=i.width,l=i.height,f=i.left,p=i.top;return n.datas={},n.targetTransform=s,n.warpTargetMatrix=a?u:I(u,3,4),n.targetInverseMatrix=me(y(n.warpTargetMatrix,4),3,4),n.direction=r,n.left=f,n.top=p,n.poses=[[0,0],[c,0],[0,l],[c,l]].map(function(t){return T(t,o)}),n.nextPoses=n.poses.map(function(t){var e=t[0],t=t[1];return B(n.warpTargetMatrix,[e,t,0,1],4)}),n.startValue=k(4),n.prevMatrix=k(4),n.absolutePoses=Wr(i),n.posIndexes=tr(r),Un(t,e),rr(e,"matrix3d"),!(i.snapRenderInfo={request:e.isRequest,direction:r})!==et(t,"onWarpStart",tt(t,e,W({set:function(t){n.startValue=t}},nr(e))))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,o=e.distY,a=n.targetInverseMatrix,s=n.prevMatrix,u=n.isWarp,c=n.startValue,l=n.poses,f=n.posIndexes,p=n.absolutePoses;if(!u)return!1;$n(e,"matrix3d"),vi(t,"warpable")&&(1<(u=f.map(function(t){return p[t]})).length&&u.push([(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]),u=(r=Qi(t,r,{horizontal:u.map(function(t){return t[1]+o}),vertical:u.map(function(t){return t[0]+i})})).horizontal,r=r.vertical,o-=u.offset,i-=r.offset);var d=Qn({datas:n,distX:i,distY:o},!0),h=n.nextPoses.slice();if(f.forEach(function(t){h[t]=J(h[t],d)}),!An.every(function(t){return e=t.map(function(t){return l[t]}),t=t.map(function(t){return h[t]}),e=Oo(e[0],e[1],e[2]),t=Oo(t[0],t[1],t[2]),!((n=Math.PI)<=e&&t<=n||e<=n&&n<=t);var e,n}))return!1;u=_e(l[0],l[2],l[1],l[3],h[0],h[2],h[1],h[3]);if(!u.length)return!1;r=Kn(n,K(a,u,4),!0),f=K(y(s,4),r,4),a=K(c,n.prevMatrix=r,4),u=Zn(n,"matrix3d(".concat(a.join(", "),")"),"matrix3d(".concat(r.join(", "),")"));return or(e,u),et(t,"onWarp",tt(t,e,{delta:f,matrix:a,dist:r,multiply:K,transform:u})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,et(t,"onWarpEnd",Xr(t,e,{})),r)}},Po=_("area-pieces"),Bo=_("area-piece"),Go=_("avoid");function To(t){var e,n=t.areaElement;n&&(e=(t=t.state).width,t=t.height,wt(n,Go),n.style.cssText+="left: 0px; top: 0px; width: ".concat(e,"px; height: ").concat(t,"px"))}function _o(t){return t.createElement("div",{key:"area_pieces",className:Po},t.createElement("div",{className:Bo}),t.createElement("div",{className:Bo}),t.createElement("div",{className:Bo}),t.createElement("div",{className:Bo}))}var Ao={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,n=n.passDragArea,a=t.state,s=a.width,u=a.height,a=a.renderPoses,n=n?_("area","pass"):_("area");if(o)return[e.createElement("div",{key:"area",ref:v(t,"areaElement"),className:n}),_o(e)];if(!r||!i)return[];o=_e([0,0],[s,0],[0,u],[s,u],a[0],a[1],a[2],a[3]),r=o.length?Mr(o,!0):"none";return[e.createElement("div",{key:"area",ref:v(t,"areaElement"),className:n,style:{top:"0px",left:"0px",width:"".concat(s,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:r}}),_o(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var e=t.areaElement,n=t.state,t=n.moveableClientRect,o=n.renderPoses,a=n.rootMatrix,s=n.is3d,u=t.left,t=t.top,o=Rr(o),c=o.left,l=o.top,f=o.width,o=o.height,a=Zr(a,[r-u,i-t],s?4:3),r=a[0],u=a[1],i=[{left:c,top:l,width:f,height:(u-=l)-10},{left:c,top:l,width:(r-=c)-10,height:o},{left:c,top:l+u+10,width:f,height:o-u-10},{left:c+r+10,top:l,width:f-r-10,height:o}],p=[].slice.call(e.nextElementSibling.children);i.forEach(function(t,e){p[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")}),Rt(e,Go),n.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,e=e.inputEvent;if(this.enableNativeEvent(t),!e)return!1;n.isDragArea||(n.isDragArea=!0,To(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,e=e.datas;if(!n)return!1;e.isDragArea||To(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){To(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&mt(function(){e.disableNativeEvent=!1})}},Io=zn("origin",{render:function(t,e){var n=t.props.zoom,t=t.state,r=t.beforeOrigin,t=t.rotation;return[e.createElement("div",{className:_("control","origin"),style:Gr(t,n,r),key:"beforeOrigin"})]}});function ko(t){t=t.scrollContainer;return[t.scrollLeft,t.scrollTop]}var Fo={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(n,r){var t=n.props.scrollContainer,t=void 0===t?n.getContainer():t,e=new un,t=ri(t,!0),i=(r.datas.dragScroll=e,r.isControl?"controlGesto":"targetGesto"),o=r.targets;e.on("scroll",function(t){var e=t.container,t=t.direction,e=tt(n,r,{scrollContainer:e,direction:t}),t=o?"onScrollGroup":"onScroll";o&&(e.targets=o),et(n,t,e)}).on("move",function(t){var e=t.offsetX,t=t.offsetY;n[i].scrollBy(e,t,r.inputEvent,!1)}),e.dragStart(r,{container:t})},checkScroll:function(t,e){var n,r,i,o=e.datas.dragScroll;if(o)return r=t.props,n=r.scrollContainer,t=void 0===n?t.getContainer():n,n=r.scrollThreshold,r=r.getScrollPosition,i=void 0===r?ko:r,o.drag(e,{container:t,threshold:void 0===n?0:n,getScrollPosition:function(t){return i({scrollContainer:t.container,direction:t.direction})}}),!0},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,W(W({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,W(W({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,W(W({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,W(W({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,W(W({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,W(W({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,W(W({},e),{targets:t.props.targets}))}},No={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function},events:{}},Wo=zn("padding",{render:function(t,r){var e=t.props;if(e.dragArea)return[];var e=e.padding||{},n=e.left,i=e.top,i=void 0===i?0:i,o=e.right,o=void 0===o?0:o,e=e.bottom,e=void 0===e?0:e,t=t.state,a=t.renderPoses,s=[t.pos1,t.pos2,t.pos3,t.pos4],t=[];return 0<(void 0===n?0:n)&&t.push([0,2]),0<i&&t.push([0,1]),0<o&&t.push([1,3]),0<e&&t.push([2,3]),t.map(function(t,e){var n=t[0],t=t[1],n=_e([0,0],[100,0],[0,100],[100,100],s[n],s[t],a[n],a[t]);if(n.length)return r.createElement("div",{key:"padding".concat(e),className:_("padding"),style:{transform:Mr(n,!0)}})})}}),jo=["nw","ne","se","sw"];function Yo(t,e){var n=t[0]+t[1],n=e<n?e/n:1;return t[0]*=n,t[1]=e-t[1]*n,t}var qo=[1,2,5,6],Xo=[0,3,4,7],Ho=[1,-1,-1,1],Lo=[1,1,-1,-1];function Vo(t,i,o,a,s,u,c,l,f){void 0===u&&(u=0),void 0===c&&(c=0),void 0===l&&(l=a),void 0===f&&(f=s);var p=[],d=!1,t=t.map(function(t,e){var n,e=i[e],r=e.horizontal,e=e.vertical;return e&&!d&&(d=!0,p.push("/")),d?(n=Math.max(0,1===e?t[1]-c:f-t[1]),p.push(Qr(n,s,o))):(n=Math.max(0,1===r?t[0]-u:l-t[0]),p.push(Qr(n,a,o))),n});return{styles:p,raws:t}}function Uo(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function $o(t,r,i,o,a,e){void 0===e&&(e=[0,0]);var n=t.indexOf("/"),n=(-1<n?t.slice(0,n):t).length,s=t.slice(0,n),t=t.slice(n+1),n=s[0],n=void 0===n?"0px":n,u=s[1],u=void 0===u?n:u,c=s[2],c=void 0===c?n:c,l=s[3],l=void 0===l?u:l,f=t[0],f=void 0===f?n:f,p=t[1],p=void 0===p?f:p,d=t[2],d=void 0===d?f:d,h=t[3],h=void 0===h?p:h,g=[n,u,c,l].map(function(t){return Z(t,r)}),v=[f,p,d,h].map(function(t){return Z(t,i)}),n=g.slice(),u=v.slice(),c=Yo([n[0],n[1]],r),d=(n[0]=c[0],n[1]=c[1],l=Yo([n[3],n[2]],r),n[3]=l[0],n[2]=l[1],f=Yo([u[0],u[3]],i),u[0]=f[0],u[3]=f[1],p=Yo([u[1],u[2]],i),u[1]=p[0],u[2]=p[1],n.slice(0,Math.max(e[0],s.length))),h=u.slice(0,Math.max(e[1],t.length));return Q(Q([],d.map(function(t,e){var n=jo[e];return{horizontal:Ho[e],vertical:0,pos:[o+t,a+(-1===Lo[e]?i:0)],sub:!0,raw:g[e],direction:n}}),!0),h.map(function(t,e){var n=jo[e];return{horizontal:0,vertical:Lo[e],pos:[o+(-1===Ho[e]?r:0),a+t],sub:!0,raw:v[e],direction:n}}),!0)}function Zo(t,e,n,r,i){void 0===i&&(i=e.length);var o=Uo(t.slice(r)),a=o.horizontalRange,o=o.verticalRange,r=n-r,s=0;if(0==r)s=i;else if(0<r&&r<a[1])s=a[1]-r;else{if(!(r>=o[0]))return;s=o[0]+o[1]-r}t.splice(n,s),e.splice(n,s)}function Ko(t,e,n,r,i,o,a,s,u,c,l){void 0===c&&(c=0),void 0===l&&(l=0);var f=Uo(t.slice(n)),p=f.horizontalRange,f=f.verticalRange;if(-1<r)for(var d=1===Ho[r]?o-c:s-o,h=p[1];h<=r;++h){var g=1===Lo[h]?l:u,v=0;if(r===h?v=o:0===h?v=c+d:-1===Ho[h]&&(v=s-(e[n][0]-c)),t.splice(n+h,0,{horizontal:Ho[h],vertical:0,pos:[v,g]}),e.splice(n+h,0,[v,g]),0===h)break}else if(-1<i)for(var m=1===Lo[i]?a-l:u-a,b=(0===p[1]&&0===f[1]&&(t.push({horizontal:Ho[0],vertical:0,pos:p=[c+m,l]}),e.push(p)),f[0]),h=f[1];h<=i;++h){v=1===Ho[h]?c:s,g=0;if(i===h?g=a:0===h?g=l+m:1===Lo[h]?g=e[n+b][1]:-1===Lo[h]&&(g=u-(e[n+b][1]-l)),t.push({horizontal:0,vertical:Lo[h],pos:[v,g]}),e.push([v,g]),0===h)break}}function Jo(t,n){return void 0===n&&(n=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,e){return t.horizontal?n[e]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,e){return t.vertical?n[e]:null}).filter(function(t){return null!=t})}}var Qo=[[0,-1,"n"],[1,0,"e"]],ta=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function ea(t,e,n){var r=t.props.clipRelative,t=t.state,i=t.width,o=t.height,t=e.type,e=e.poses,a="rect"===t,s="circle"===t;if("polygon"===t)return n.map(function(t){return"".concat(Qr(t[0],i,r)," ").concat(Qr(t[1],o,r))});if(a||"inset"===t){var u=n[1][1],c=n[3][0],l=n[7][0],f=n[5][1];if(a)return[u,c,f,l].map(function(t){return"".concat(t,"px")});var p,d=[u,i-c,o-f,l].map(function(t,e){return Qr(t,e%2?i:o,r)});return 8<n.length&&(p=(a=T(n[4],n[0]))[0],a=a[1],d.push.apply(d,Q(["round"],Vo(n.slice(8),e.slice(8),r,p,a,l,u,c,f).styles,!1))),d}return s||"ellipse"===t?(e=n[0],p=Qr(Math.abs(n[1][1]-e[1]),s?Math.sqrt((i*i+o*o)/2):o,r),(d=s?[p]:[Qr(Math.abs(n[2][0]-e[0]),i,r),p]).push("at",Qr(e[0],i,r),Qr(e[1],o,r)),d):void 0}function na(t,e,n,r){var o=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return ta.map(function(t){var e=t[0],n=t[1],t=t[2],r=o[e+1],i=a[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:t,pos:[r,i]}})}function ra(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(t){t=t.pos;e[0]=Math.min(e[0],t[0]),e[1]=Math.max(e[1],t[0]),n[0]=Math.min(n[0],t[1]),n[1]=Math.max(n[1],t[1])}),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function ia(t,n,r,e,i){var o,a,s,u,c,l,f,p,d,h,g,v,m,b,x,E;if((i=i?i:"none"!==(o=(t=Lr(t)).clipPath)?o:t.clip)&&"none"!==i&&"auto"!==i||(i=e))return o=ft(i),t=o.prefix,e=void 0===t?i:t,t=o.value,o=void 0===t?"":t,t="circle"===e,a=" ","polygon"===e?(a=",",{type:e,clipText:i,poses:E=(h=lt(o||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var t=t.split(" "),e=t[0],t=t[1];return{vertical:1,horizontal:1,pos:[Z(e,n),Z(t,r)]}}),splitter:a}):t||"ellipse"===e?(f=d="",u=s=0,h=S(o),u=t?(p=h[0],d=void 0===(l=h[2])?"50%":l,f=void 0===(l=h[3])?"50%":l,s=Z(void 0===p?"50%":p,Math.sqrt((n*n+r*r)/2))):(l="",p=h[0],l=void 0===(g=h[1])?"50%":g,d=void 0===(g=h[3])?"50%":g,f=void 0===(g=h[4])?"50%":g,s=Z(void 0===p?"50%":p,n),Z(l,r)),E=Q([{vertical:1,horizontal:1,pos:c=[Z(d,n),Z(f,r)],direction:"nesw"}],Qo.slice(0,t?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[c[0]+t[0]*s,c[1]+t[1]*u]}}),!0),{type:e,clipText:i,radiusX:s,radiusY:u,left:c[0]-s,top:c[1]-u,poses:E,splitter:a}):"inset"===e?(p=(-1<(g=(h=S(o||"0 0 0 0")).indexOf("round"))?h.slice(0,g):h).length,l=h.slice(p+1),f=(d=h.slice(0,p))[0],g=void 0===(t=d[1])?f:t,p=d[2],d=void 0===(t=d[3])?g:t,v=(t=[f,void 0===p?f:p].map(function(t){return Z(t,r)}))[0],b=t[1],x=(f=[d,g].map(function(t){return Z(t,n)}))[0],m=f[1],d=$o(l,(p=n-m)-x,(t=r-b)-v,x,v),{type:"inset",clipText:i,poses:E=Q(Q([],na(v,p,t,x),!0),d,!0),top:v,left:x,right:p,bottom:t,radius:l,splitter:a}):"rect"===e?(a=",",{type:"rect",clipText:i,poses:E=na(v=(g=(h=lt(o||"0px, ".concat(n,"px, ").concat(r,"px, 0px"))).map(function(t){return pt(t).value}))[0],m=g[1],b=g[2],x=g[3]),top:v,right:m,bottom:b,left:x,values:h,splitter:a}):void 0}var oa={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,o){var e=t.props,n=e.customClipPath,r=e.defaultClipPath,i=e.clipArea,a=e.zoom,e=t.state,t=e.target,s=e.width,u=e.height,c=e.allMatrix,l=e.is3d,f=e.left,p=e.top,d=e.pos1,h=e.pos2,g=e.pos3,v=e.pos4,m=e.clipPathState,b=e.snapBoundInfos,x=e.rotation;if(!t)return[];e=ia(t,s,u,r||"inset",m||n);if(!e)return[];var E,S,y,M=l?4:3,t=e.type,r=e.poses.map(function(t){t=q(c,t.pos,M);return[t[0]-f,t[1]-p]}),m=[],D=[],n="rect"===t,l="inset"===t,C="polygon"===t;if((n||l||C)&&(E=l?r.slice(0,8):r,D=E.map(function(t,e){var n=0===e?E[E.length-1]:E[e-1],r=F(n,t),t=Pr(n,t);return o.createElement("div",{key:"clipLine".concat(e),className:_("line","clip-line","snap-control"),"data-clip-index":e,style:{width:"".concat(t,"px"),transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(r,"rad) scaleY(").concat(a,")")}})})),m=r.map(function(t,e){return o.createElement("div",{key:"clipControl".concat(e),className:_("control","clip-control","snap-control"),"data-clip-index":e,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(x,"rad) scale(").concat(a,")")}})}),l&&m.push.apply(m,r.slice(8).map(function(t,e){return o.createElement("div",{key:"clipRadiusControl".concat(e),className:_("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+e,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(x,"rad) scale(").concat(a,")")}})})),"circle"===t||"ellipse"===t){var t=e.left,R=e.top,w=e.radiusX,O=e.radiusY,e=T(q(c,[t,R],M),q(c,[0,0],M)),t=e[0],R=e[1],e="none";if(!i){for(var z=Math.max(10,w/5,O/5),P=[],B=0;B<=z;++B){var G=2*Math.PI/z*B;P.push([w+(w-a)*Math.cos(G),O+(O-a)*Math.sin(G)])}P.push([w,-2]),P.push([-2,-2]),P.push([-2,2*O+2]),P.push([2*w+2,2*O+2]),P.push([2*w+2,-2]),P.push([w,-2]),e="polygon(".concat(P.map(function(t){return"".concat(t[0],"px ").concat(t[1],"px")}).join(", "),")")}m.push(o.createElement("div",{key:"clipEllipse",className:_("clip-ellipse","snap-control"),style:{width:"".concat(2*w,"px"),height:"".concat(2*O,"px"),clipPath:e,transform:"translate(".concat(-f+t,"px, ").concat(-p+R,"px) ").concat(Mr(c))}}))}return i&&(t=(e=Rr(Q([d,h,g,v],r,!0))).width,R=e.height,S=e.left,y=e.top,(C||n||l)&&(P=l?r.slice(0,8):r,m.push(o.createElement("div",{key:"clipArea",className:_("clip-area","snap-control"),style:{width:"".concat(t,"px"),height:"".concat(R,"px"),transform:"translate(".concat(S,"px, ").concat(y,"px)"),clipPath:"polygon(".concat(P.map(function(t){return"".concat(t[0]-S,"px ").concat(t[1]-y,"px")}).join(", "),")")}})))),b&&["vertical","horizontal"].forEach(function(r){var t=b[r],i="horizontal"===r;t.isSnap&&D.push.apply(D,t.snap.posInfos.map(function(t,e){var t=t.pos,n=T(q(c,i?[0,t]:[t,0],M),[f,p]),t=T(q(c,i?[s,t]:[t,u],M),[f,p]);return ho(o,"",n,t,a,"clip".concat(r,"snap").concat(e),"guideline")})),t.isBound&&D.push.apply(D,t.bounds.map(function(t,e){var t=t.pos,n=T(q(c,i?[0,t]:[t,0],M),[f,p]),t=T(q(c,i?[s,t]:[t,u],M),[f,p]);return ho(o,"",n,t,a,"clip".concat(r,"bounds").concat(e),"guideline","bounds","bold")}))}),Q(Q([],m,!0),D,!0)},dragControlCondition:function(t,e){return e.inputEvent&&-1<(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,e){var n=t.props.dragWithClip;return void 0!==n&&!n&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,W(W({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,r=r.customClipPath,o=n.target,a=n.width,s=n.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",l=e.datas,o=ia(o,a,s,i||"inset",r);if(!o)return!1;a=o.clipText;return!1===et(t,"onClipStart",tt(t,e,{clipType:o.type,clipStyle:a,poses:o.poses.map(function(t){return t.pos})}))?l.isClipStart=!1:(l.isControl=c&&-1<c.indexOf("clip-control"),l.isLine=-1<c.indexOf("clip-line"),l.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),l.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,l.clipPath=o,l.isClipStart=!0,n.clipPathState=a,Un(t,e),!0)},dragControl:function(t,e){var n=e.datas,r=e.originalDatas,I=e.isDragTarget;if(!n.isClipStart)return!1;var i=n.isControl,o=n.isLine,a=n.isArea,s=n.clipIndex,n=n.clipPath;if(!n)return!1;var u,c,k,F,N,l,f,p,W,d,h,g,v,j,Y,q=Tr(t.props,"clippable"),m=q.keepRatio,b=0,x=0,r=r.draggable,X=Qn(e),x=I&&r?(H=r.prevBeforeDist,b=H[0],H[1]):(b=X[0],X[1]),H=[b,x],E=t.state,L=E.width,V=E.height,a=!a&&!i&&!o,o=n.type,S=n.poses,U=n.splitter,y=S.map(function(t){return t.pos}),a=(a&&(b=-b,x=-x),!i||"nesw"===S[s].direction),$="inset"===o||"rect"===o,M=S.map(function(){return[0,0]}),D=(i&&!a?(f=(R=S[s]).horizontal,R=R.vertical,f=[b*Math.abs(f),x*Math.abs(R)],c=f,R=$,f=m,z=(P=(u=S)[G=s]).direction,P=P.sub,l=u.map(function(){return[0,0]}),B=z?z.split(""):[],R&&G<8?(R=B.filter(function(t){return"w"===t||"e"===t}),w=B.filter(function(t){return"n"===t||"s"===t}),k=R[0],F=w[0],l[G]=c,w=(R=ra(u))[0],R=R[1],(D=w&&R?w/R:0)&&f?(f=u[(G+4)%8].pos,C=[0,0],-1<z.indexOf("w")?C[0]=-1:-1<z.indexOf("e")&&(C[0]=1),-1<z.indexOf("n")?C[1]=-1:-1<z.indexOf("s")&&(C[1]=1),D=w+(w=ai([w,R],c,D,C,!0))[0],R=R+w[1],w=f[1],p=f[1],O=f[0],f=f[0],-1===C[0]?O=f-D:1===C[0]?f=O+D:(O-=D/2,f+=D/2),-1===C[1]?w=p-R:p=1===C[1]?w+R:(w=p-R/2)+R,N=na(w,f,p,O),u.forEach(function(t,e){l[e][0]=N[e].pos[0]-t.pos[0],l[e][1]=N[e].pos[1]-t.pos[1]})):(u.forEach(function(t,e){t=t.direction;t&&(-1<t.indexOf(k)&&(l[e][0]=c[0]),-1<t.indexOf(F)&&(l[e][1]=c[1]))}),k&&(l[1][0]=c[0]/2,l[5][0]=c[0]/2),F&&(l[3][1]=c[1]/2,l[7][1]=c[1]/2))):z&&!P?B.forEach(function(i){var o="n"===i||"s"===i;u.forEach(function(t,e){var n=t.direction,r=t.horizontal,t=t.vertical;n&&-1!==n.indexOf(i)&&(l[e]=[o||!r?0:c[0],o&&t?c[1]:0])})}):l[G]=c,M=l):a&&(M=y.map(function(){return[b,x]})),y.map(function(t,e){return J(t,M[e])})),C=Q([],D,!0),R=(E.snapBoundInfos=null,"circle"===n.type),w="ellipse"===n.type,O=((R||w)&&(d=Rr(D),f=Math.abs(d.bottom-d.top),p=Math.abs(w?d.right-d.left:f),h=D[0][1]+f,g=D[0][0]-p,v=D[0][0]+p,R&&(C.push([v,d.bottom]),M.push([1,0])),C.push([d.left,h]),M.push([0,1]),C.push([g,d.bottom]),M.push([1,0])),xi((q.clipHorizontalGuidelines||[]).map(function(t){return Z("".concat(t),V)}),(q.clipVerticalGuidelines||[]).map(function(t){return Z("".concat(t),L)}),L,V)),z=[],P=[],B=(P=R||w?(z=[C[4][0],C[2][0]],[C[1][1],C[3][1]]):$?(Y=[C[0],C[2],C[4],C[6]],W=[M[0],M[2],M[4],M[6]],z=Y.filter(function(t,e){return W[e][0]}).map(function(t){return t[0]}),Y.filter(function(t,e){return W[e][1]}).map(function(t){return t[1]})):(z=C.filter(function(t,e){return M[e][0]}).map(function(t){return t[0]}),C.filter(function(t,e){return M[e][1]}).map(function(t){return t[1]})),[0,0]),G=to(O,q.clipTargetBounds&&{left:0,top:0,right:L,bottom:V},z,P,5),a=G.horizontal,y=G.vertical,T=a.offset,_=y.offset,a=(a.isBound&&(B[1]+=T),y.isBound&&(B[0]+=_),(w||R)&&0===M[0][0]&&0===M[0][1]?(A=(d=Rr(D)).bottom-d.top,d=w?d.right-d.left:A,d-=y.isBound?Math.abs(_):0===y.snapIndex?-_:_,A-=a.isBound?Math.abs(T):0===a.snapIndex?-T:T,R&&(d=A=0<Oi(y,a)?A:d),y=C[0],C[1][1]=y[1]-A,C[2][0]=y[0]+d,C[3][1]=y[1]+A,C[4][0]=y[0]-d):$&&m&&i?(A=(a=ra(S))[0],y=a[1],d=A&&y?A/y:0,m=S[s].direction||"",i=C[1][1],h=C[5][1],g=C[7][0],v=C[3][0],T<=_?T=_/d:_=T*d,-1<m.indexOf("w")?g-=_:-1<m.indexOf("e")?v-=_:(g+=_/2,v-=_/2),-1<m.indexOf("n")?i-=T:-1<m.indexOf("s")?h-=T:(i+=T/2,h-=T/2),j=na(i,v,h,g),C.forEach(function(t,e){e=j[e].pos;t[0]=e[0],t[1]=e[1]})):C.forEach(function(t,e){e=M[e];e[0]&&(t[0]-=_),e[1]&&(t[1]-=T)}),ea(t,n,D)),A="".concat(o,"(").concat(a.join(U),")");return E.clipPathState=A,P=R||w?(z=[C[4][0],C[2][0]],[C[1][1],C[3][1]]):$?(z=(Y=[C[0],C[2],C[4],C[6]]).map(function(t){return t[0]}),Y.map(function(t){return t[1]})):(z=C.map(function(t){return t[0]}),C.map(function(t){return t[1]})),E.snapBoundInfos=to(O,q.clipTargetBounds&&{left:0,top:0,right:L,bottom:V},z,P,1),r&&(y=E.is3d,S=E.allMatrix,s=B,I&&(s=[H[0]+B[0]-X[0],H[1]+B[1]-X[1]]),r.deltaOffset=K(S,[s[0],s[1],0,0],y?4:3)),et(t,"onClip",tt(t,e,{clipEventType:"changed",clipType:o,poses:D,clipStyle:A,clipStyles:a,distX:b,distY:x})),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,a=r.isClipStart,r=r.isControl;return!!a&&(et(t,"onClipEnd",Xr(t,e,{})),i&&(r?function(t,e){var n=(r=e.datas).clipPath,r=r.clipIndex,i=n.type,o=n.poses,a=n.splitter,s=o.map(function(t){return t.pos}),u=s.length;if("polygon"===i)o.splice(r,1),s.splice(r,1);else{if("inset"!==i)return;if(r<8)return;if(Zo(o,s,r,8,u),u===o.length)return}r=ea(t,n,s),et(t,"onClip",tt(t,e,{clipEventType:"removed",clipType:i,poses:s,clipStyles:r,clipStyle:"".concat(i,"(").concat(r.join(a),")"),distX:0,distY:0}))}(t,e):o&&function(t,e){var n=(r=Vn(t,e))[0],r=r[1],i=(o=e.datas).clipPath,o=o.clipIndex,a=i.type,s=i.poses,u=i.splitter,c=s.map(function(t){return t.pos});if("polygon"===a)c.splice(o,0,[n,r]);else{if("inset"!==a)return;var l=qo.indexOf(o),o=Xo.indexOf(o),f=s.length;if(Ko(s,c,8,l,o,n,r,c[4][0],c[4][1],c[0][0],c[0][1]),f===s.length)return}l=ea(t,i,c),et(t,"onClip",tt(t,e,{clipEventType:"added",clipType:a,poses:c,clipStyles:l,clipStyle:"".concat(a,"(").concat(l.join(u),")"),distX:0,distY:0}))}(t,e)),i||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},aa={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:P(e.inputEvent.target,_("origin"))},dragControlStart:function(t,e){var n=e.datas,e=(Un(t,e),tt(t,e,{dragStart:Do.dragStart(t,(new Ln).dragStart([0,0],e))})),r=et(t,"onDragOriginStart",e);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],!(n.isDragOrigin=!0)===r?n.isDragOrigin=!1:e},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o=Qn(e),a=o[0],o=o[1],s=t.state,u=s.width,c=s.height,l=s.offsetMatrix,f=s.targetMatrix,s=s.is3d,p=t.props.originRelative,p=void 0===p||p,s=s?4:3,a=[a,o],i=(!i||((o=e.distOrigin)[0]||o[1])&&(a=o),J(n.startOrigin,a)),o=J(n.startTargetOrigin,a),d=T(a,n.prevOrigin),l=er(l,f,i,s),f=t.getRect(),l=Rr(Cr(l,u,c,s)),s=[f.left-l.left,f.top-l.top],f=tt(t,e,{width:u,height:c,origin:i,dist:n.prevOrigin=a,delta:d,transformOrigin:[Qr(o[0],u,p),Qr(o[1],c,p)].join(" "),drag:Do.drag(t,Hn(e,t.state,s,!!r,!1))});return et(t,"onDragOrigin",f),f},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(et(t,"onDragOriginEnd",Xr(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){e=this.dragControl(t,e);return!!e&&(t.transformOrigin=e.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function sa(t,e,n,r,i){void 0===r&&(r=[0,0]);return $o(!(t=i||(t=Lr(t))&&t.borderRadius||"")||!i&&"0px"===t?[]:S(t),e,n,0,0,r)}function ua(t,e,n,r,i,o){var a=t.state,s=a.width,u=a.height,o=Vo(o,i,t.props.roundRelative,s,u),c=o.raws,o=o.styles,i=Jo(i,c),c=i.horizontals,i=i.verticals,o=o.join(" ");et(t,"onRound",tt(t,e,{horizontals:c,verticals:i,borderRadius:a.borderRadiusState=o,width:s,height:u,delta:r,dist:n}))}var ca={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,r){var e=t.state,n=e.target,i=e.width,o=e.height,a=e.allMatrix,s=e.is3d,u=e.left,c=e.top,e=e.borderRadiusState,t=t.props,l=t.minRoundControls,f=t.maxRoundControls,p=void 0===f?[4,4]:f,d=t.zoom;if(!n)return null;var h=s?4:3,f=sa(n,i,o,void 0===l?[0,0]:l,e);if(!f)return null;var g=0,v=0;return f.map(function(t,e){v+=Math.abs(t.horizontal),g+=Math.abs(t.vertical);var n=T(q(a,t.pos,h),[u,c]),t=t.vertical?g<=p[1]:v<=p[0];return r.createElement("div",{key:"borderRadiusControl".concat(e),className:_("control","border-radius"),"data-radius-index":e,style:{display:t?"block":"none",transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) scale(").concat(d,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;e=e.inputEvent.target.getAttribute("class")||"";return-1<e.indexOf("border-radius")||-1<e.indexOf("moveable-line")&&-1<e.indexOf("moveable-direction")},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,n=n.target,i=n.getAttribute("class")||"",o=-1<i.indexOf("border-radius"),i=-1<i.indexOf("moveable-line")&&-1<i.indexOf("moveable-direction"),a=o?parseInt(n.getAttribute("data-radius-index"),10):-1,n=i?parseInt(n.getAttribute("data-line-index"),10):-1;if(!o&&!i)return!1;if(!1===et(t,"onRoundStart",tt(t,e,{})))return!1;r.lineIndex=n,r.controlIndex=a,r.isControl=o,r.isLine=i,Un(t,e);n=t.props,a=n.roundRelative,o=n.minRoundControls,i=void 0===o?[0,0]:o,e=t.state,n=e.target,o=e.width,t=e.height,r.isRound=!0,r.prevDist=[0,0],n=sa(n,o,t,i)||[];return r.controlPoses=n,e.borderRadiusState=Vo(n.map(function(t){return t.pos}),n,a,o,t).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas;if(!n.isRound||!n.isControl||!n.controlPoses.length)return!1;var r=n.controlIndex,i=n.controlPoses,o=Qn(e),a=o[0],o=o[1],s=[a,o],u=T(s,n.prevDist),c=t.props.maxRoundControls,l=void 0===c?[4,4]:c,c=t.state,f=c.width,p=c.height,c=i[r],d=c.vertical,h=c.horizontal,g=i.map(function(t){var e=t.horizontal,t=t.vertical,n=[e*h*s[0],t*d*s[1]];if(e){if(1===l[0])return n;if(l[0]<4&&e!==h)return n}else{if(0===l[1])return n[1]=t*h*s[0]/f*p,n;if(d){if(1===l[1])return n;if(l[1]<4&&t!==d)return n}}return[0,0]}),c=(g[r]=s,i.map(function(t,e){return J(t.pos,g[e])}));return n.prevDist=[a,o],ua(t,e,s,u,i,c),!0},dragControlEnd:function(t,e){var n=t.state,r=(n.borderRadiusState="",e.datas),i=e.isDouble;if(!r.isRound)return!1;var o,a,s,u=n.width,c=n.height,l=r.isControl,f=r.controlIndex,p=r.isLine,d=r.lineIndex,r=r.controlPoses,h=r.map(function(t){return t.pos}),g=h.length,v=t.props.roundClickable;return i&&(void 0===v||v)&&(l?Zo(r,h,f,0):p&&(v=(i=Vn(t,e))[0],l=i[1],f=h,p=d,i=v,d=l,v=u,l=c,o=(c=Jo(u=r)).horizontals,c=c.verticals,o=o.length,c=c.length,s=a=-1,0===p?0===o?a=0:1===o&&(a=1):3===p&&(o<=2?a=2:o<=3&&(a=3)),2===p?0===c?s=0:c<4&&(s=3):1===p&&(c<=1?s=1:c<=2&&(s=2)),Ko(u,f,0,a,s,i,d,v,l)),g!==r.length&&ua(t,e,[0,0],[0,0],r,h)),et(t,"onRoundEnd",Xr(t,e,{})),!(n.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}};var la={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var t=t.state,n=t.is3d,r=t.target,t=t.targetMatrix,r=null==r?void 0:r.style.transform,t=n?"matrix3d(".concat(t.join(","),")"):"matrix(".concat(Me(t,!0),")"),r=r&&"none"!==r?r:t;e.datas.startTransforms=(t=r,n=k((e=n)?4:3),t==="matrix".concat(e?"3d":"","(").concat(n.join(","),")")||"matrix(1,0,0,1,0,0)"===t?[]:S(r))},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return tt(t,e,{setTransform:function(t){e.datas.startTransforms=$(t)?t:S(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return tt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),et(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetTransform(e),et(t,"onBeforeRender",tt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){et(t,"onBeforeRenderEnd",tt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this,r=(this.dragStart(t,e),ci(t,"beforeRenderable",e)),i=t.moveables,r=r.map(function(t,e){e=i[e];return n.setTransform(e,t),n.fillDragStartParams(e,t)});et(t,"onBeforeRenderGroupStart",tt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:r}))},dragGroup:function(t,e){var n=this,r=(this.drag(t,e),ci(t,"beforeRenderable",e)),i=t.moveables,r=r.map(function(t,e){e=i[e];return n.resetTransform(t),n.fillDragParams(e,t)});et(t,"onBeforeRenderGroup",tt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:r}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),et(t,"onBeforeRenderGroupEnd",tt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},fa={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){et(t,"onRenderStart",tt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){et(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){et(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){et(t,"onRenderGroupStart",tt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=ci(t,"beforeRenderable",e),i=t.moveables,r=r.map(function(t,e){e=i[e];return n.fillDragParams(e,t)});et(t,"onRenderGroup",tt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,transform:sr(e),events:r}))},dragGroupEnd:function(t,e){var n=this,r=ci(t,"beforeRenderable",e),i=t.moveables,r=r.map(function(t,e){e=i[e];return n.fillDragEndParams(e,t)});et(t,"onRenderGroupEnd",tt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:r}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return tt(t,e,{isPinch:!!e.isPinch,transform:sr(e)})},fillDragEndParams:function(t,e){return tt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag})}};function pa(n,t,e,r,i,o,a){var s="Start"===i,u=n.state.target,c=o.isRequest;if(!u||s&&-1<r.indexOf("Control")&&!c&&n.areaElement===o.inputEvent.target)return!1;var l,f="".concat(e).concat(r).concat(i),p="".concat(e).concat(r,"Condition"),d="End"===i,u="After"===i,h=!(!s||n.targetGesto&&n.controlGesto&&n.targetGesto.isFlag()&&n.controlGesto.isFlag()),g=(h&&n.updateRect(i,!0,!1),""!==i||c||Kr(n.state,o),Q([],n[t],!0));if(c&&(l=o.requestAble,g.some(function(t){return t.name===l})||g.push.apply(g,n.props.ables.filter(function(t){return t.name===l}))),!g.length)return!1;var v,g=Q(Q([la],g,!0),[fa],!1).filter(function(t){return t[f]}),m=o.datas,b=(h&&g.forEach(function(t){t.unset&&t.unset(n)}),o.inputEvent),x=(d&&b&&(v=document.elementFromPoint(o.clientX,o.clientY)||b.target),0),b=g.filter(function(t){var e=t.name,e=m[e]||(m[e]={});return s&&(e.isEventStart=!t[p]||t[p](n,o)),!!e.isEventStart&&(t=t[f](n,W(W({},o),{resultCount:x,datas:e,originalDatas:m,inputTarget:v})),n._emitter.off(),s&&!1===t&&(e.isEventStart=!1),x+=t?1:0,t)}).length,E=!1;return s&&g.length&&!b&&(E=0===g.filter(function(t){var e=t.name,e=m[e];return!!e.isEventStart&&("strong"!==t.dragRelation||(e.isEventStart=!1))}).length),(d||E)&&(n.state.gestos={},n.moveables&&n.moveables.forEach(function(t){t.state.gestos={}})),h&&E&&g.forEach(function(t){t.unset&&t.unset(n)}),s&&!c&&b&&null!=o&&o.preventDefault(),!n.isUnmounted&&!E&&((!s&&b&&!a||d)&&(n.props.flushSync||dr)(function(){n.updateRect(d?i:"",!0,!1),n.forceUpdate()}),s||d||u||!b||a||pa(n,t,e,r,i+"After",o),!0)}function da(e,t,n){function r(t){return(t=t.inputEvent.target)===e.areaElement||!e.isMoveableElement(t)&&!e.controlBox.getElement().contains(t)||P(t,"moveable-area")||P(t,"moveable-padding")}var i=e.controlBox.getElement(),o=[];o.push(i),e.props.dragArea&&!e.props.dragTarget||o.push(t);return ha(e,o,"targetAbles",n,{dragStart:r,pinchStart:r})}function ha(i,t,o,a,s){void 0===s&&(s={});var e=i.props,n=e.pinchOutside,e=e.pinchThreshold,e={preventDefault:!1,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:e,pinchOutside:n},u=new bn(t,e),c="Control"===a;return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(n){u.on("".concat(r).concat(n),function(t){var e=t.eventType;(!s[e]||s[e](t))&&pa(i,o,r,a,n,t)?"Start"===n&&c&&null!=(e=null==t?void 0:t.inputEvent)&&e.stopPropagation():t.stop()})})}),u}var ga=function(){function t(t,e,n){var i=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(e){var n=i.eventName,r=i.moveable;r.state.disableNativeEvent||i.ables.forEach(function(t){t[n](r,{inputEvent:e})})},t.addEventListener(n.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function va(t,e,n,r){void 0===n&&(n=e);var e=yr(t,e),i=e.matrixes,o=e.is3d,a=e.targetMatrix,s=e.transformOrigin,u=e.targetOrigin,c=e.offsetContainer,e=e.hasFixed,l=yr(c,n,!0),f=l.matrixes,p=l.is3d,l=l.offsetContainer,r=r||p||o,d=r?4:3,t="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,h=k(d),g=k(d),v=k(d),m=k(d),b=i.length,p=(f.reverse(),i.reverse(),!o&&r&&(a=I(a,3,4),Sr(i)),!p&&r&&Sr(f),f.forEach(function(t){g=K(g,t.matrix,d)}),n||document.body),x=(null==(n=f[0])?void 0:n.target)||br(p,p,!0).offsetParent,E=f.slice(1).reduce(function(t,e){return K(t,e.matrix,d)},k(d)),n=(i.forEach(function(t,e){b-2===e&&(v=h.slice()),b-1===e&&(m=h.slice()),t.matrix||(e=function(t,e,n,r,i){var o=t.target,t=t.origin,a=e.matrix,s=(e=_r(o)).offsetWidth,u=e.offsetHeight,e=n.getBoundingClientRect(),c=[0,0];n===document.body&&(c=Er(o,!0));for(var l=(o=o.getBoundingClientRect()).left-e.left+n.scrollLeft-(n.clientLeft||0)+c[0],f=o.top-e.top+n.scrollTop-(n.clientTop||0)+c[1],e=o.width,n=o.height,c=Se(r,i,a),p=(o=wr(c,s,u,r)).left,d=o.top,h=o.width,o=o.height,g=q(c,t,r),c=T(g,[p,d]),v=[l+c[0]*e/h,f+c[1]*n/o],m=[0,0],b=0;++b<10;){var x=y(i,r),x=T(q(x,v,r),q(x,g,r));m[0]=x[0],m[1]=x[1];var x=wr(Se(r,i,Te(m,r),a),s,u,r),E=x.left-l,x=x.top-f;if(Math.abs(E)<2&&Math.abs(x)<2)break;v[0]-=E,v[1]-=x}return m.map(function(t){return Math.round(t)})}(t,i[e+1],x,d,K(E,h,d)),t.matrix=Te(e,d)),h=K(h,t.matrix,d)}),!t&&o),a=a||k(n?4:3),p=Mr(t&&16===a.length?I(a,4,3):a,n);return{hasFixed:e,rootMatrix:g=me(g,d,d),beforeMatrix:v,offsetMatrix:m,allMatrix:h,targetMatrix:a,targetTransform:p,transformOrigin:s,targetOrigin:u,is3d:r,offsetContainer:c,offsetRootContainer:l}}function ma(t,e,n,r){void 0===n&&(n=e);var i=0,o=0,a=0,s={},u=_r(t),e=(t&&(i=u.offsetWidth,o=u.offsetHeight),t&&(e=Or((t=va(t,e,n,r)).allMatrix,t.transformOrigin,i,o),s=W(W({},t),e),a=Ar([(n=Or(t.allMatrix,[50,50],100,100)).pos1,n.pos2],n.direction)),r?4:3);return W(W(W({width:i,height:o,rotation:a},u),{rootMatrix:k(e),beforeMatrix:k(e),offsetMatrix:k(e),allMatrix:k(e),targetMatrix:k(e),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!r,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),s)}function ba(t,e,n,r,i){var o=1,a=[0,0],s=Ir(),u=Ir(),c=Ir(),l=Ir(),n=ma(e,n,i,!0);return e&&(i=n.is3d?4:3,o=(i=Or(n.offsetMatrix,J(n.transformOrigin,be(n.targetMatrix,i)),n.width,n.height)).direction,a=J(i.origin,[i.left-n.left,i.top-n.top]),s=kr(e),c=kr(br(r,r,!0).offsetParent||n.offsetRootContainer,!0),l=kr(n.offsetRootContainer),t&&(u=kr(t))),W({targetClientRect:s,containerClientRect:c,moveableClientRect:u,rootContainerClientRect:l,beforeDirection:o,beforeOrigin:a,originalBeforeOrigin:a,target:e},n)}var xa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=W({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},ba(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new nn,e._prevTarget=null,e._prevDragArea=!1,e._observer=null,e._observerId=0,e.onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e.checkUpdateRect=function(){var t;e.isDragging()||((t=e.props.parentMoveable)?t.checkUpdateRect():(bt(e._observerId),e._observerId=mt(function(){e.isDragging()||e.updateRect()})))},e}On(e,t);var n=e.prototype;return n.render=function(){var t=this.props,e=this.state,n=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,c=t.portalContainer,n=(this.checkUpdate(),this.updateRenderPoses(),n||{left:0,top:0}),l=n.left,n=n.top,f=e.left,p=e.top,d=e.target,h=e.direction,e=e.hasFixed,t=t.targets,t=(t&&t.length||i)&&d,i=this.isDragging(),g={};return this.getEnabledAbles().forEach(function(t){g["data-able-".concat(t.name.toLowerCase())]=!0}),m(u,W({cspNonce:a,ref:v(this,"controlBox"),className:"".concat(_("control-box",-1===h?"reverse":"",i?"dragging":"")," ").concat(r)},g,{onClick:this.onPreventClick,portalContainer:c,style:{position:e?"fixed":"absolute",display:t?"block":"none",transform:"translate3d(".concat(f-l,"px, ").concat(p-n,"px, ").concat(s,")"),"--zoom":o,"--zoompx":"".concat(o,"px")}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container,t=t.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),n||e||t||this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},n.componentDidUpdate=function(t){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),jr(this,"targetGesto"),jr(this,"controlGesto");var t,e=this.events;for(t in e){var n=e[t];n&&n.destroy()}},n.getAble=function(e){return vt(this.props.ables||[],function(t){return t.name===e})},n.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(Tn)},n.dragStart=function(t){var e=this.targetGesto;return e&&!e.isFlag()&&e.triggerDragStart(t),this},n.hitTest=function(t){var e=this.state,n=e.target,r=e.pos1,i=e.pos2,o=e.pos3,a=e.pos4,e=e.targetClientRect;if(!n)return 0;var t=(n=t instanceof Element?{left:(n=t.getBoundingClientRect()).left,top:n.top,width:n.width,height:n.height}:W({width:0,height:0},t)).left,s=n.top,u=n.width,n=n.height,r=Le([r,i,a,o],e),i=tn(r,[[t,s],[t+u,s],[t+u,s+n],[t,s+n]]),a=He(r);return i&&a?Math.min(100,i/a*100):0},n.isInside=function(t,e){var n=this.state,r=n.target,i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,n=n.targetClientRect;return!!r&&Ue([t,e],Le([i,o,s,a],n))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),r=(i?i.props:r).rootContainer;this.updateState(ba(this.controlBox&&this.controlBox.getElement(),o,a,a,r||a),!i&&n)},n.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=Wr(this.state),n=e[0],r=e[1],i=e[2],o=e[3],e=Rr(e),a=t.width,s=t.height,u=e.width,c=e.height,l=e.left,e=e.top,f=[t.left,t.top],p=J(f,t.origin);return{width:u,height:c,left:l,top:e,pos1:n,pos2:r,pos3:i,pos4:o,offsetWidth:a,offsetHeight:s,beforeOrigin:J(f,t.beforeOrigin),origin:p,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getManager=function(){return this},n.getRotation=function(){var t=this.state,e=t.pos1,n=t.pos2,t=t.direction;return t=t,e=F(e=e,n)/Math.PI*180,e=0<=(e=0<=t?e:180-e)?e:360+e},n.request=function(e,t,n){void 0===t&&(t={});var r=this.props,i=r.ables,r=r.groupable,i=i.filter(function(t){return t.name===e})[0];if(this.isDragging()||!i||!i.request)return{request:function(){return this},requestEnd:function(){return this}};var o=this,a=i.request(this),s=n||t.isInstant,u=a.isControl?"controlAbles":"targetAbles",c="".concat(r?"Group":"").concat(a.isControl?"Control":""),i={request:function(t){return pa(o,u,"drag",c,"",W(W({},a.request(t)),{requestAble:e,isRequest:!0}),s),this},requestEnd:function(){return pa(o,u,"drag",c,"End",W(W({},a.requestEnd()),{requestAble:e,isRequest:!0}),s),this}};return pa(o,u,"drag",c,"Start",W(W({},a.requestStart(t)),{requestAble:e,isRequest:!0}),s),s?i.request(t).requestEnd():i},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,c=t.pos4,l=t.left,f=t.top,p=e.padding||{},d=p.left,d=void 0===d?0:d,h=p.top,h=void 0===h?0:h,g=p.bottom,g=void 0===g?0:g,p=p.right,p=void 0===p?0:p,o=o?4:3,e=e.groupable?n:J(n,[l,f]);t.renderPoses=[J(a,Jr(i,[-d,-h],r,e,o)),J(s,Jr(i,[p,-h],r,e,o)),J(u,Jr(i,[-d,g],r,e,o)),J(c,Jr(i,[p,g],r,e,o))]},n.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,t=t.parentMoveable,r=this.state,i=r.target,r=r.container;(i||e)&&(this.updateAbles(),Ur(i,e)&&Ur(r,n)||((i=n||this.controlBox)&&this.unsetAbles(),this.updateState({target:e,container:n}),!t&&i&&this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){this._emitter.trigger(t,e);t=this.props[t];return t&&t(e)},n.useCSS=function(t,e){var n=this.props.customStyledMap,r=t+e;return n[r]||(n[r]=Rn(t,e)),n[r]},n.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(t){t.unset&&t.unset(e)})},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,t=t.filter(function(t){return t&&(t.always&&!1!==n[t.name]||n[t.name])}),i="drag".concat(e,"Start"),o="pinch".concat(e,"Start"),e="drag".concat(e,"ControlStart"),i=Vr(t,[i,o],r),o=Vr(t,[e],r);this.enabledAbles=t,this.targetAbles=i,this.controlAbles=o},n.updateState=function(t,e){if(e)this.isUnmounted||this.setState(t);else{var n,r=this.state;for(n in t)r[n]=t[n]}},n.getEnabledAbles=function(){var e=this.props;return e.ables.filter(function(t){return t&&e[t.name]})},n.renderAbles=function(){var r,i,o,a,e=this,t=this.props.triggerAblesSimultaneously,n={createElement:m};return this.renderState={},t=Vr(this.getEnabledAbles(),["render"],t).map(function(t){return(0,t.render)(e,n)||[]}),r=t.reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t}),i=function(t){return t.key},o=[],a={},r.forEach(function(t,e){var e=i(t,e,r),n=a[e];n||(a[e]=n=[],o.push(n)),n.push(t)}),o.map(function(t){return t[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._updateObserver=function(t){var e=this.props,n=e.target;window.ResizeObserver&&n&&e.useResizeObserver?t.target===n&&this._observer||((e=new ResizeObserver(this.checkUpdateRect)).observe(n,{box:"border-box"}),this._observer=e):null!=(t=this._observer)&&t.disconnect()},n._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,r=this.props,r=r.dragTarget||r.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(jr(this,"targetGesto"),this.updateState({gesto:null})),n||jr(this,"controlGesto"),r&&e&&!this.targetGesto&&(this.targetGesto=da(this,r,"")),!this.controlGesto&&n&&(this.controlGesto=ha(this,t,"controlAbles","Control"))},n._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},n._renderLines=function(){var t=this.props,r=t.zoom,e=t.hideDefaultLines,n=t.hideChildMoveableDefaultLines,t=t.parentMoveable;if(e||t&&n)return[];var i=this.state.renderPoses,o={createElement:m};return[[0,1],[1,3],[3,2],[2,0]].map(function(t,e){var n=t[0],t=t[1];return ho(o,"",i[n],i[t],r,e)})},n._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,r=this._prevTarget,i=this._prevDragArea,e=e.dragArea;return!e&&r!==n||(t||e)&&i!==e},n._updateNativeEvents=function(){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,t=xt(s);if(this._isTargetChanged())for(var e in s){var n=s[e];n&&n.destroy(),s[e]=null}a&&(i=this.enabledAbles,t.forEach(function(t){var e=Vr(i,[t]),n=0<e.length,r=s[t];n?(r||(r=new ga(a,o,t),s[t]=r),r.setAbles(e)):r&&(r.destroy(),s[t]=null)}))},e.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},flushSync:dr},e}($t),Ea={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,hideChildMoveableDefaultLines:Boolean},events:{},render:function(n,r){var t=n.props.targets||[],e=(n.moveables=[],n.state),i={left:e.left,top:e.top},o=n.props;return t.map(function(t,e){return r.createElement(xa,{key:"moveable"+e,ref:s(n,"moveables",e),target:t,origin:!1,cssStyled:o.cssStyled,customStyledMap:o.customStyledMap,useResizeObserver:o.useResizeObserver,hideChildMoveableDefaultLines:o.hideChildMoveableDefaultLines,parentMoveable:n,parentPosition:i})})}},Sa=zn("clickable",{props:{clickable:Boolean,preventClickDefault:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,e){e.isRequest||Ot(window,"click",t.onPreventClick,!0)},dragControlStart:function(t,e){this.dragStart(t,e)},dragGroupStart:function(t,e){this.dragStart(t,e),e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){this.endEvent(t);var n=t.state.target,r=e.inputEvent,i=e.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.getElement().contains(i);(t.props.preventClickDefault||e.isDrag)&&!o||this.unset(t),!r||!i||e.isDrag||t.isMoveableElement(i)||o||(r=n.contains(i),et(t,"onClick",tt(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,containsTarget:r})))},dragGroupEnd:function(t,e){this.endEvent(t);var n,r,i,o=e.inputEvent,a=e.inputTarget;o&&a&&!e.isDrag&&!t.isMoveableElement(a)&&e.datas.inputTarget!==a&&(r=-1<(n=(o=t.props.targets).indexOf(a)),i=!1,-1===n&&(i=-1<(n=gt(o,function(t){return t.contains(a)}))),et(t,"onClickGroup",tt(t,e,{isDouble:e.isDouble,targets:o,inputTarget:a,targetIndex:n,isTarget:r,containsTarget:i})))},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)},endEvent:function(t){var e=this;mt(function(){e.unset(t)})},unset:function(t){d(window,"click",t.onPreventClick,!0)}});function ya(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),W(W({},t),{datas:e})}var Ma=zn("edgeDraggable",{css:[".edge.edgeDraggable.line {\n    cursor: move;\n}"],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?go(e,"edgeDraggable",r,t.state.renderPoses,n.zoom):[]},dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;t=e.inputEvent.target;return P(t,_("direction"))&&P(t,_("edge"))&&P(t,_("edgeDraggable"))},dragControlStart:function(t,e){return t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},Do.dragStart(t,ya(e))},dragControl:function(t,e){return Do.drag(t,ya(e))},dragControlEnd:function(t,e){return Do.dragEnd(t,ya(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;t=e.inputEvent.target;return P(t,_("direction"))&&P(t,_("line"))},dragGroupControlStart:function(t,e){return Do.dragGroupStart(t,ya(e))},dragGroupControl:function(t,e){return Do.dragGroup(t,ya(e))},dragGroupControlEnd:function(t,e){return Do.dragGroupEnd(t,ya(e))},unset:function(t){return Do.unset(t)}}),Da={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},Ca=[la,No,t,ui,Do,Ma,Co,Ro,zo,Mo,Fo,Wo,Io,aa,oa,ca,Ea,Da,Sa,Ao,fa],t=Ca.reduce(function(t,e){return W(W({},t),"events"in e?e.events:{})},{}),Ma=Ca.reduce(function(t,e){return W(W({},t),e.props)},{}),Co=Object.keys(ni(t)),Ro=Object.keys(Ma);function Ra(t,i){return Math.max.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],t=t[3];return Math.max(e[i],n[i],r[i],t[i])}))}function wa(t,i){return Math.min.apply(Math,t.map(function(t){var e=t[0],n=t[1],r=t[2],t=t[3];return Math.min(e[i],n[i],r[i],t[i])}))}var Oa=function(r){function t(){var t=null!==r&&r.apply(this,arguments)||this;return t.differ=new Ye,t.moveables=[],t.transformOrigin="50% 50%",t}On(t,r);var e=t.prototype;return e.checkUpdate=function(){this.updateAbles()},e.updateRect=function(e,t,n){var r,i,o,a,s,u,c,l,f,p,d,h;void 0===n&&(n=!0),this.controlBox&&(this.moveables.forEach(function(t){t.updateRect(e,!1,!1)}),r=this.state,o=this.props,i=r.target||o.target,(!t||""!==e&&o.updateGroup)&&(this.rotation=o.defaultGroupRotate,this.transformOrigin=o.defaultGroupOrigin||"50% 50%",this.scale=[1,1]),t=this.rotation,o=this.scale,a=(u=function(t,e){if(!t.length)return[0,0,0,0];var i,r,o,n,a,s,t=t.map(function(t){return Wr(t.state)}),u=kn,c=kn,l=0,f=0;return(e=N(e,j))%90?(i=e/180*Math.PI,r=Math.tan(i),o=-1/r,n=[Fn,kn],a=[Fn,kn],t.forEach(function(t){t.forEach(function(t){var e=t[1]-r*t[0],t=t[1]-o*t[0];n[0]=Math.max(n[0],e),n[1]=Math.min(n[1],e),a[0]=Math.max(a[0],t),a[1]=Math.min(a[1],t)})}),n.forEach(function(n){a.forEach(function(t){var t=(t-n)/(r-o),e=r*t+n;u=Math.min(u,t),c=Math.min(c,e)})}),l=Ra(s=t.map(function(t){var e=t[0],n=t[1],r=t[2],t=t[3];return[Oe(e,-i),Oe(n,-i),Oe(r,-i),Oe(t,-i)]}),0)-wa(s,0),f=Ra(s,1)-wa(s,1)):(u=wa(t,0),c=wa(t,1),l=Ra(t,0)-u,f=Ra(t,1)-c,e%180&&(s=l,l=f,f=s)),[u,c,l,f]}(this.moveables,t))[0],s=u[1],c=u[2],u=u[3],t="rotate(".concat(t,"deg) scale(").concat(0<=o[0]?1:-1,", ").concat(0<=o[1]?1:-1,")"),i.style.cssText+="left:0px;top:0px; transform-origin: ".concat(this.transformOrigin,"; width:").concat(c,"px; height:").concat(u,"px;")+"transform:".concat(t),r.width=c,r.height=u,c=this.getContainer(),c=[(u=ba(this.controlBox.getElement(),i,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||c)).left,u.top],p=[(p=Ve([d=(f=Wr(u))[0],h=f[1],l=f[2],f=f[3]])).minX,p.minY],u.pos1=T(d,p),u.pos2=T(h,p),u.pos3=T(l,p),u.pos4=T(f,p),u.left=a-u.left+p[0],u.top=s-u.top+p[1],u.origin=T(J(c,u.origin),p),u.beforeOrigin=T(J(c,u.beforeOrigin),p),u.originalBeforeOrigin=J(c,u.originalBeforeOrigin),d=u.targetClientRect,h=0<o[0]*o[1]?1:-1,d.top+=u.top-r.top,d.left+=u.left-r.left,i.style.transform="translate(".concat(-p[0],"px, ").concat(-p[1],"px) ").concat(t),this.updateState(W(W({},u),{direction:h,beforeDirection:h}),n))},e.getRect=function(){return W(W({},r.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},e.triggerEvent=function(t,e,n){if(n||-1<t.indexOf("Group"))return r.prototype.triggerEvent.call(this,t,e);this._emitter.trigger(t,e)},e.updateAbles=function(){r.prototype.updateAbles.call(this,Q(Q([],this.props.ables,!0),[Ea],!1),"Group")},e._updateTargets=function(){r.prototype._updateTargets.call(this),this._prevTarget=this.props.dragTarget||this.areaElement},e._updateEvents=function(){var t=this.state,e=this.props,n=this._prevTarget,r=e.dragTarget||this.areaElement,n=(n!==r&&(jr(this,"targetGesto"),jr(this,"controlGesto"),t.target=null),t.target||(t.target=this.areaElement,this.controlBox.getElement().style.display="block"),t.target&&(this.targetGesto||(this.targetGesto=da(this,r,"Group")),this.controlGesto||(this.controlGesto=ha(this,this.controlBox.getElement(),"controlAbles","GroupControl"))),!Ur(t.container,e.container)),r=(n&&(t.container=e.container),this.differ.update(e.targets)),t=r.added,e=r.changed,r=r.removed;(n||t.length||e.length||r.length)&&this.updateRect()},e._updateObserver=function(){},t.defaultProps=W(W({},xa.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),t}(xa),za=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.moveables=[],t}On(t,e);var n=t.prototype;return n.render=function(){var n=this,t=this.props,e=t.cspNonce,r=t.cssStyled,t=t.targets;return m(r,{cspNonce:e,ref:v(this,"controlBox"),className:_("control-box")},t.map(function(t,e){return m(xa,W({key:"moveable"+e,ref:s(n,"moveables",e)},n.props,{target:t,wrapperMoveable:n}))}))},n.componentDidUpdate=function(){},n.updateRect=function(e,n,r){void 0===r&&(r=!0),this.moveables.forEach(function(t){t.updateRect(e,n,r)})},n.getRect=function(){return W(W({},e.prototype.getRect.call(this)),{children:this.moveables.map(function(t){return t.getRect()})})},n.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},n.dragStart=function(){return this},n.hitTest=function(){return 0},n.isInside=function(){return!1},n.isDragging=function(){return!1},n.updateRenderPoses=function(){},n.checkUpdate=function(){},n.triggerEvent=function(){},n.updateAbles=function(){},n._updateEvents=function(){},n._updateObserver=function(){},t}(xa),Pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return On(e,t),e.defaultAbles=Ca,e}(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.refTargets=[],t.selectorMap={},t}On(t,e);var n,o,r=t.prototype;return t.makeStyled=function(){var n,e={},t=(this.getTotalAbles().forEach(function(t){t=t.css;t&&t.forEach(function(t){e[t]=!0})}),xt(e).join("\n"));this.defaultStyled=Rn("div",(n=Tn,(_n+t).replace(/([^}{]*){/gm,function(t,e){return e.replace(/\.([^{,\s\d.]+)/g,"."+n+"$1")+"{"})))},t.getTotalAbles=function(){return Q([No,Ea,Da,Ao],this.defaultAbles,!0)},r.render=function(){var e,n,t=this.constructor,r=(t.defaultStyled||t.makeStyled(),this.props),i=r.ables,o=r.props,r=function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}(r,["ables","props"]),a=this._updateRefs(!0),a=(e=this.selectorMap,n=[],a.forEach(function(t){t&&(b(t)?e[t]&&n.push.apply(n,e[t]):n.push(t))}),n),s=1<a.length,i=Q(Q([],t.getTotalAbles(),!0),i||[],!0),o=W(W(W({},r),o||{}),{ables:i,cssStyled:t.defaultStyled,customStyledMap:t.customStyledMap});return s?r.individualGroupable?m(za,W({key:"individual-group",ref:v(this,"moveable")},o,{target:null,targets:a})):m(Oa,W({key:"group",ref:v(this,"moveable")},o,{target:null,targets:a})):m(xa,W({key:"single",ref:v(this,"moveable")},o,{target:a[0]}))},r.componentDidMount=function(){this._updateRefs()},r.componentDidUpdate=function(){this._updateRefs()},r.componentWillUnmount=function(){this.selectorMap={},this.refTargets=[]},r.getManager=function(){return this.moveable},r._updateRefs=function(t){var e=this.refTargets,n=ii(this.props.target||this.props.targets),r="undefined"!=typeof document,i=e.length!==n.length||e.some(function(t,e){e=n[e];return!(!t&&!e)&&t!==e}),o=this.selectorMap,a={};return this.refTargets.forEach(function(t){b(t)&&(o[t]?a[t]=o[t]:r&&(i=!0,a[t]=[].slice.call(document.querySelectorAll(t))))}),this.refTargets=n,this.selectorMap=a,!t&&i&&this.forceUpdate(),n},t.defaultAbles=[],t.customStyledMap={},t.defaultStyled=null,function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);3<o&&a&&Object.defineProperty(e,n,a)}([(n=Xn,void 0===o&&(o={}),function(e,i){n.forEach(function(r){var t=o[r]||r;t in e||(e[t]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(n=this[i])[r].apply(n,t);return n===this[i]?this:n})})})],t.prototype,"moveable",void 0),t}($t)),Ba=function(e){function t(t){t=e.call(this,t)||this;return t.state={},t.state=t.props,t}return n(t,e),t.prototype.render=function(){return t=m(Pa,o({ref:v(this,"moveable")},this.state)),e=this.state.parentElement,m(Zt,{element:t,container:e});var t,e},t}(Wt),Ga=function(t,e){return(Ga=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function Ta(t,e){function n(){this.constructor=t}Ga(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var _a=function(){return(_a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var Aa=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injectResult=null,t.tag="div",t}Ta(t,e);var n=t.prototype;return n.render=function(){var t=this.props,e=t.className,e=void 0===e?"":e,n=(t.cspNonce,t.portalContainer),t=function(t,e){var n={};for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}(t,["className","cspNonce","portalContainer"]),r=this.injector.className,i=this.tag,o={};return-1<ee.indexOf("simple")&&n&&(o={portalContainer:n}),m(i,_a({ref:v(this,"element"),"data-styled-id":r,className:e+" "+r},o,t))},n.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},n.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},n.getElement=function(){return this.element},t}(Wt);var Ia=function(){return(Ia=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};var ka=function(){function t(){this._events={}}var e=t.prototype;return e.on=function(t,e){if(z(t))for(var n in t)this.on(n,t[n]);else this._addEvent(t,e,{});return this},e.off=function(t,e){if(t)if(z(t))for(var n in t)this.off(n);else{var r,i;e?(r=this._events[t])&&-1<(i=gt(r,function(t){return t.listener===e}))&&r.splice(i,1):this._events[t]=[]}else this._events={};return this},e.once=function(e,t){var n=this;return t&&this._addEvent(e,t,{once:!0}),new Promise(function(t){n._addEvent(e,t,{once:!0})})},e.emit=function(e,n){var r=this,t=(void 0===n&&(n={}),this._events[e]);if(!e||!t)return!0;var i=!1;return n.eventType=e,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}(t).forEach(function(t){t.listener(n),t.once&&r.off(e,t.listener)}),!i},e.trigger=function(t,e){return this.emit(t,e=void 0===e?{}:e)},e._addEvent=function(t,e,n){var r=this._events;r[t]=r[t]||[],r[t].push(Ia({listener:e},n))},t}(),Fa=function(t,e){return(Fa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var X=function(){return(X=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function nt(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||((r=r||Array.prototype.slice.call(e,0,i))[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}function Na(t,e){var n;return X({events:{},props:((n={})[t]=Boolean,n),name:t},e)}var zo=ve(),Wa=zo.browser.webkit,ja=Wa&&(Mo="undefined"==typeof window?{userAgent:""}:window.navigator,!!(Mo=/applewebkit\/([^\s]+)/g.exec(Mo.userAgent.toLowerCase()))&&parseFloat(Mo[1])<605),Ya=612<=parseInt(zo.browser.webkitVersion,10)||15<=parseInt(zo.browser.version,10),qa="moveable-",Xa=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Ha=1e-4,La=1e-7,Va=["n","w","s","e"],Ua=["n","w","s","e","nw","ne","sw","se"],$a={n:[0,-1],e:[1,0],s:[0,1],w:[-1,0],nw:[-1,-1],ne:[1,-1],sw:[-1,1],se:[1,1]},Za={n:[0,1],e:[1,3],s:[3,2],w:[2,0],nw:[0],ne:[1],sw:[2],se:[3]},Ka={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135};function Ja(t,e,n,r,i,o){var n=e.gestos[o=void 0===o?"draggable":o].move(n,t.inputEvent),a=n.originalDatas||n.datas,a=a[o]||(a[o]={});return X(X({},i?iu(e,n):n),{isPinch:!!r,parentEvent:!0,datas:a,originalDatas:t.originalDatas})}var Qa=function(){function t(t){var e;this.ableName=t=void 0===t?"draggable":t,this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}},this.datas=((e={})[t]={},e)}var e=t.prototype;return e.dragStart=function(t,e){this.isDrag=!1,this.isFlag=!1;var n=e.originalDatas;return(this.datas=n)[this.ableName]||(n[this.ableName]={}),X(X({},this.move(t,e.inputEvent)),{type:"dragstart"})},e.drag=function(t,e){return this.move([t[0]-this.prevX,t[1]-this.prevY],e)},e.move=function(t,e){var n,r;return this.isFlag?(n=this.prevX+t[0],r=this.prevY+t[1],(t[0]||t[1])&&(this.isDrag=!0)):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],n=t[0],r=t[1],this.isFlag=!0),{type:"drag",clientX:this.prevX=n,clientY:this.prevY=r,inputEvent:e,isDrag:this.isDrag,distX:n-this.startX,distY:r-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas[this.ableName],originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function ts(t,e){var n=e.clientX,r=e.clientY,e=e.datas,t=t.state,i=t.moveableClientRect,o=t.rootMatrix,a=t.is3d,t=t.pos1,o=T(ru(o,[n-i.left,r-i.top],a?4:3),t),n=as({datas:e,distX:o[0],distY:o[1]});return[n[0],n[1]]}function es(t,e){var e=e.datas,t=t.state,n=t.allMatrix,r=t.beforeMatrix,i=t.is3d,o=t.left,a=t.top,s=t.origin,u=t.offsetMatrix,c=t.targetMatrix,t=t.transformOrigin,l=i?4:3;e.is3d=i,e.matrix=n,e.targetMatrix=c,e.beforeMatrix=r,e.offsetMatrix=u,e.transformOrigin=t,e.inverseMatrix=y(n,l),e.inverseBeforeMatrix=y(r,l),e.absoluteOrigin=Ee(J([o,a],s),l),e.startDragBeforeDist=B(e.inverseBeforeMatrix,e.absoluteOrigin,l),e.startDragDist=B(e.inverseMatrix,e.absoluteOrigin,l)}function ns(t,e){var n,r,i,o,a,s,u,c,l,f,p,d,h,g=t.datas,t=t.originalDatas.beforeRenderable,v=g.transformIndex,m=t.nextTransforms,b=m.length,x=t.nextTransformAppendedIndexes,E=0,m=(-1===v?(E=m.length,g.transformIndex=E):E=vt(x,function(t){return t.index===v&&t.functionName===e})?v:v+x.filter(function(t){return t.index<v}).length,n=E,r=(m=m).slice(0,n<0?void 0:n),i=m.slice(0,n<0?void 0:n+1),o=m[n]||"",a=n<0?[]:m.slice(n),n=n<0?[]:m.slice(n+1),s=Fe(r),u=Fe(i),c=Fe([o]),l=Fe(a),f=Fe(n),S=ke(s),y=ke(u),p=ke(l),d=ke(f),h=K(S,p,4),{transforms:m,beforeFunctionMatrix:S,beforeFunctionMatrix2:y,targetFunctionMatrix:ke(c),afterFunctionMatrix:p,afterFunctionMatrix2:d,allFunctionMatrix:h,beforeFunctions:s,beforeFunctions2:u,targetFunction:c[0],afterFunctions:l,afterFunctions2:f,beforeFunctionTexts:r,beforeFunctionTexts2:i,targetFunctionText:o,afterFunctionTexts:a,afterFunctionTexts2:n}),S=m.targetFunction,y="rotate"===e?"rotateZ":e;g.beforeFunctionTexts=m.beforeFunctionTexts,g.afterFunctionTexts=m.afterFunctionTexts,g.beforeTransform=m.beforeFunctionMatrix,g.beforeTransform2=m.beforeFunctionMatrix2,g.targetTansform=m.targetFunctionMatrix,g.afterTransform=m.afterFunctionMatrix,g.afterTransform2=m.afterFunctionMatrix2,g.targetAllTransform=m.allFunctionMatrix,S.functionName===y?(g.afterFunctionTexts.splice(0,1),g.isAppendTransform=!1):E<b&&(g.isAppendTransform=!0,t.nextTransformAppendedIndexes=nt(nt([],x,!0),[{functionName:e,index:E,isAppend:!0}],!1))}function rs(t,e,n){return"".concat(t.beforeFunctionTexts.join(" ")," ").concat(t.isAppendTransform?n:e," ").concat(t.afterFunctionTexts.join(" "))}function is(t,e,n){var r=t.beforeTransform,i=t.afterTransform,o=t.beforeTransform2,a=t.afterTransform2,t=t.targetAllTransform,e=n?K(t,e,4):K(e,t,4),t=K(y(n?o:r,4),e,4);return K(t,y(n?a:i,4),4)}function os(t){var e=t.datas,n=t.distX,t=t.distY,r=e.inverseBeforeMatrix,i=e.is3d,o=e.startDragBeforeDist,i=i?4:3;return T(B(r,J(e.absoluteOrigin,[n,t]),i),o)}function as(t,e){var n=t.datas,r=t.distX,t=t.distY,i=n.inverseBeforeMatrix,o=n.inverseMatrix,a=n.is3d,s=n.startDragBeforeDist,u=n.startDragDist,a=a?4:3;return T(B(e?i:o,J(n.absoluteOrigin,[r,t]),a),e?s:u)}function ss(t){var e=[];return 0<=t[1]&&(0<=t[0]&&e.push(3),t[0]<=0&&e.push(2)),t[1]<=0&&(0<=t[0]&&e.push(1),t[0]<=0&&e.push(0)),e}function H(t,e){var n=(e[0]+1)/2,e=(e[1]+1)/2,r=[i(t[0][0],t[1][0],n,1-n),i(t[0][1],t[1][1],n,1-n)],t=[i(t[2][0],t[3][0],n,1-n),i(t[2][1],t[3][1],n,1-n)];return[i(r[0],t[0],e,1-e),i(r[1],t[1],e,1-e)]}function us(t,e,n,r){return K(t,Ss(e,r,n),r)}function cs(n){var r=n.originalDatas.beforeRenderable;return{setTransform:function(t,e){void 0===e&&(e=-1),r.startTransforms=$(t)?t:S(t),fs(n,e)},setTransformIndex:function(t){fs(n,t)}}}function ls(t,e){fs(t,gt(t.originalDatas.beforeRenderable.startTransforms,function(t){return 0===t.indexOf("".concat(e,"("))}))}function fs(t,e){var n=t.originalDatas.beforeRenderable,t=t.datas;-1!==(t.transformIndex=e)&&(n=n.startTransforms[e])&&(e=Fe([n]),t.startValue=e[0].functionValue)}function ps(t,e){t.originalDatas.beforeRenderable.nextTransforms=S(e)}function ds(t){return t.originalDatas.beforeRenderable.nextTransforms}function hs(t){return ds(t).join(" ")}function gs(t,e,n,r,i){ps(i,e);var o=t.getAble("draggable"),o=o&&o.drag(t,Ja(i,t.state,n,r,!1)),i=o?o.transform:e;return X(X({transform:e,drag:o},$s({transform:i})),{afterTransform:i})}function vs(t,e,n,r,i){var o=t.state,a=o.left,o=o.top,s=t.props.groupable;u=t.state,c=i,l=u.transformOrigin,f=u.offsetMatrix,u=u.is3d,p=i.beforeTransform,c=i.afterTransform,u=u?4:3;var u,c,l,f,p,i=s?a:0,a=s?o:0,s=T(r,ms(t,n,us(f,I(K(K(p,Ae([e]),4),c,4),4,u),l,u)));return T(s,[i,a])}function ms(t,e,n){void 0===n&&(n=t.state.allMatrix);var t=t.state,r=t.width,i=t.height,t=t.is3d;return V(n,[r/2*(1+e[0]),i/2*(1+e[1])],t?4:3)}function bs(t,e,n,r,i,o){var a=t.props.groupable,t=t.state,s=t.transformOrigin,u=t.offsetMatrix,c=t.is3d,l=t.width,f=t.height,p=t.left,d=t.top,h=o.fixedDirection,o=o.nextTargetMatrix||t.targetMatrix,t=c?4:3;g=e,v=n,void 0===(m=l)&&(m=g),void 0===(b=f)&&(b=v),void 0===(x=s)&&(x=[0,0]);var g,v,m,b,x,c=a?p:0,l=a?d:0,s=us(u,o,(f=i)?f.map(function(t,e){var n=pt(t),r=n.value,n=n.unit,i=e?b:m,o=e?v:g;return"%"===t||isNaN(r)?o*(i?x[e]/i:0):"%"!==n?r:o*r/100}):x,t);return p=r,a=h,d=H(Gs(d=s,e,n,t),a),T([p[0]-d[0],p[1]-d[1]],[c,l])}function xs(t,e){return H(Vs(t.state),e)}function L(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.apply(void 0,nt([qa],t,!1))}function Es(t){t()}function Ss(t,e,n){return Se(e,Te(n,e),t,Te(n.map(function(t){return-t}),e))}function ys(r){return Ms(Qs(r,":before")).map(function(t,e){var t=pt(t),n=t.value,t=t.unit;return n*(n=r,e=0===e,"%"===t?Bs(n.ownerSVGElement)[e?"width":"height"]/100:1)})}function Ms(t){t=t.transformOrigin;return t?t.split(" "):["0","0"]}function Ds(t,e){var n=(e=void 0===e?Qs(t):e).transform;if(n&&"none"!==n)return e.transform;if("transform"in t){var r=t.transform.baseVal;if(!r)return"";var i=r.length;if(!i)return"";for(var o=[],a=0;a<i;++a)!function(t){var e=r[t].matrix;o.push("matrix(".concat(["a","b","c","d","e","f"].map(function(t){return e[t]}).join(", "),")"))}(a);return o.join(" ")}return""}function Cs(t,e,n){for(var r=document.body,i=!t||n?t:(null==(n=null==t?void 0:t.assignedSlot)?void 0:n.parentElement)||t.parentElement,o=!1,a=t===e||i===e,s="relative";i&&i!==r;){e===i&&(a=!0);var u=Qs(i),c=i.tagName.toLowerCase(),l=Ds(i,u),s=u.position;if("svg"===c||"static"!==s||l&&"none"!==l)break;u=i.parentNode;if(u&&11===u.nodeType){i=u.host,o=!0;break}i=u,s="relative"}return{isCustomElement:o,isStatic:"static"===s,isEnd:a||!i||i===r,offsetParent:i||r}}function Rs(t,e){var n,r,i=t.tagName.toLowerCase(),o=t.offsetLeft,a=t.offsetTop,s=U(o),u=!s;return u||"svg"===i?r=(n=Ms(e).map(function(t){return parseFloat(t)})).slice():(r=(n=ja?ys(t):Ms(e).map(function(t){return parseFloat(t)})).slice(),u=!0,o=(e=function(t,e){if(!t.getBBox||"g"===t.tagName.toLowerCase())return[0,0,0,0];var n=t.getBBox(),t=Bs(t.ownerSVGElement),r=n.x-t.x,n=n.y-t.y;return[r,n,e[0]-r,e[1]-n]}(t,n))[0],a=e[1],n[0]=e[2],n[1]=e[3]),{tagName:i,isSVG:s,hasOffset:u,offset:[o||0,a||0],origin:n,targetOrigin:r}}function ws(t,e,n){void 0===n&&(n=Qs(t));var t=Qs(document.body),r=t.position;if(!(e||r&&"static"!==r))return[0,0];e=parseInt(t.marginLeft,10),r=parseInt(t.marginTop,10);return"absolute"===n.position&&("auto"===n.top&&"auto"===n.bottom||(r=0),"auto"===n.left&&"auto"===n.right||(e=0)),[e,r]}function Os(t){t.forEach(function(t){var e=t.matrix;e&&(t.matrix=I(e,3,4))})}function zs(t,e,n){for(var r,i,o,a=t,s=[],u=!n&&t===e||t===document.body,c=u,l=!1,f=3,p=!1,d=Cs(e,e,!0).offsetParent;a&&!c;){var c=u,h=Qs(a),g=h.position,v=Ds(a,h),v=ye((v=v)&&"none"!==v?z(v)?v:Ae(v):[1,0,0,1,0,0]),m="fixed"===g,b={hasTransform:!1,fixedContainer:null},x=(m&&(p=!0,d=(b=function(t){for(var e=t.parentElement,n=!1;e;){var r=Qs(e).transform;if(r&&"none"!==r){n=!0;break}if(e===document.body)break;e=e.parentElement}return{fixedContainer:e||document.body,hasTransform:n}}(a)).fixedContainer),v.length),x=(l||16!==x||(l=!0,f=4,Os(s),o=o&&I(o,3,4)),l&&9===x&&(v=I(v,3,4)),Rs(a,h)),E=x.tagName,S=x.hasOffset,y=x.isSVG,M=x.origin,D=x.targetOrigin,x=x.offset,C=x[0],x=x[1],E=("svg"===E&&o?(s.push({type:"target",target:a,matrix:function(t,e){var n=Bs(t),r=n.width,i=n.height,o=n.clientWidth,n=n.clientHeight,a=o/r,s=n/i,t=t.preserveAspectRatio.baseVal,u=t.align,t=t.meetOrSlice,c=[0,0],l=[a,s],f=[0,0];{var p;1!==u&&(p=(u-2)%3,u=Math.floor((u-2)/3),c[0]=r*p/2,c[1]=i*u/2,t=2===t?Math.max(s,a):Math.min(a,s),l[0]=t,l[1]=t,f[0]=(o-r)/2*p,f[1]=(n-i)/2*u)}a=Ge(l,e);return a[e*(e-1)]=f[0],a[e*(e-1)+1]=f[1],Ss(a,e,c)}(a,f)}),s.push({type:"offset",target:a,matrix:k(f)})):"g"===E&&t!==a&&(x=C=0),void 0),R=!1,w=!1,O=(m?(E=b.fixedContainer,R=!0):(E=(O=Cs(a,e)).offsetParent,R=O.isEnd,w=O.isStatic),!Wa||Ya||!S||y||!w||"relative"!==g&&"static"!==g||(C-=E.offsetLeft,x-=E.offsetTop,u=u||R),0),y=0,w=0,g=0;if(m?S&&b.hasTransform&&(w=E.clientLeft,g=E.clientTop):(S&&d!==E&&(O=E.clientLeft,y=E.clientTop),S&&E===document.body&&(C+=(b=ws(a,!1,h))[0],x+=b[1])),s.push({type:"target",target:a,matrix:Ss(v,f,M)}),S?s.push({type:"offset",target:a,matrix:Te([C-a.scrollLeft+O-w,x-a.scrollTop+y-g],f)}):s.push({type:"offset",target:a,origin:M}),o=o||v,r=r||M,i=i||D,c||m)break;a=E,u=R,n&&a!==document.body||(c=u)}return{offsetContainer:d,matrixes:s,targetMatrix:o=o||k(f),transformOrigin:r=r||[0,0],targetOrigin:i=i||[0,0],is3d:l,hasFixed:p}}function Ps(t,e){return void 0===e&&(e=9<t.length),"".concat(e?"matrix3d":"matrix","(").concat(Me(t,!e).join(","),")")}function Bs(t){var e=t.clientWidth,n=t.clientHeight;if(!t)return{x:0,y:0,width:0,height:0,clientWidth:e,clientHeight:n};t=t.viewBox,t=t&&t.baseVal||{x:0,y:0,width:0,height:0};return{x:t.x,y:t.y,width:t.width||e,height:t.height||n,clientWidth:e,clientHeight:n}}function V(t,e,n){return B(t,Ee(e,n),n)}function Gs(e,t,n,r){return[[0,0],[t,0],[0,n],[t,n]].map(function(t){return V(e,t,r)})}function Ts(t){var e=t.map(function(t){return t[0]}),t=t.map(function(t){return t[1]}),n=Math.min.apply(Math,e),r=Math.min.apply(Math,t),e=Math.max.apply(Math,e),t=Math.max.apply(Math,t);return{left:n,top:r,right:e,bottom:t,width:e-n,height:t-r}}function _s(t,e,n,r){return Ts(Gs(t,e,n,r))}function As(t,e,n,r){var i=16===t.length?4:3,n=Gs(t,n,r,i),r=n[0],o=r[0],r=r[1],a=n[1],s=a[0],a=a[1],u=n[2],c=u[0],u=u[1],l=n[3],f=l[0],l=l[1],t=V(t,e,i),e=t[0],i=t[1],t=Math.min(o,s,c,f),p=Math.min(r,a,u,l);return{left:t,top:p,right:Math.max(o,s,c,f),bottom:Math.max(r,a,u,l),origin:[e-t||0,i-p||0],pos1:[o-t||0,r-p||0],pos2:[s-t||0,a-p||0],pos3:[c-t||0,u-p||0],pos4:[f-t||0,l-p||0],direction:Dt(n)}}function Is(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function ks(t,e){return Is([e[0]-t[0],e[1]-t[1]])}function Fs(t,e,n,r){void 0===n&&(n=1),void 0===r&&(r=F(t,e));e=ks(t,e);return{transform:"translateY(-50%) translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")"),width:"".concat(e,"px")}}function Ns(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.length,o=n.reduce(function(t,e){return t+e[0]},0)/i,i=n.reduce(function(t,e){return t+e[1]},0)/i;return{transform:"translateZ(0px) translate(".concat(o,"px, ").concat(i,"px) rotate(").concat(t,"rad) scale(").concat(e,")")}}function Ws(t,e){e=t[e];return z(e)?X(X({},t),e):t}function js(t,e){void 0===e&&(e=t?Qs(t):null);var n,r,i,o,a,s,u,c,l=t&&!U(t.offsetWidth),f=0,p=0,d=0,h=0,g=0,v=0,m=0,b=0,x=0,E=0,S=0,y=0,M=1/0,D=1/0,C=1/0,R=1/0,w=!1;return t&&(h=l||"svg"===t.tagName.toLowerCase()?(l=t.style,n="border-box"===e.boxSizing,o=parseFloat(e.borderLeftWidth)||0,i=parseFloat(e.borderRightWidth)||0,a=parseFloat(e.borderTopWidth)||0,c=parseFloat(e.borderBottomWidth)||0,o=(r=(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0))+(o+i),a=(i=(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0))+(a+c),x=Math.max(r,Z(e.minWidth,0)),E=Math.max(i,Z(e.minHeight,0)),M=Z(e.maxWidth,0),D=Z(e.maxHeight,0),isNaN(M)&&(D=M=1/0),c=Z(l.width,0),l=Z(l.height,0),s=parseFloat(e.width),u=parseFloat(e.height),g=parseFloat(e.width),v=parseFloat(e.height),d=f=m=Math.abs(s-c)<1?Et(x,c||parseFloat(e.width),M):s,h=p=b=Math.abs(u-l)<1?Et(E,l||parseFloat(e.height),D):u,n?(C=M,R=D,S=x,y=E,m=f-o,b=p-a):(C=M+o,R=D+a,S=x+o,y=E+a,f=m+o,p=b+a),d=m+r,b+i):(w=!0,g=f=(c=t.getBBox()).width,v=p=c.height,d=m=f,b=p)),{svg:w,offsetWidth:f,offsetHeight:p,clientWidth:d,clientHeight:h,contentWidth:m,contentHeight:b,cssWidth:g,cssHeight:v,minWidth:x,minHeight:E,maxWidth:M,maxHeight:D,minOffsetWidth:S,minOffsetHeight:y,maxOffsetWidth:C,maxOffsetHeight:R}}function Ys(t,e){return F(0<e?t[0]:t[1],0<e?t[1]:t[0])}function qs(){return{left:0,top:0,width:0,height:0,right:0,bottom:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0}}function Xs(t,e){var n=0,r=0,i=0,o=0,a=(t&&(t===document.body||t===document.documentElement?(i=window.innerWidth,o=window.innerHeight,n=(a=[-(a=[document.documentElement.scrollLeft||document.body.scrollLeft,document.documentElement.scrollTop||document.body.scrollTop])[0],-a[1]])[0],r=a[1]):(n=(a=t.getBoundingClientRect()).left,r=a.top,i=a.width,o=a.height)),{left:n,top:r,width:i,height:o,right:n+i,bottom:r+o});return t&&e&&(a.clientLeft=t.clientLeft,a.clientTop=t.clientTop,a.clientWidth=t.clientWidth,a.clientHeight=t.clientHeight,a.scrollWidth=t.scrollWidth,a.scrollHeight=t.scrollHeight,a.overflow="visible"!==Qs(t).overflow),a}function Hs(t){if(t){var e,t=t.getAttribute("data-direction");if(t)return e=[0,0],-1<t.indexOf("w")&&(e[0]=-1),-1<t.indexOf("e")&&(e[0]=1),-1<t.indexOf("n")&&(e[1]=-1),-1<t.indexOf("s")&&(e[1]=1),e}}function Ls(t,e){return[J(e,t[0]),J(e,t[1]),J(e,t[2]),J(e,t[3])]}function Vs(t){var e=t.left,n=t.top;return Ls([t.pos1,t.pos2,t.pos3,t.pos4],[e,n])}function Us(t,e){var n;null!=(n=t[e])&&n.unset(),t[e]=null}function $s(e){return{style:e,cssText:xt(e).map(function(t){return"".concat(t,": ").concat(e[t],";")}).join("")}}function Zs(t,e){var n=e.afterTransform||e.transform;return X(X({},$s(X(X(X({},t.style),e.style),{transform:n}))),{afterTransform:n,transform:t.transform})}function rt(t,e,n,r){var i=e.datas,n=(i.datas||(i.datas={}),X(X({},n),{target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,moveable:t,datas:i.datas}));return i.isStartEvent?r||(i.lastEvent=n):i.isStartEvent=!0,n}function Ks(t,e,n){var r=e.datas,i=("isDrag"in n?n:e).isDrag;return r.datas||(r.datas={}),X(X({isDrag:i},n),{moveable:t,target:t.state.target,clientX:e.clientX,clientY:e.clientY,inputEvent:e.inputEvent,currentTarget:t,lastEvent:r.lastEvent,isDouble:e.isDouble,datas:r.datas})}function Js(t,e,n){t._emitter.on(e,n)}function it(t,e,n,r){return t.triggerEvent(e,n,r)}function Qs(t,e){return window.getComputedStyle(t,e)}function tu(t,n,r){var i={},o={};return t.filter(function(e){var t=e.name;if(i[t]||!n.some(function(t){return e[t]}))return!1;if(!r&&e.ableGroup){if(o[e.ableGroup])return!1;o[e.ableGroup]=!0}return i[t]=!0})}function eu(t,e){return t===e||null==t&&null==e}function nu(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.sort(function(t,e){return Math.abs(e)-Math.abs(t)}),t[0]}function ru(t,e,n){return B(y(t,n),Ee(e,n),n)}function iu(t,e){var n=t.is3d,t=ru(t.rootMatrix,[e.distX,e.distY],n?4:3);return e.distX=t[0],e.distY=t[1],e}function ou(t,e,n,r,i){return T(V(t,J(n,e),i),r)}function au(t,e,n){return n?"".concat(t/e*100,"%"):"".concat(t,"px")}function su(t){return Math.abs(t)<=La?0:t}function uu(r,i){return void 0===i&&(i=[r]),function(t,e){if(e.isRequest)return!!i.some(function(t){return e.requestAble===t})&&e.parentDirection;var n=e.inputEvent.target;return P(n,L("direction"))&&(!r||P(n,L(r)))}}function cu(t,e){return t?b(t)?e?document.querySelector(t):t:at(t)?t():"current"in t?t.current:t:null}function lu(t,n){return t?((e=t)&&z(e)&&(!(e instanceof Element)&&($(e)||"length"in e))?[].slice.call(t):[t]).reduce(function(t,e){return b(e)&&n?nt(nt([],t,!0),[].slice.call(document.querySelectorAll(e)),!0):(t.push(cu(e,n)),t)},[]):[];var e}function fu(t,e){var n=t.rootMatrix,t=t.is3d,n=y(n,t?4:3);return(n=t?n:I(n,3,4))[12]=0,n[13]=0,n[14]=0,Ie(n,e)}function pu(t,e,n,r,i){var o,a,s=t[0],t=t[1],u=0,c=0;return i&&s&&t?(i=F([0,0],e),o=F([0,0],r),a=Is(e),i=Math.cos(i-o)*a,r[0]?c=r[1]?(o=2*r[0]*s,a=2*r[1]*t,s=Is([o+e[0],a+e[1]])-Is([o,a]),t=F([0,0],[n,1]),u=Math.cos(t)*s,Math.sin(t)*s):(u=i)/n:u=(c=i)*n):(u=r[0]*e[0],c=r[1]*e[1]),[u,c]}function du(e,t,n,r){var i,o,a=n.ratio,s=n.startOffsetWidth,u=n.startOffsetHeight,c=0,l=0,f=r.distX,p=r.distY,d=r.parentDistance,h=r.parentDist,r=r.parentScale,g=n.fixedDirection,v=[0,1].map(function(t){return Math.abs(e[t]-g[t])}),m=[0,1].map(function(t){t=v[t];return t=0!==t?2/t:t});return h?(c=h[0],l=h[1],t&&(c?l=l||c/a:c=l*a)):l=r?(c=(r[0]-1)*s,(r[1]-1)*u):d?(c=d/(i=Is([h=s*v[0],r=u*v[1]]))*h*m[0],d/i*r*m[1]):(o=as({datas:n,distX:f,distY:p}),c=(h=pu([s,u],o=m.map(function(t,e){return o[e]*t}),a,e,t))[0],h[1]),{distWidth:c,distHeight:l}}Fo=Na("pinchable",{events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(n,r){var t=r.datas,e=r.targets,i=r.angle,o=r.originalDatas,a=n.props,s=a.pinchable,a=a.ables;if(!s)return!1;var u="onPinch".concat(e?"Group":"","Start"),c="drag".concat(e?"Group":"","ControlStart"),a=(!0===s?n.controlAbles:a.filter(function(t){return-1<s.indexOf(t.name)})).filter(function(t){return t.canPinch&&t[c]}),l=rt(n,r,{}),e=(e&&(l.targets=e),it(n,u,l)),u=(t.isPinch=!1!==e,t.ables=a,t.isPinch);return!!u&&(a.forEach(function(t){var e;o[t.name]=o[t.name]||{},t[c]&&(e=X(X({},r),{datas:o[t.name],parentRotate:i,isPinch:!0}),t[c](n,e))}),n.state.snapRenderInfo={request:r.isRequest,direction:[0,0]},u)},pinch:function(e,n){var r,i,t=n.datas,o=n.scale,a=n.distance,s=n.originalDatas,u=n.inputEvent,c=n.targets,l=n.angle;if(t.isPinch)return r=a*(1-1/o),a=rt(e,n,{}),c&&(a.targets=c),o="onPinch".concat(c?"Group":""),it(e,o,a),o=t.ables,i="drag".concat(c?"Group":"","Control"),o.forEach(function(t){t[i]&&t[i](e,X(X({},n),{datas:s[t.name],inputEvent:u,parentDistance:r,parentRotate:l,isPinch:!0}))}),a},pinchEnd:function(e,n){var t,r,i,o=n.datas,a=n.isPinch,s=n.inputEvent,u=n.targets,c=n.originalDatas;if(o.isPinch)return r="onPinch".concat(u?"Group":"","End"),t=Ks(e,n,{isDrag:a}),u&&(t.targets=u),it(e,r,t),r=o.ables,i="drag".concat(u?"Group":"","ControlEnd"),r.forEach(function(t){t[i]&&t[i](e,X(X({},n),{isDrag:a,datas:c[t.name],inputEvent:s,isPinch:!0}))}),a},pinchGroupStart:function(t,e){return this.pinchStart(t,X(X({},e),{targets:t.props.targets}))},pinchGroup:function(t,e){return this.pinch(t,X(X({},e),{targets:t.props.targets}))},pinchGroupEnd:function(t,e){return this.pinchEnd(t,X(X({},e),{targets:t.props.targets}))}});function hu(t,n,r){var e=r.originalDatas,e=(e.groupable=e.groupable||{},e.groupable),i=(e.childDatas=e.childDatas||[],e.childDatas);return t.moveables.map(function(t,e){return i[e]=i[e]||{},i[e][n]=i[e][n]||{},X(X({},r),{datas:i[e][n],originalDatas:i[e]})})}function gu(t,a,s,u,e,c,l){var f=!!s.match(/Start$/g),p=!!s.match(/End$/g),d=e.isPinch,h=e.datas,e=hu(t,a.name,e),g=t.moveables,t=e.map(function(t,e){var n=g[e],r=n.state,i=r.gestos,o=t;if(f)o=new Qa(l).dragStart(u,t);else{if(i[l]||(i[l]=h.childGestos[e]),!i[l])return;o=Ja(t,r,u,d,c,l)}e=a[s](n,X(X({},o),{parentFlag:!0}));return p&&(i[l]=null),e});return f&&(h.childGestos=g.map(function(t){return t.state.gestos[l]})),t}function vu(t,i,o,e,a,s){void 0===a&&(a=function(t,e){return e});var u=!!o.match(/End$/g),e=hu(t,i.name,e),c=t.moveables;return e.map(function(t,e){var n=c[e],r=a(n,t),r=i[o](n,X(X({},r),{parentFlag:!0}));return r&&s&&s(n,t,r,e),u&&(n.state.gestos={}),r})}var mu=["left","right","center"],bu=["top","bottom","middle"],xu={start:"left",end:"right",center:"center"},Eu={start:"top",end:"bottom",center:"middle"};function Su(t,e){var n=t.props,r=n.snappable,i=n.bounds,o=n.innerBounds,a=n.verticalGuidelines,s=n.horizontalGuidelines,u=n.snapGridWidth,n=n.snapGridHeight,t=t.state,c=t.guidelines,t=t.enableSnap;return r&&t&&!(e&&!0!==r&&r.indexOf(e)<0)&&!!(u||n||i||o||c&&c.length||a&&a.length||s&&s.length)}function yu(t){return!1===t?{}:!0!==t&&t?t:{left:!0,right:!0,top:!0,bottom:!0}}function Mu(t,e){var n=function(t,e){var n,r=yu(t),i={};for(n in r)n in e&&r[n]&&(i[n]=e[n]);return i}(t,e),t=bu.filter(function(t){return t in n}),e=mu.filter(function(t){return t in n});return{horizontal:t.map(function(t){return n[t]}),vertical:e.map(function(t){return n[t]})}}function Du(t,e,n,r,i,o,a){void 0===i&&(i=0),void 0===o&&(o=0);var s=[],u=(a=void 0===a?{left:0,top:0,right:0,bottom:0}:a).left,c=a.top,l=a.bottom,f=n+a.right-u,p=r+l-c;return t&&t.forEach(function(t){t=z(t)?t:{pos:t};s.push({type:"horizontal",pos:[u,N(t.pos-o+c,.1)],size:f,className:t.className})}),e&&e.forEach(function(t){t=z(t)?t:{pos:t};s.push({type:"vertical",pos:[N(t.pos-i+u,.1),c],size:p,className:t.className})}),s}function Cu(t,e){if(!e.length)return[];var t=t.state,n=t.containerClientRect,r=t.targetClientRect,i=r.top,r=r.left,o=t.rootMatrix,a=t.is3d?4:3,n=(c=V(c=o,[(n=n).clientLeft,n.clientTop],a),[n.left+c[0],n.top+c[1]]),s=n[0],u=n[1],c=Ve(Vs(t)),n=T([c.minX,c.minY],ru(o,[r-s,i-u],a)).map(function(t){return t=t,Math.round(t%1==-.5?t-1:t)}),l=n[0],f=n[1];return e.map(function(t){var e=t.element.getBoundingClientRect(),n=e.left-s,r=e.top-u,i=r+e.height,e=n+e.width,n=ru(o,[n,r],a),r=n[0],n=n[1],e=ru(o,[e,i],a),i=e[0],e=e[1];return X(X({},t),{rect:{left:r+l,right:i+l,top:n+f,bottom:e+f,center:(r+i)/2+l,middle:(n+e)/2+f}})})}function Ru(t){var e,n,r,o,v,u,m,i=t.state,a=i.snapOffset,i=i.containerClientRect,s=i.overflow,c=i.scrollHeight,l=i.scrollWidth,f=i.clientHeight,p=i.clientWidth,d=i.clientLeft,i=i.clientTop,h=t.props,g=h.snapGap,g=void 0===g||g,b=h.verticalGuidelines,x=h.horizontalGuidelines,E=h.snapThreshold,E=void 0===E?5:E,S=h.snapGridWidth,S=void 0===S?0:S,h=h.snapGridHeight,h=void 0===h?0:h,y=nt([],function(t){var e=t.state,n=t.props.elementGuidelines;if(!(n=void 0===n?[]:n).length)return e.elementRects=[],[];var r=(e.elementRects||[]).filter(function(t){return!t.refresh}),i=n.map(function(t){return z(t)&&"element"in t?t:{element:cu(t,!0)}}).filter(function(t){return t.element}),o=(n=qe(r.map(function(t){return t.element}),i.map(function(t){return t.element}))).maintained,a=n.added,s=[],g=(o.forEach(function(t){var e=t[0],t=t[1];s[t]=r[e]}),Cu(t,a.map(function(t){return i[t]})).map(function(t,e){s[a[e]]=t}),e.elementRects=s,yu(t.props.elementSnapDirections)),v=[];return s.forEach(function(e){var n=e.element,t=e.top,t=void 0===t?g.top:t,r=e.left,r=void 0===r?g.left:r,i=e.right,i=void 0===i?g.right:i,o=e.bottom,o=void 0===o?g.bottom:o,a=e.center,a=void 0===a?g.center:a,s=e.middle,s=void 0===s?g.middle:s,u=e.className,c=e.rect,t=Mu({top:t,right:i,left:r,bottom:o,center:a,middle:s},c),i=t.horizontal,r=t.vertical,l=c.top,f=c.left,p=c.right-f,d=c.bottom-l,h=[p,d];r.forEach(function(t){v.push({type:"vertical",element:n,pos:[N(t,.1),l],size:d,sizes:h,className:u,elementRect:e})}),i.forEach(function(t){v.push({type:"horizontal",element:n,pos:[f,N(t,.1)],size:p,sizes:h,className:u,elementRect:e})})}),v}(t),!0);return g&&(e=(g=Ts(Vs(t.state))).top,n=g.left,r=g.bottom,g=g.right,y.push.apply(y,(o={top:e,left:n,bottom:r,right:g,center:(n+g)/2,middle:(e+r)/2},v=E,u=t.state.elementRects,m=[],[["vertical",xu,Eu],["horizontal",Eu,xu]].forEach(function(t){var f=t[0],p=t[1],a=t[2],d=o[p.start],h=o[p.end],g=o[p.center],n=o[a.start],r=o[a.end];function i(t){t=t.rect;return t[p.end]<d+v?d-t[p.end]:h-v<t[p.start]?t[p.start]-h:-1}var e=u.filter(function(t){var e=t.rect;return!(e[a.start]>r||e[a.end]<n)&&0<i(t)}).sort(function(t,e){return i(t)-i(e)}),s=[];e.forEach(function(o){e.forEach(function(t){var e,n,r,i;o!==t&&(r=o.rect,e=t.rect,n=r[a.start],r=r[a.end],i=e[a.start],e[a.end]<n||r<i||s.push([o,t]))})}),s.forEach(function(t){var e=t[0],t=t[1],n=e.rect,r=t.rect,i=n[p.start],n=n[p.end],o=r[p.start],r=r[p.end],a=0,s=0,u=!1,c=!1,l=!1;if(n<=d&&h<=o){if(c=!0,s=n+(a=(o-n-(h-d))/2)+(h-d)/2,Math.abs(s-g)>v)return}else if(n<o&&r<d+v){if(u=!0,s=r+(a=o-n),Math.abs(s-d)>v)return}else{if(!(n<o&&h-v<i))return;if(l=!0,s=i-(a=o-n),Math.abs(s-h)>v)return}a&&m.push({type:f,pos:"vertical"===f?[s,0]:[0,s],element:t.element,size:0,className:t.className,isStart:u,isCenter:c,isEnd:l,gap:a,hide:!0,gapRects:[e,t]})})}),m))),y.push.apply(y,function(t,e,n,r,i,o){void 0===i&&(i=0);void 0===o&&(o=0);var a=[];if(e)for(var s=0;s<=r;s+=e)a.push({type:"horizontal",pos:[0,N(s-o,.1)],size:n,hide:!0});if(t)for(s=0;s<=n;s+=t)a.push({type:"vertical",pos:[N(s-i,.1),0],size:r,hide:!0});return a}(S,h,s?l:p,s?c:f,d,i)),y.push.apply(y,Du(x||!1,b||!1,s?l:p,s?c:f,d,i,a)),y}function wu(t,e,n,r){r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=t.length-1,r=0;r<n;++r){var i=t[r];if(!U(i))return i}return t[n]}(r,t.props.snapThreshold,5);return Ou(t.state.guidelines,e,n,r)}function Ou(t,e,n,r){return{vertical:Bu(t,"vertical",e,r),horizontal:Bu(t,"horizontal",n,r)}}function zu(t,e,n){e=Mu(t.props.snapDirections,e);return wu(t,e.vertical,e.horizontal,n)}function Pu(t){var e=t.isSnap;if(!e)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var t=t.posInfos[0],n=t.guidelineInfos[0],r=n.offset,i=n.dist,n=n.guideline;return{isSnap:e,offset:r,dist:i,pos:t.pos,guideline:n}}function Bu(r,i,t,o){if(!r||!r.length)return{isSnap:!1,index:-1,posInfos:[]};var a="vertical"===i?0:1,t=t.map(function(n,t){var e=r.map(function(t){var e=t.pos,e=n-e[a];return{offset:e,dist:Math.abs(e),guideline:t}}).filter(function(t){var e=t.guideline,t=t.dist;return!(e.type!==i||o<t)}).sort(function(t,e){return t.dist-e.dist});return{pos:n,index:t,guidelineInfos:e}}).filter(function(t){return 0<t.guidelineInfos.length}).sort(function(t,e){return t.guidelineInfos[0].dist-e.guidelineInfos[0].dist}),e=0<t.length;return{isSnap:e,index:e?t[0].index:-1,posInfos:t}}function Gu(t,e,n){var r,i=[];if(n[0]&&n[1])i=[n,[-n[0],n[1]],[n[0],-n[1]]].map(function(t){return H(e,t)});else if(n[0]||n[1])t.props.keepRatio?i=[[-1,-1],[-1,1],[1,-1],[1,1],n].map(function(t){return H(e,t)}):(r=e,1<(i=ss(n).map(function(t){return r[t]})).length&&i.push([(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2]));else for(var o=[e[0],e[1],e[3],e[2],e[0]],a=0;a<4;++a)i.push(o[a]),i.push([(o[a][0]+o[a+1][0])/2,(o[a][1]+o[a+1][1])/2]);return wu(t,i.map(function(t){return t[0]}),i.map(function(t){return t[1]}),1)}function Tu(t,e){var n=Math.abs(t.offset),r=Math.abs(e.offset);return t.isBound&&e.isBound?r-n:t.isBound?-1:e.isBound?1:t.isSnap&&e.isSnap?r-n:t.isSnap?-1:e.isSnap||n<La?1:r<La?-1:n-r}function _u(t,a){return t.slice().sort(function(t,e){var n=t.sign[a],r=e.sign[a],i=t.offset[a],o=e.offset[a];return n?r?Tu({isBound:t.isBound,isSnap:t.isSnap,offset:i},{isBound:e.isBound,isSnap:e.isSnap,offset:o}):-1:1})[0]}function Au(t,e){var n=Mt([e[0][0],e[1][0]]),e=Mt([e[0][1],e[1][1]]);return{vertical:n<=t[0],horizontal:e<=t[1]}}function Iu(t,e){var n,r=e[0],e=e[1],i=e[0]-r[0],e=e[1]-r[1];return Math.abs(i)<La&&(i=0),Math.abs(e)<La&&(e=0),e=i?(n=e?e/i*(t[0]-r[0])+r[1]:r[1],t[1]):(n=r[0],t[0]),n-e}function ku(t,e,n,r){return void 0===r&&(r=La),t.every(function(t){t=Iu(t,e);return t<=0===n||Math.abs(t)<=r})}function Fu(t,e,n,r,i){return void 0===i&&(i=0),r&&e-i<=t||!r&&t<=n+i?{isBound:!0,offset:r?e-t:n-t}:{isBound:!1,offset:0}}function Nu(t,e,n,r,i,o){var a,s,u=e[0],e=e[1],t=t[0],c=n[0],n=n[1],l=su(n[1]-c[1]),f=e,p=u,u=-u/e;return su(n[0]-c[0])?l||o&&!f?{isBound:!1,offset:0}:p?Fu((c[1]-t[1])/u+t[0],c[0],n[0],r,i):(a=c[1]-t[1],{isBound:s=Math.abs(a)<=(i||0),offset:s?a:0}):o&&!p?{isBound:!1,offset:0}:f?Fu(u*(c[0]-t[0])+t[1],c[1],n[1],r,i):(a=c[0]-t[0],{isBound:s=Math.abs(a)<=(i||0),offset:s?a:0})}function Wu(a,t,s){return t.map(function(t){var e=function(t,e){var n=e.line,r=e.centerSign,i=e.verticalSign,o=e.horizontalSign,e=e.lineConstants;if(!(t=t.props.innerBounds))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var a=t.left,s=t.top,u=t.width,t=t.height,c=[[a,s],[a,s+t]],l=[[a,s],[a+u,s]],f=[[a+u,s],[a+u,s+t]],p=[[a,s+t],[a+u,s+t]];return ku([[a,s],[a+u,s],[a,s+t],[a+u,s+t]],n,r)?{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]}:(a=Nu(n,e,l,i),u=Nu(n,e,p,i),s=Nu(n,e,c,o),t=Nu(n,e,f,o),r=a.isBound&&u.isBound,l=a.isBound||u.isBound,p=s.isBound&&t.isBound,i=s.isBound||t.isBound,c=nu(a.offset,u.offset),n=nu(s.offset,t.offset),f=!(e=[0,0]),{isAllBound:Math.abs(n)<Math.abs(c)?(e=[c,0],f=l,r):(e=[0,n],f=i,p),isVerticalBound:l,isHorizontalBound:i,isBound:f,offset:e})}(a,t),n=e.isBound,r=e.offset,i=e.isVerticalBound,e=e.isHorizontalBound,o=t.multiple,t=as({datas:s,distX:r[0],distY:r[1]}).map(function(t,e){return t*(o[e]?2/o[e]:0)});return{sign:o,isBound:n,isVerticalBound:i,isHorizontalBound:e,isSnap:!1,offset:t}})}function ju(t,e,n){var r,i,o,a,s,u,t=Wu(t,Yu(t,e,[0,0],!1).map(function(t){return X(X({},t),{multiple:t.multiple.map(function(t){return 2*Math.abs(t)})})}),n),e=_u(t,0),t=_u(t,1),c=0,l=0,f=e.isVerticalBound||t.isVerticalBound,p=e.isHorizontalBound||t.isHorizontalBound;return(f||p)&&(n={datas:n,distX:-e.offset[0],distY:-t.offset[1]},e=n.datas,t=n.distX,n=n.distY,i=e.beforeMatrix,o=e.matrix,a=e.is3d,s=e.startDragBeforeDist,u=e.startDragDist,e=e.absoluteOrigin,a=a?4:3,c=(i=T(B(r?i:o,J(r?s:u,[t,n]),a),e))[0],l=i[1]),{vertical:{isBound:f,offset:c},horizontal:{isBound:p,offset:l}}}function Yu(t,l,e,n){var r,i,t=t.state,f=Gs(t.allMatrix,100,100,t.is3d?4:3),p=H(f,[0,0]);return t=n,n=[],r=(e=e)[0],i=e[1],r&&i?n.push([[0,2*i],e,[-r,i]],[[2*r,0],e,[r,-i]]):r?(n.push([[2*r,0],[r,1],[r,-1]]),t&&n.push([[0,-1],[r,-1],[-r,-1]],[[0,1],[r,1],[-r,1]])):i?(n.push([[0,2*i],[1,i],[-1,i]]),t&&n.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):n.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),n.map(function(t){var e,n,r=t[0],i=t[1],t=t[2],o=[H(f,i),H(f,t)],a=(u=(a=o)[0],s=(a=a[1])[0]-u[0],a=a[1]-u[1],Math.abs(s)<A&&(s=0),Math.abs(a)<A&&(a=0),n=e=c=0,n=s?a?(c=-a/s)*u[0]-u[e=1]:-u[e=1]:(c=-1,u[0]),[c,e,n].map(function(t){return N(t,A)})),s=Au(p,o),u=s.vertical,c=s.horizontal;return{multiple:r,centerSign:Iu(p,o)<=0,verticalSign:u,horizontalSign:c,lineConstants:a,line:[H(l,i),H(l,t)]}})}function qu(t,n,r,e){t=e?t.map(function(t){return Oe(t,e)}):t;return[[t[0],t[1]],[t[1],t[3]],[t[3],t[2]],[t[2],t[0]]].some(function(t){var e=Iu(r,t)<=0;return!ku(n,t,e)})}function Xu(t,a,e,n,r){var t=t.props.innerBounds,s=r*Math.PI/180;if(!t)return[];var r=t.left,i=t.top,o=t.width,t=t.height,u=r-n[0],r=r+o-n[0],o=i-n[1],i=i+t-n[1],c=[[u,o],[r,o],[u,i],[r,i]],l=H(e,[0,0]);if(!qu(e,c,l,0))return[];var f=[],p=c.map(function(t){return[Is(t),F([0,0],t)]});return[[e[0],e[1]],[e[1],e[3]],[e[3],e[2]],[e[2],e[0]]].forEach(function(t){var e,n,r,i=F([0,0],(r=(n=t)[0],e=(n=n[1])[0]-r[0],n=n[1]-r[1],e?n?[-(e=-(n/=e)*r[0]+r[1])/(n+1/n),e/(n*n+1)]:[0,r[1]]:[r[0],0])),o=(n=(e=t)[0],r=(e=e[1])[0]-n[0],e=e[1]-n[1],r?e?(e/=r,Math.abs((-e*n[0]+n[1])/Math.sqrt(Math.pow(e,2)+1))):Math.abs(n[1]):Math.abs(n[0]));f.push.apply(f,p.filter(function(t){t=t[0];return t&&o<=t}).map(function(t){var e=t[0],t=t[1],e=Math.acos(e?o/e:0);return[s+(t+e)-i,s+(t-e)-i]}).reduce(function(t,e){return t.push.apply(t,e),t},[]).filter(function(t){return!qu(a,c,l,t)}).map(function(t){return N(180*t/Math.PI,La)}))}),f}function Hu(t,e,n){var t=t||{},r=t.position,i=t.left,o=t.top,a=t.right,t=t.bottom,r={position:void 0===r?"client":r,left:void 0===i?-1/0:i,top:void 0===o?-1/0:o,right:void 0===a?1/0:a,bottom:void 0===t?1/0:t};return{vertical:Vu(r,e,!0),horizontal:Vu(r,n,!1)}}function Lu(t,e){var n=t.state,r=n.containerClientRect,i=r.clientHeight,o=r.clientWidth,a=r.clientLeft,r=r.clientTop,n=n.snapOffset,s=n.left,u=n.top,c=n.right,n=n.bottom,e=e||t.props.bounds||{},t="css"===(e.position||"client"),l=e.left,f=e.top,p=e.right,p=void 0===p?t?-1/0:1/0:p,e=e.bottom,e=void 0===e?t?-1/0:1/0:e;return t&&(p=o+c-s-p,e=i+n-u-e),{left:(void 0===l?-1/0:l)+s-a,right:p+s-a,top:(void 0===f?-1/0:f)+u-r,bottom:e+u-r}}function Vu(t,e,n){var r=t[n?"left":"top"],t=t[n?"right":"bottom"],n=Math.min.apply(Math,e),e=Math.max.apply(Math,e),i=[];return n<r+1&&i.push({isBound:!0,offset:n-r,pos:r}),t-1<e&&i.push({isBound:!0,offset:e-t,pos:t}),i.length||i.push({isBound:!1,offset:0,pos:0}),i.sort(function(t,e){return Math.abs(e.offset)-Math.abs(t.offset)})}function Uu(t,e,n){return(n?t.map(function(t){return Oe(t,n)}):t).some(function(t){return t[0]<e.left&&.1<Math.abs(t[0]-e.left)||t[0]>e.right&&.1<Math.abs(t[0]-e.right)||t[1]<e.top&&.1<Math.abs(t[1]-e.top)||t[1]>e.bottom&&.1<Math.abs(t[1]-e.bottom)})}function $u(t,s,e,n,r){if(!t.props.bounds)return[];var u=r*Math.PI/180,r=Lu(t),t=r.left,i=r.top,o=r.right,r=r.bottom,t=t-n[0],o=o-n[0],i=i-n[1],r=r-n[1],c={left:t,top:i,right:o,bottom:r};if(!Uu(e,c,0))return[];var l=[];return[[t,0],[o,0],[i,1],[r,1]].forEach(function(t){var o=t[0],a=t[1];e.forEach(function(t){var n,e,r,i=F([0,0],t);l.push.apply(l,(e=o,r=a,t=Is(n=t),[t=Math.sqrt(t*t-e*e)||0,-t].sort(function(t,e){return Math.abs(t-n[r?0:1])-Math.abs(e-n[r?0:1])}).map(function(t){return F([0,0],r?[t,e]:[e,t])}).map(function(t){return u+t-i}).filter(function(t){return!Uu(s,c,t)}).map(function(t){return N(180*t/Math.PI,La)})))})}),l}function Zu(t,e){return t=X(X({},t),{classNames:nt([L("line","guideline",t.direction)],t.classNames,!0).filter(function(t){return t}),size:t.size||"".concat(t.sizeValue,"px"),pos:t.pos||t.posValue.map(function(t){return"".concat(N(t,.1),"px")})}),e=e,n=t.direction,r=t.classNames,i=t.size,o=t.pos,a=t.zoom,t=t.key,s=(n="horizontal"===n)?"Y":"X",e.createElement("div",{key:t,className:r.join(" "),style:((e={})[n?"width":"height"]="".concat(i),e.transform="translate(".concat(o[0],", ").concat(o[1],") translate").concat(s,"(-50%) scale").concat(s,"(").concat(a,")"),e)});var n,r,i,o,a,s}function Ku(t,i,e,o,a,s,u,c){var l=t.props.zoom;return e.map(function(t,e){var n=t.type,t=t.pos,r=[0,0];return r[u]=o,r[u?0:1]=-a+t,Zu({key:"".concat(i,"TargetGuideline").concat(e),classNames:[L("target","bold",n)],posValue:r,sizeValue:s,zoom:l,direction:i},c)})}function Ju(t,o,e,a,n,s){var t=t.props,u=t.zoom,r=t.isDisplayInnerSnapDigit,i="horizontal"===o?xu:Eu,c=n[i.start],l=n[i.end];return e.filter(function(t){var e=t.hide,t=t.elementRect;if(e)return!1;if(r&&t){e=t.rect;if(e[i.start]<=c&&l<=e[i.end])return!1}return!0}).map(function(t,e){var n=t.pos,r=t.size,i=t.element,t=t.className,n=[-a[0]+n[0],-a[1]+n[1]];return Zu({key:"".concat(o,"-default-guideline-").concat(e),classNames:i?[L("bold"),t]:[t],direction:o,posValue:n,sizeValue:r,zoom:u},s)})}function Qu(t,e,n,r,i,o,a,s){var t=t.props,u=t.snapDigit,u=void 0===u?0:u,c=t.isDisplaySnapDigit,c=void 0===c||c,l=t.snapDistFormat,l=void 0===l?function(t,e){return t}:l,t=t.zoom,f="horizontal"===e?"X":"Y",p="vertical"===e?"height":"width",i=Math.abs(i),c=c?parseFloat(i.toFixed(u)):0;return s.createElement("div",{key:"".concat(e,"-").concat(n,"-guideline-").concat(r),className:L("guideline-group",e),style:((u={left:"".concat(o[0],"px"),top:"".concat(o[1],"px")})[p]="".concat(i,"px"),u)},Zu({direction:e,classNames:[L(n),a],size:"100%",posValue:[0,0],sizeValue:i,zoom:t},s),s.createElement("div",{className:L("size-value","gap"),style:{transform:"translate".concat(f,"(-50%) scale(").concat(t,")")}},0<c?l(c,e):""))}function tc(y,e,M,D,C){var n=y.props.isDisplayInnerSnapDigit,R=[];return["vertical","horizontal"].forEach(function(a){var u,c,i,o,s,l,f,p,d,h,g,t=e.filter(function(t){return t.type===a}),v="vertical"===a?1:0,m=v?0:1,t=(t=t,c=n,p="vertical"===(u=a)?1:0,h=D[(d=(f="vertical"===u?0:1)?xu:Eu).start],g=D[d.end],o=function(t){return t.pos[f]},s=[],l=[],(i=t).forEach(function(t,e){var e=o(t,e,i),n=l.indexOf(e),r=s[n]||[];-1===n&&(l.push(e),s.push(r)),r.push(t)}),s.map(function(t){var a=[],s=[];return t.forEach(function(t){var e,n,r,i=t.element,o=t.elementRect.rect;o[d.end]<h?a.push(t):g<o[d.start]?s.push(t):o[d.start]<=h&&g<=o[d.end]&&c&&(e=t.pos,n={element:i,rect:X(X({},o),((n={})[d.end]=o[d.start],n))},o={element:i,rect:X(X({},o),((i={})[d.start]=o[d.end],i))},i=[0,0],(r=[0,0])[f]=e[f],r[p]=e[p],i[f]=e[f],i[p]=e[p]+t.size,a.push({type:u,pos:r,size:0,elementRect:n}),s.push({type:u,pos:i,size:0,elementRect:o}))}),a.sort(function(t,e){return e.pos[p]-t.pos[p]}),s.sort(function(t,e){return t.pos[p]-e.pos[p]}),{total:t,start:a,end:s,inner:[]}})),b=v?Eu:xu,x=v?xu:Eu,E=D[b.start],S=D[b.end];t.forEach(function(t){var e=t.total,n=t.start,r=t.end,t=t.inner,o=M[m]+e[0].pos[m]-D[x.start],i=D;n.forEach(function(t){var e,n=t.elementRect.rect,r=i[b.start]-n[b.end];0<r&&((e=[0,0])[v]=M[v]+i[b.start]-E-r,e[m]=o,R.push(Qu(y,a,"dashed",R.length,r,e,t.className,C))),i=n}),i=D,r.forEach(function(t){var e,n=t.elementRect.rect,r=n[b.start]-i[b.end];0<r&&((e=[0,0])[v]=M[v]+i[b.end]-E,e[m]=o,R.push(Qu(y,a,"dashed",R.length,r,e,t.className,C))),i=n}),t.forEach(function(t){var e=t.elementRect.rect,n=E-e[b.start],e=e[b.end]-S,r=[0,0],i=[0,0];r[v]=M[v]-n,r[m]=o,i[v]=M[v]+S-E,i[m]=o,R.push(Qu(y,a,"dashed",R.length,n,r,t.className,C)),R.push(Qu(y,a,"dashed",R.length,e,i,t.className,C))})})}),R}function ec(t,e,n,r,i){o=t,n=n,r=r,a=(u=e)[0]-o[0],s=u[1]-o[1],Math.abs(a)<A&&(a=0),Math.abs(s)<A&&(s=0);var o=a?s?(s/=a,a=o[1]-s*o[0],r?[n,s*(u[0]+n)+a-u[1]]:[(u[1]+n-a)/s-u[0],n]):r?[n,0]:[0,0]:r?[0,0]:[0,n];if(!o)return{isOutside:!1,offset:[0,0]};var a=D(t,e),s=D(o,t),u=D(o,e),r=a<s||a<u,n=as({datas:i,distX:o[0],distY:o[1]});return{offset:[n[0],n[1]],isOutside:r}}function nc(t,e){return t.isBound?t.offset:e.isSnap?Pu(e).offset:0}function rc(t,e,n,r,i,o){if(!Su(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var a,s,u,c,l=Ls(o.absolutePoses,[e,n]),f=Ts(l),p=f.left,d=f.right,h=f.top,f=f.bottom,g={horizontal:l.map(function(t){return t[1]}),vertical:l.map(function(t){return t[0]})},i=ic(t,i,Mu(yu(t.props.snapDirections),{left:p,right:d,top:h,bottom:f,center:(p+d)/2,middle:(h+f)/2}),g),p=i.vertical,d=i.horizontal,h=ju(t,l,o),f=h.vertical,g=h.horizontal,i=p.isSnap,t=d.isSnap,l=p.isBound||f.isBound,o=d.isBound||g.isBound,h=nu(p.offset,f.offset),p=nu(d.offset,g.offset),v=(f=r,d=[l,o],g=[i,t],r=[h,p],s=(h=[e,n])[0],u=h[1],h=d[0],d=d[1],p=g[0],g=g[1],e=r[0],r=r[1],n=-e,c=-r,f&&s&&u?(c=n=0,v=[],h&&d?v.push([0,r],[e,0]):h?v.push([e,0]):d?v.push([0,r]):p&&g?v.push([0,r],[e,0]):p?v.push([e,0]):g&&v.push([0,r]),v.length&&(v.sort(function(t,e){return Is(T([s,u],t))-Is(T([s,u],e))}),(p=v[0])[0]&&Math.abs(s)>A?(n=-p[0],c=u*Math.abs(s+n)/Math.abs(s)-u):p[1]&&Math.abs(u)>A&&(g=u,c=-p[1],n=s*Math.abs(u+c)/Math.abs(g)-s),f&&d&&h&&(Math.abs(n)>A&&Math.abs(n)<Math.abs(e)?(n*=a=Math.abs(e)/Math.abs(n),c*=a):Math.abs(c)>A&&Math.abs(c)<Math.abs(r)?(n*=a=Math.abs(r)/Math.abs(c),c*=a):(n=nu(-e,n),c=nu(-r,c))))):(n=s||h?-e:0,c=u||d?-r:0),[n,c]);return[{isBound:l,isSnap:i,offset:v[0]},{isBound:o,isSnap:t,offset:v[1]}]}function ic(t,e,n,r){var r=Hu(Lu(t),(r=void 0===r?n:r).vertical,r.horizontal),i=r.horizontal,r=r.vertical,e=e?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:wu(t,n.vertical,n.horizontal),t=e.horizontal,n=e.vertical,e=nc(i[0],t),o=nc(r[0],n),a=Math.abs(e),s=Math.abs(o);return{horizontal:{isBound:i[0].isBound,isSnap:t.isSnap,snapIndex:t.index,offset:e,dist:a,bounds:i,snap:t},vertical:{isBound:r[0].isBound,isSnap:n.isSnap,snapIndex:n.index,offset:o,dist:s,bounds:r,snap:n}}}function oc(t,e,n,r,i){var e=Hu(e,n,r),o=e.horizontal,e=e.vertical,t=Ou(t,n,r,i),n=t.horizontal,r=t.vertical,i=nc(o[0],n),t=nc(e[0],r),a=Math.abs(i),s=Math.abs(t);return{horizontal:{isBound:o[0].isBound,isSnap:n.isSnap,snapIndex:n.index,offset:i,dist:a,bounds:o,snap:n},vertical:{isBound:e[0].isBound,isSnap:r.isSnap,snapIndex:r.index,offset:t,dist:s,bounds:e,snap:r}}}function ac(M,D,t,C,R,w){return t.map(function(t){var e=t[0],t=t[1],n=H(D,e),r=H(D,t),i=C?(l=R,u=function(t,e,n){var r,i,o=(t=Lu(t)).left,a=t.top,s=t.right,t=t.bottom,u=n[0],c=n[1],l=(e=T(n,e))[0],e=e[1],f=(Math.abs(l)<La&&(l=0),0<(e=Math.abs(e)<La?0:e)),p=0<l,d={isBound:!1,offset:0,pos:0},h={isBound:!1,offset:0,pos:0};return 0===l&&0===e||(0===l?f?t<c&&(h.pos=t,h.offset=c-t):c<a&&(h.pos=a,h.offset=c-a):0===e?p?s<u&&(d.pos=s,d.offset=u-s):u<o&&(d.pos=o,d.offset=u-o):(e=n[1]-(n=e/l)*u,r=l=0,i=!1,p&&s<=u?(l=n*s+e,r=s,i=!0):!p&&u<=o&&(l=n*o+e,r=o,i=!0),(i=i&&(l<a||t<l)?!1:i)||(f&&t<=c?(r=((l=t)-e)/n,i=!0):!f&&c<=a&&(r=((l=a)-e)/n,i=!0)),i&&(d.isBound=!0,d.pos=r,d.offset=u-r,h.isBound=!0,h.pos=l,h.offset=c-l))),{vertical:d,horizontal:h}}(o=M,c=n,a=r),i=u.horizontal,u=u.vertical,l=l?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,e,n){var r=n[0],i=n[1],o=e[0],a=e[1],s=(e=T(n,e))[0],u=0<(e=e[1]),c=0<s,s=su(s),e=su(e),l={isSnap:!1,offset:0,pos:0},f={isSnap:!1,offset:0,pos:0};if(0===s&&0===e)return{vertical:l,horizontal:f};var p,d=(t=wu(t,s?[r]:[],e?[i]:[])).vertical,t=t.horizontal;d.posInfos.filter(function(t){t=t.pos;return c?o<=t:t<=o}),t.posInfos.filter(function(t){t=t.pos;return u?a<=t:t<=a}),d.isSnap=0<d.posInfos.length,t.isSnap=0<t.posInfos.length;var h=(d=Pu(d)).isSnap,d=d.guideline,g=(t=Pu(t)).isSnap,t=t.guideline,v=g?t.pos[1]:0,d=h?d.pos[0]:0;return 0===s?g&&(f.isSnap=!0,f.pos=t.pos[1],f.offset=i-f.pos):0===e?h&&(l.isSnap=!0,l.pos=d,l.offset=r-d):(n=n[1]-(t=e/s)*r,s=e=0,p=!1,h?(e=t*(s=d)+n,p=!0):g&&(s=((e=v)-n)/t,p=!0),p&&(l.isSnap=!0,l.pos=s,l.offset=r-s,f.isSnap=!0,f.pos=e,f.offset=i-e)),{vertical:l,horizontal:f}}(o,c,a),o=l.horizontal,c=l.vertical,a=sc(i,o),l=sc(u,c),s=Math.abs(a),f=Math.abs(l),{horizontal:{isBound:i.isBound,isSnap:o.isSnap,offset:a,dist:s},vertical:{isBound:u.isBound,isSnap:c.isSnap,offset:l,dist:f}}):ic(M,R,{vertical:[r[0]],horizontal:[r[1]]}),o=i.horizontal,a=o.offset,s=o.isBound,u=o.isSnap,c=i.vertical,l=c.offset,f=c.isBound,p=c.isSnap,d=T(t,e);if(!l&&!a)return{isBound:f||s,isSnap:p||u,sign:d,offset:[0,0]};E=i,g=C,h=F(h=n,S=r)/Math.PI*180,y=(S=E.vertical).isBound,v=S.isSnap,S=S.dist,m=(E=E.horizontal).isBound,b=E.isSnap,x=(h=h%180)<3||177<h,h=87<h&&h<93;var h,g,v,m,b,x,E=E.dist<S&&(y||v&&!h&&(!g||!x))?"vertical":!m&&(!b||x||g&&h)?"":"horizontal";if(!E)return{sign:d,isBound:!1,isSnap:!1,offset:[0,0]};var S="vertical"==E,y=[0,0];return y=(y=C||1!==Math.abs(t[0])||1!==Math.abs(t[1])||e[0]===t[0]||e[1]===t[1]?ec(n,r,-(S?l:a),S,w).offset:as({datas:w,distX:-l,distY:-a})).map(function(t,e){return t*(d[e]?2/d[e]:0)}),{sign:d,isBound:S?f:s,isSnap:S?p:u,offset:y}})}function sc(t,e){return t.isBound?t.offset:e.isSnap?e.offset:0}function uc(t){var e,n,r,i,o=t.state;o.guidelines&&o.guidelines.length||(r=t.state.container,i=t.props.snapContainer||r,e=o.containerClientRect,n={left:0,top:0,bottom:0,right:0},r!==i&&(r=cu(i,!0))&&(r=fu(o,[(i=Xs(r)).left-e.left,i.top-e.top]),i=fu(o,[i.right-e.right,i.bottom-e.bottom]),n.left=N(r[0],1e-5),n.top=N(r[1],1e-5),n.right=N(i[0],1e-5),n.bottom=N(i[1],1e-5)),o.snapOffset=n,o.guidelines=Ru(t),o.enableSnap=!0)}function cc(t,e,n,r,i,o){t=Gs(t,e,n,o?4:3);return Ls(t,T(i,H(t,r)))}function lc(t,e,n,r,i,o){var a,s,u,c,l=o.fixedDirection,l=(a=n,s=l,c=[],r?(1!==Math.abs(s[0])||1!==Math.abs(s[1])?c.push([s,[-1,-1]],[s,[-1,1]],[s,[1,-1]],[s,[1,1]]):c.push([s,[a[0],-a[1]]],[s,[-a[0],a[1]]]),c.push([s,a])):a[0]&&a[1]||!a[0]&&!a[1]?(u=a[0]?a:[1,1],[1,-1].forEach(function(e){[1,-1].forEach(function(t){t=[e*u[0],t*u[1]];s[0]===t[0]&&s[1]===t[1]||c.push([s,t])})})):a[0]?(1===Math.abs(s[0])?[1]:[1,-1]).forEach(function(t){c.push([[s[0],-1],[t*a[0],-1]],[[s[0],0],[t*a[0],0]],[[s[0],1],[t*a[0],1]])}):a[1]&&(1===Math.abs(s[1])?[1]:[1,-1]).forEach(function(t){c.push([[-1,s[1]],[-1,t*a[1]]],[[0,s[1]],[0,t*a[1]]],[[1,s[1]],[1,t*a[1]]])}),c),n=Yu(t,e,n,r),e=nt(nt([],ac(t,e,l,r,i,o),!0),Wu(t,n,o),!0),l=_u(e,0),r=_u(e,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:r.isBound,offset:r.offset[1]}}}function fc(t,e,n,r,i,o,a,s){for(var u,c,l,f,p,d,h,g,v,m,b,x,E,S,y,M,I,D,C,R=Vs(t.state),k=t.props.keepRatio,w=0,O=0,z=0;z<2;++z){var P=lc(t,e(w,O),i,k,a,s),B=P.width,P=P.height,G=B.isBound,T=P.isBound,_=B.offset,A=P.offset;if(1===z&&(G||(_=0),T||(A=0)),0===z&&a&&!G&&!T)return[0,0];k&&(B=Math.abs(_)*(n?1/n:1),P=Math.abs(A)*(r?1/r:1),(G&&T?B<P:T||!G&&B<P)?_=n*A/r:A=r*_/n),w+=_,O+=A}return i[0]&&i[1]&&(h=t,g=R,v=o,m=s,y=[-(R=i)[0],-R[1]],M=(o=h.state).width,I=o.height,o=h.props.bounds,C=D=1/0,o&&(h=[[R[0],-R[1]],[-R[0],R[1]]],R=o.left,b=void 0===R?-1/0:R,R=o.top,x=void 0===R?-1/0:R,R=o.right,E=void 0===R?1/0:R,R=o.bottom,S=void 0===R?1/0:R,h.forEach(function(t){var e,n,r=t[0]!==y[0],i=t[1]!==y[1],t=H(g,t),o=360*F(v,t)/Math.PI;i&&(e=t.slice(),(Math.abs(o-360)<2||Math.abs(o-180)<2)&&(e[1]=v[1]),n=(i=ec(v,e,(v[1]<t[1]?S:x)-t[1],!1,m)).offset[1],i=i.isOutside,isNaN(n)||(C=I+(i?1:-1)*Math.abs(n))),r&&(e=t.slice(),(Math.abs(o-90)<2||Math.abs(o-270)<2)&&(e[0]=v[0]),n=(i=ec(v,e,(v[0]<t[0]?E:b)-t[0],!0,m)).offset[0],r=i.isOutside,isNaN(n)||(D=M+(r?1:-1)*Math.abs(n)))})),R=(o={maxWidth:D,maxHeight:C}).maxWidth,h=o.maxHeight,o=t,u=e(w,O).map(function(t){return t.map(function(t){return N(t,Ha)})}),c=n+w,l=r+O,R=R,h=h,p=a,d=s,u=H(u,f=i),p=(o=ic(o,p,{vertical:[u[0]],horizontal:[u[1]]})).horizontal.offset,w+=_=(p=(u=o.vertical.offset)||p?(d=(o=as({datas:d,distX:-u,distY:-p}))[0],u=o[1],[Math.min(R||1/0,c+f[0]*d)-c,Math.min(h||1/0,l+f[1]*u)-l]):[0,0])[0],O+=A=p[1]),[w,O]}function pc(t,o,e,n,a){if(!Su(t,"scalable"))return[0,0];var s=a.startOffsetWidth,u=a.startOffsetHeight,c=a.fixedPosition,l=a.fixedDirection,f=a.is3d,t=fc(t,function(t,e){return cc((n=a,t=J(o,[t/s,e/u]),e=n.transformOrigin,r=n.offsetMatrix,i=n.is3d?4:3,us(r,K(n.targetMatrix,Ge(t,i),i),e,i)),s,u,l,c,f);var n,r,i},s,u,e,c,n,a);return[t[0]/s,t[1]/u]}function dc(t){var e=[];return t.forEach(function(t){t.guidelineInfos.forEach(function(t){t=t.guideline;-1<e.indexOf(t)||e.push(t)})}),e}function hc(t,e,n,r,i,o){o=Hu(Lu(t,o),e,n),e=o.vertical,n=o.horizontal,e.forEach(function(t){t.isBound&&r.push({type:"bounds",pos:t.pos})}),n.forEach(function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}),o=function(t){if(!(n=t.props.innerBounds))return{vertical:[],horizontal:[]};var e=t.getRect(),a=H(e=[e.pos1,e.pos2,e.pos3,e.pos4],[0,0]),s=n.left,u=n.top,c=n.width,l=n.height,f=[[s,u],[s,u+l]],p=[[s,u],[s+c,u]],d=[[s+c,u],[s+c,u+l]],h=[[s,u+l],[s+c,u+l]],n=Yu(t,e,[0,0],!1),g=[],v=[],m={top:!1,bottom:!1,left:!1,right:!1};return n.forEach(function(t){var e=t.line,t=t.lineConstants,n=Au(a,e),r=n.horizontal,n=n.vertical,i=Nu(e,t,p,n,1,!0),n=Nu(e,t,h,n,1,!0),o=Nu(e,t,f,r,1,!0),e=Nu(e,t,d,r,1,!0);i.isBound&&!m.top&&(g.push(u),m.top=!0),n.isBound&&!m.bottom&&(g.push(u+l),m.bottom=!0),o.isBound&&!m.left&&(v.push(s),m.left=!0),e.isBound&&!m.right&&(v.push(s+c),m.right=!0)}),{horizontal:g,vertical:v}}(t),e=o.vertical,n=o.horizontal;e.forEach(function(n){0<=gt(r,function(t){var e=t.type,t=t.pos;return"bounds"===e&&t===n})||r.push({type:"bounds",pos:n})}),n.forEach(function(n){0<=gt(i,function(t){var e=t.type,t=t.pos;return"bounds"===e&&t===n})||i.push({type:"bounds",pos:n})})}var gc=uu("",["resizable","scalable"]),Wo={name:"snappable",dragRelation:"strong",props:{snappable:[Boolean,Array],snapContainer:Object,snapDirections:[Boolean,Object],elementSnapDirections:[Boolean,Object],snapGap:Boolean,snapGridWidth:Number,snapGridHeight:Number,isDisplaySnapDigit:Boolean,isDisplayInnerSnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}\n.guideline {\n    pointer-events: none;\n    z-index: 2;\n}\n.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}\n.guideline-group {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.guideline-group .size-value {\n    position: absolute;\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.guideline-group.horizontal .size-value {\n    transform-origin: 50% 100%;\n    transform: translateX(-50%);\n    left: 50%;\n    bottom: 5px;\n}\n.guideline-group.vertical .size-value {\n    transform-origin: 0% 50%;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.guideline.gap {\n    background: #f55;\n}\n.size-value.gap {\n    color: #f55;\n}\n"],render:function(t,e){var n=t.state,r=n.top,i=n.left,o=n.pos1,a=n.pos2,s=n.pos3,u=n.pos4,c=n.snapRenderInfo;if(!c||!Su(t,""))return[];n.guidelines=Ru(t);var h,g,v,m,b,x,n=Math.min(o[0],a[0],s[0],u[0]),o=Math.min(o[1],a[1],s[1],u[1]),a=c.externalPoses||[],s=Vs(t.state),l=[],f=[],p=[],d=[],u=[],E=Ts(s),S=E.width,y=E.height,M=E.top,D=E.left,C=E.bottom,E=E.right,R={left:D,right:E,top:M,bottom:C,center:(D+E)/2,middle:(M+C)/2},w=0<a.length,a=w?Ts(a):{},s=(c.request||(c.direction&&u.push(Gu(t,s,c.direction)),c.snap&&(s=Ts(s),c.center&&(s.middle=(s.top+s.bottom)/2,s.center=(s.left+s.right)/2),u.push(zu(t,s,1))),w&&(c.center&&(a.middle=(a.top+a.bottom)/2,a.center=(a.left+a.right)/2),u.push(zu(t,a,1))),u.forEach(function(t){var e=t.vertical.posInfos,t=t.horizontal.posInfos;l.push.apply(l,e.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),f.push.apply(f,t.filter(function(t){return t.guidelineInfos.some(function(t){return!t.guideline.hide})}).map(function(t){return{type:"snap",pos:t.pos}})),p.push.apply(p,dc(e)),d.push.apply(d,dc(t))})),hc(t,[D,E],[M,C],l,f),w&&hc(t,[a.left,a.right],[a.top,a.bottom],l,f,c.externalBounds),nt(nt([],p,!0),d,!0)),u=s.filter(function(t){return t.element&&!t.gapRects}),D=s.filter(function(t){return t.gapRects});return it(t,"onSnap",{guidelines:s.filter(function(t){return!t.element}),elements:u,gaps:D},!0),nt(nt(nt(nt(nt(nt([],tc(t,u,[n,o],R,e),!0),(h=t,g=D,v=[n,o],m=R,b=e,x=[],["horizontal","vertical"].forEach(function(e){var t=g.filter(function(t){return t.type===e}),a="vertical"===e?0:1,s=a?0:1,u=a?Eu:xu,c=a?xu:Eu,l=m[u.start],f=m[u.end],p=m[c.start],d=m[c.end];t.forEach(function(t){var n=t.gap,e=t.gapRects,r=t.className,t=Math.max.apply(Math,nt([p],e.map(function(t){return t.rect[c.start]}),!1)),i=Math.min.apply(Math,nt([d],e.map(function(t){return t.rect[c.end]}),!1)),o=(t+i)/2;t!==i&&o!=(p+d)/2&&e.forEach(function(t){var t=t.rect,e=[v[0],v[1]];if(t[u.end]<l)e[a]+=t[u.end]-l;else{if(!(f<t[u.start]))return;e[a]+=t[u.start]-l-n}e[s]+=o-p,x.push(Qu(h,a?"vertical":"horizontal","gap",x.length,n,e,r,b))})})}),x),!0),Ju(t,"horizontal",d,[i,r],R,e),!0),Ju(t,"vertical",p,[i,r],R,e),!0),Ku(t,"horizontal",f,n,r,S,0,e),!0),Ku(t,"vertical",l,o,i,y,1,e),!0)},dragStart:function(t,e){t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},uc(t)},drag:function(t){t.state.guidelines=Ru(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t,e){return!(!gc(t,e)&&!Rc(t,e))||(!e.isRequest&&e.inputEvent?P(e.inputEvent.target,L("snap-control")):void 0)},dragControlStart:function(t){t.state.snapRenderInfo=null,uc(t)},dragControl:function(t){this.drag(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,e){this.dragStart(t,e)},dragGroup:function(t){this.drag(t)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t){t.state.snapRenderInfo=null,uc(t)},dragGroupControl:function(t){this.drag(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){t=t.state;t.enableSnap=!1,t.guidelines=[],t.snapRenderInfo=null,t.elementRects=[]}};function vc(t,a,e,s){var n=t.state,u=n.renderPoses,c=n.rotation,n=n.direction,l=Ws(t.props,a).zoom,f=0<n?1:-1,p=c/Math.PI*180,d={},n=t.renderState,h=(n.renderDirectionMap||(n.renderDirectionMap={}),n.renderDirectionMap);return e.forEach(function(t){t=t.dir;d[t]=!0}),e.map(function(t){var e=t.data,n=t.classNames,t=t.dir,r=Za[t];if(!r||!d[t])return null;h[t]=!0;var i=(N(p,15)+f*Ka[t]+720)%180,o={};return xt(e).forEach(function(t){o["data-".concat(t)]=e[t]}),s.createElement("div",X({className:L.apply(void 0,nt(["control","direction",t,a],n,!1)),"data-rotation":i,"data-direction":t},o,{key:"direction-".concat(t),style:Ns.apply(void 0,nt([c,l],r.map(function(t){return u[t]}),!1))}))})}function mc(t,e,n,r){var i=Ws(t.props,n).renderDirections,e=void 0===i?e:i;return e?vc(t,n,(!0===e?Ua:e).map(function(t){return{data:{},classNames:[],dir:t}}),r):[]}function bc(t,e,n,r,i,o){for(var a=[],s=6;s<arguments.length;s++)a[s-6]=arguments[s];var u=F(n,r),c=e?N(u/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line".concat(o),className:L.apply(void 0,nt(["line","direction",e?"edge":"",e],a,!1)),"data-rotation":c,"data-line-index":o,"data-direction":e,style:Fs(n,r,i,u)})}function xc(i,o,t,a,s){return(!0===t?Va:t).map(function(t,e){var n=Za[t],r=n[0],n=n[1];if(null!=n)return bc(i,t,a[r],a[n],s,"".concat(o,"Edge").concat(e),o)}).filter(Boolean)}function Ec(r){return function(t,e){var n=Ws(t.props,r).edge;return n&&(!0===n||n.length)?nt(nt([],xc(e,r,n,t.state.renderPoses,t.props.zoom),!0),mc(t,["nw","ne","sw","se"],r,e),!0):Sc(t,r,e)}}function Sc(t,e,n){return mc(t,Ua,e,n)}function yc(t,e,n,r,i){var o=t.state,a=o.is3d?4:3,s=e.origin,t=V(t.state.rootMatrix,T([s[0],s[1]],[o.left,o.top]),a),s=J([i.left,i.top],t);e.startAbsoluteOrigin=s,e.prevDeg=F(s,[n,r])/Math.PI*180,e.defaultDeg=e.prevDeg,e.prevSnapDeg=0,e.loop=0,e.startDist=D(s,[n,r])}function Mc(t,e,n){var r=n.defaultDeg,i=n.prevDeg,o=i%360,i=Math.floor(i/360),o=(o<0&&(o+=360),t<o&&270<o&&t<90?++i:o<t&&o<90&&270<t&&--i,e*(360*i+t-r));return n.prevDeg=r+o,o}function Dc(t,e,n,r){return Mc(F(r.startAbsoluteOrigin,[t,e])/Math.PI*180,n,r)}function Cc(t,e,n,r,i,o){var a=t.props.throttleRotate,a=void 0===a?0:a,s=n.prevSnapDeg,o=N(i+(r=o?function(t,e,n,r){if(!Su(t,"rotatable"))return r;var i=e.pos1,o=e.pos2,a=e.pos3,e=e.pos4,s=r*Math.PI/180,o=(i=[i,o,a,e].map(function(t){return T(t,n)})).map(function(t){return Oe(t,s)});return(a=nt(nt([],$u(t,i,o,n,r),!0),Xu(t,i,o,n,r),!0)).sort(function(t,e){return Math.abs(t-r)-Math.abs(e-r)}),a.length?a[0]:r}(t,e,n.origin,r):r),a),t=o-i;return[(n.prevSnapDeg=t)-s,r,o]}function Rc(t,e){if(e.isRequest)return"rotatable"===e.requestAble;var n=e.inputEvent.target;if(P(n,L("rotation-control"))||P(n,L("around-control"))||P(n,L("control"))&&P(n,L("rotatable")))return!0;e=t.props.rotationTarget;return!!e&&lu(e,!0).some(function(t){return!!t&&(n===t||n.contains(t))})}var Io=Ua.map(function(t){var e="",n="",r="center",i="center";return-1<t.indexOf("n")&&(e="top: -20px;",i="bottom"),-1<t.indexOf("s")&&(e="top: 0px;",i="top"),-1<t.indexOf("w")&&(n="left: -20px;",r="right"),-1<t.indexOf("e")&&(n="left: 0px;",r="left"),'.around-control[data-direction*="'.concat(t,'"] {\n        ').concat(n).concat(e,"\n        transform-origin: ").concat(r," ").concat(i,";\n    }")}).join("\n"),aa=".rotation {\n    position: absolute;\n    height: 40px;\n    width: 1px;\n    transform-origin: 50% 100%;\n    height: calc(40px * var(--zoom));\n    top: auto;\n    left: 0;\n    bottom: 100%;\n    will-change: transform;\n}\n.rotation .rotation-line {\n    display: block;\n    width: 100%;\n    height: 100%;\n    transform-origin: 50% 50%;\n}\n.rotation .rotation-control {\n    border-color: #4af;\n    border-color: var(--moveable-color);\n    background:#fff;\n    cursor: alias;\n}\n.rotatable.direction.control {\n    cursor: alias;\n}\n.around-control {\n    position: absolute;\n    will-change: transform;\n    width: 20px;\n    height: 20px;\n    left: -10px;\n    top: -10px;\n    box-sizing: border-box;\n    background: transparent;\n    z-index: 8;\n    cursor: alias;\n    transform-origin: center center;\n}\n.rotatable.direction.control.move {\n    cursor: move;\n}\n".concat(Io,"\n"),oa={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number,renderDirections:Object,rotationTarget:Object,rotateAroundControls:Boolean,edge:Boolean,resolveAblesWithRotatable:Object},events:{onRotateStart:"rotateStart",onBeforeRotate:"beforeRotate",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onBeforeRotateGroup:"beforeRotateGroup",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[aa],render:function(t,e){var n=Ws(t.props,"rotatable"),r=n.rotatable,i=n.rotationPosition,o=n.zoom,a=n.renderDirections,s=n.rotateAroundControls,u=n.resolveAblesWithRotatable,n=t.state,c=n.renderPoses,n=n.direction;if(!r)return null;var l,f,p,d,h,g,v,r=function(t,e,n){var r,i,o=e[0],a=e[1],s=e[2],e=e[3];if("none"!==t)return t=(t||"top").split("-"),r=t[0],t=t[1],i=[o,a],"left"===r?i=[s,o]:"right"===r?i=[a,e]:"bottom"===r&&(i=[e,s]),o=[(i[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2],a=Ys(i,n),t&&(e="bottom"===r||"left"===r,o=i[(s="top"===t||"left"===t)&&!e||!s&&e?0:1]),[o,a]}(i,c,n),i=[];return r&&(c=r[0],n=r[1],i.push(e.createElement("div",{key:"rotation",className:L("rotation"),style:{transform:"translate(-50%) translate(".concat(c[0],"px, ").concat(c[1],"px) rotate(").concat(n,"rad)")}},e.createElement("div",{className:L("line rotation-line"),style:{transform:"scaleX(".concat(o,")")}}),e.createElement("div",{className:L("control rotation-control"),style:{transform:"translate(0.5px) scale(".concat(o,")")}})))),a&&(r=xt(u||{}),l={},r.forEach(function(e){u[e].forEach(function(t){l[t]=e})}),c=[],$(a)&&(c=a.map(function(t){var e=l[t];return{data:e?{resolve:e}:{},classNames:e?["move"]:[],dir:t}})),i.push.apply(i,vc(t,"rotatable",c,e))),s&&i.push.apply(i,(f=e,(o=(n=t).renderState).renderDirectionMap||(o.renderDirectionMap={}),p=(r=n.state).renderPoses,d=r.rotation,r=r.direction,o=o.renderDirectionMap,h=n.props.zoom,g=0<r?1:-1,v=d/Math.PI*180,xt(o).map(function(t){var e=Za[t];if(!e)return null;var n=(N(v,15)+g*Ka[t]+720)%180;return f.createElement("div",{className:L("around-control"),"data-rotation":n,"data-direction":t,key:"direction-around-".concat(t),style:Ns.apply(void 0,nt([d,h],e.map(function(t){return p[t]}),!1))})}))),i},dragControlCondition:Rc,dragControlStart:function(o,t){var a=t.datas,e=t.clientX,n=t.clientY,r=t.parentRotate,i=t.parentFlag,s=t.isPinch,u=t.isRequest,c=o.state,l=c.target,f=c.left,p=c.top,d=c.direction,h=c.beforeDirection,g=c.targetTransform,v=c.moveableClientRect,m=c.offsetMatrix,b=c.targetMatrix,x=c.allMatrix,E=c.width,S=c.height;if(!u&&!l)return!1;var y,M,D,C,R,l=o.getRect(),g=(a.rect=l,a.transform=g,a.left=f,a.top=p,function(t){a.fixedDirection=t,a.fixedPosition=ms(o,t),z&&z.setFixedDirection(t)}),w=e,O=n,p=(u||s||i?(a.beforeInfo={origin:l.beforeOrigin,prevDeg:f=r||0,defaultDeg:f,prevSnapDeg:0,startDist:0},a.afterInfo=X(X({},a.beforeInfo),{origin:l.origin}),a.absoluteInfo=X(X({},a.beforeInfo),{origin:l.origin,startValue:f})):((e=null==(p=t.inputEvent)?void 0:p.target)&&(n=e.getAttribute("data-direction")||"",(u=$a[n])&&(a.isControl=!0,a.isAroundControl=P(e,L("around-control")),a.controlDirection=u,(s=e.getAttribute("data-resolve"))&&(a.resolveAble=s),M=c.rootMatrix,i=c.renderPoses,r=v,D=16===M.length?4:3,i=i.map(function(t){return V(M,t,D)}),C=r.left,R=r.top,w=(f=H(i.map(function(t){return[t[0]+C,t[1]+R]}),u))[0],O=f[1])),a.beforeInfo={origin:l.beforeOrigin},a.afterInfo={origin:l.origin},a.absoluteInfo={origin:l.origin,startValue:l.rotation},y=g,g=function(t){var e=c.is3d?4:3,n=H([[0,0],[E,0],[0,S],[E,S]],t),r=J(be(b,e),n),i=r[0],r=r[1],i=B(m,Ee([i,r],e)),r=B(x,Ee([n[0],n[1]],e));y(t),a.beforeInfo.origin=i,a.afterInfo.origin=r,a.absoluteInfo.origin=r,yc(o,a.beforeInfo,w,O,v),yc(o,a.afterInfo,w,O,v),yc(o,a.absoluteInfo,w,O,v)}),a.startClientX=w,a.startClientY=O,a.direction=d,a.beforeDirection=h,a.startValue=0,a.datas={},ls(t,"rotate"),!1),z=!1,u=(a.isControl&&a.resolveAble&&"resizable"===a.resolveAble&&(n=o.getAble("resizable"),z=!!n&&n.dragControlStart(o,X(X({},new Qa("resizable").dragStart([0,0],t)),{parentDirection:a.controlDirection,parentFixedDirection:a.fixedDirection}))),z||(p=!!(e=o.getAble("draggable"))&&e.dragStart(o,(new Qa).dragStart([0,0],t))),g((r=(s=(s=o).state).width,i=s.height,[(s=s.transformOrigin)[0]/(r/2)-1,s[1]/(i/2)-1])),rt(o,t,X(X({set:function(t){a.startValue=t*Math.PI/180},setFixedDirection:g},cs(t)),{dragStart:p,resizeStart:z}))),f=it(o,"onRotateStart",u);return a.isRotate=!1!==f,c.snapRenderInfo={request:t.isRequest},!!a.isRotate&&u},dragControl:function(t,e){var n=e.datas,r=e.distX,i=e.distY,o=e.parentRotate,a=e.parentFlag,s=e.isPinch,u=e.groupDelta,c=n.beforeDirection,l=n.beforeInfo,f=n.afterInfo,p=n.absoluteInfo,d=n.isRotate,h=n.startValue,g=n.rect,v=n.startClientX,m=n.startClientY;if(d){ns(e,"rotate");var b,x,E,d=c*As(e.datas.beforeTransform,[50,50],100,100).direction,S=t.props.parentMoveable,y=180/Math.PI*h,h=p.startValue,M=!1,v=v+r,r=m+i;if(!a&&"parentDist"in e?(m=e.parentDist,E=x=b=m):s||a?(b=Mc(o,c,l),x=Mc(o,d,f),E=Mc(o,d,p)):(b=Dc(v,r,c,l),x=Dc(v,r,d,f),E=Dc(v,r,d,p),M=!0),it(t,"onBeforeRotate",rt(t,e,{beforeRotation:y+b,rotation:y+x,absoluteRotation:h+E,setRotation:function(t){E=b=x=t-y}},!0)),m=(i=Cc(t,g,l,b,y,M))[0],b=i[1],a=i[2],c=(o=Cc(t,g,f,x,y,M))[0],x=o[1],d=o[2],i=(l=Cc(t,g,p,E,h,M))[0],E=l[1],f=l[2],i||c||m||S)return o=rs(n,"rotate(".concat(d,"deg)"),"rotate(".concat(x,"deg)")),g=x,M=(h=n).fixedDirection,l=h.fixedPosition,u=T(J(u||[0,0],S=vs(t,"rotate(".concat(g,"deg)"),M,l,h)),n.prevInverseDist||[0,0]),n.prevInverseDist=S,n.requestValue=null,M=g=gs(t,o,u,s,e),l=D([v,r],p.startAbsoluteOrigin)-p.startDist,h=void 0,"resizable"===n.resolveAble&&(S=t.getAble("resizable").dragControl(t,X(X({},Ja(e,t.state,[e.deltaX,e.deltaY],!!s,!1,"resizable")),{resolveMatrix:!0,parentDistance:l})))&&(M=Zs(M,h=S)),it(t,"onRotate",o=rt(t,e,X(X({delta:c,dist:x,rotate:d,rotation:d,beforeDist:b,beforeDelta:m,beforeRotate:a,beforeRotation:a,absoluteDist:E,absoluteDelta:i,absoluteRotate:f,absoluteRotation:f,isPinch:!!s,resize:h},g),M))),o}},dragControlAfter:function(t,e){e.datas.requestValue},dragControlEnd:function(t,e){var n=e.datas;if(n.isRotate)return n.isRotate=!1,n=Ks(t,e,{}),it(t,"onRotateEnd",n),n},dragGroupControlCondition:Rc,dragGroupControlStart:function(t,e){var n=e.datas,r=t.state,i=r.left,o=r.top,a=r.beforeOrigin,r=this.dragControlStart(t,e);if(!r)return!1;r.set(n.beforeDirection*t.rotation);e=vu(t,this,"dragControlStart",e,function(t,e){var t=t.state,n=t.left,r=t.top,t=t.beforeOrigin,n=J(T([n,r],[i,o]),T(t,a));return e.datas.groupClient=n,X(X({},e),{parentRotate:0})}),t=it(t,"onRotateGroupStart",X(X({},r),{targets:t.props.targets,events:e}));return n.isRotate=!1!==t,!!n.isRotate&&r},dragGroupControl:function(e,n){var t=n.datas;if(t.isRotate){Js(e,"onBeforeRotate",function(t){it(e,"onBeforeRotateGroup",rt(e,n,X(X({},t),{targets:e.props.targets}),!0))});var a,s,u,r=this.dragControl(e,n);if(r)return a=t.beforeDirection,s=r.beforeDist,u=r.beforeDelta/180*Math.PI,t=vu(e,this,"dragControl",n,function(t,e){var n=e.datas.groupClient,r=n[0],n=n[1],i=Oe([r,n],u*a),o=i[0],i=i[1],r=[o-r,i-n];return e.datas.groupClient=[o,i],X(X({},e),{parentRotate:s,groupDelta:r})}),e.rotation=a*r.beforeRotation,t=X({targets:e.props.targets,events:t,set:function(t){e.rotation=t},setGroupRotation:function(t){e.rotation=t}},r),it(e,"onRotateGroup",t),t}},dragGroupControlEnd:function(t,e){var n,r=e.isDrag;if(e.datas.isRotate)return this.dragControlEnd(t,e),n=vu(t,this,"dragControlEnd",e),it(t,"onRotateGroupEnd",Ks(t,e,{targets:t.props.targets,events:n})),r},request:function(t){var e={},n=0,r=t.getRotation();return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaRotate"in t?n+=t.deltaRotate:"rotate"in t&&(n=t.rotate-r),{datas:e,parentDist:n}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},wc={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,e){var n=t.props,r=n.throttleDragRotate,n=n.zoom,t=t.state,i=t.dragInfo,t=t.beforeOrigin;if(!r||!i)return[];r=i.dist;if(!r[0]&&!r[1])return[];i=Is(r),r=F(r,[0,0]);return[e.createElement("div",{className:L("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:"".concat(i,"px"),transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(r,"rad) scaleY(").concat(n,")")}})]},dragStart:function(t,e){var n=e.datas,r=e.parentEvent,i=e.parentGesto,o=t.state,a=o.target,o=o.gestos;if(o.draggable)return!1;o.draggable=i||t.targetGesto;i=Qs(a),n.datas={},n.left=parseFloat(i.left||"")||0,n.top=parseFloat(i.top||"")||0,n.bottom=parseFloat(i.bottom||"")||0,n.right=parseFloat(i.right||"")||0,n.startValue=[0,0],es(t,e),ls(e,"translate"),n.absolutePoses=Vs(t.state),n.prevDist=[0,0],n.prevBeforeDist=[0,0],n.isDrag=!1,n.deltaOffset=[0,0],a=rt(t,e,X({set:function(t){n.startValue=t}},cs(e)));return!1!==(r||it(t,"onDragStart",a))?(n.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(o.draggable=null,n.isPinch=!1),!!n.isDrag&&a},drag:function(t,e){if(e){ns(e,"translate");var n=e.datas,r=e.parentEvent,i=e.parentFlag,o=e.isPinch,a=e.isRequest,s=e.deltaOffset,u=e.distX,c=e.distY,l=n.isDrag,f=n.prevDist,p=n.prevBeforeDist,d=n.startValue;if(l){s&&(u+=s[0],c+=s[1]);var l=t.props,h=l.parentMoveable,g=!r&&l.throttleDrag||0,v=!r&&l.throttleDragRotate||0,m=!1,b=0,i=(!r&&0<v&&(u||c)&&(l=N((l=l.startDragRotate||0)+180*F([0,0],[u,c])/Math.PI,v)-l,x=c*Math.abs(Math.cos((l-90)/180*Math.PI)),x=Is([u*Math.abs(Math.cos(l/180*Math.PI)),x]),b=l*Math.PI/180,u=x*Math.cos(b),c=x*Math.sin(b)),o||r||i||v&&!u&&!c||(x=(l=rc(t,u,c,v,a||s,n))[0],b=l[1],i=x.isSnap,a=x.isBound,s=x.offset,l=b.isSnap,x=b.isBound,m=i||l||a||x,u+=s,c+=b.offset),J(os({datas:n,distX:u,distY:c}),d)),x=J((l=os({datas:a=(l={datas:n,distX:u,distY:c}).datas,distX:l.distX,distY:l.distY}),B(is(a,xe([l[0],l[1]],4)),Ee([0,0,0],4),4)),d),s=(v||m||(Ct(x,g),Ct(i,g)),Ct(x,La),Ct(i,La),T(i,d)),b=T(x,d),u=T(b,f),c=T(s,p),a=(n.prevDist=b,n.prevBeforeDist=s,n.passDelta=u,n.passDist=b,n.left+s[0]),l=n.top+s[1],v=n.right-s[0],m=n.bottom-s[1],g=rs(n,"translate(".concat(x[0],"px, ").concat(x[1],"px)"),"translate(".concat(b[0],"px, ").concat(b[1],"px)"));if(ps(e,g),t.state.dragInfo.dist=r?[0,0]:b,r||h||!u.every(function(t){return!t})||!c.some(function(t){return!t}))return f=(d=t.state).width,p=d.height,n=rt(t,e,X({transform:g,dist:b,delta:u,translate:x,beforeDist:s,beforeDelta:c,beforeTranslate:i,left:a,top:l,right:v,bottom:m,width:f,height:p,isPinch:o},$s({style:g}))),r||it(t,"onDrag",n),n}}},dragAfter:function(t,e){var n=e.datas,r=n.deltaOffset;return!(!r[0]&&!r[1])&&(n.deltaOffset=[0,0],this.drag(t,X(X({},e),{deltaOffset:r})))},dragEnd:function(t,e){var n=e.parentEvent,r=e.datas;if(t.state.dragInfo=null,r.isDrag)return r.isDrag=!1,r=Ks(t,e,{}),n||it(t,"onDragEnd",r),r},dragGroupStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY,o=this.dragStart(t,e);if(!o)return!1;r=gu(t,this,"dragStart",[r||0,i||0],e,!1,"draggable"),i=it(t,"onDragGroupStart",X(X({},o),{targets:t.props.targets,events:r}));return n.isDrag=!1!==i,!!n.isDrag&&o},dragGroup:function(t,e){if(e.datas.isDrag){var n=this.drag(t,e),e=gu(t,this,"drag",e.datas.passDelta,e,!1,"draggable");if(n)return it(t,"onDragGroup",t=X({targets:t.props.targets,events:e},n)),t}},dragGroupEnd:function(t,e){var n,r=e.isDrag;if(e.datas.isDrag)return this.dragEnd(t,e),n=gu(t,this,"dragEnd",[0,0],e,!1,"draggable"),it(t,"onDragGroupEnd",Ks(t,e,{targets:t.props.targets,events:n})),r},request:function(t){var e={},n=t.getRect(),r=0,i=0;return{isControl:!1,requestStart:function(){return{datas:e}},request:function(t){return"x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY),{datas:e,distX:r,distY:i}},requestEnd:function(){return{datas:e,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}},ca=uu("resizable"),Sa={name:"resizable",ableGroup:"size",canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean,resizeFormat:Function,keepRatioFinally:Boolean,edge:Boolean},events:{onResizeStart:"resizeStart",onBeforeResize:"beforeResize",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onBeforeResizeGroup:"beforeResizeGroup",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:Ec("resizable"),dragControlCondition:ca,dragControlStart:function(t,e){var n=e.inputEvent,r=e.isPinch,i=e.isGroup,o=e.parentDirection,a=e.parentGesto,s=e.datas,u=e.parentFixedDirection,c=e.parentEvent,o=o||(r?[0,0]:Hs(n.target)),n=t.state,l=n.target,f=n.width,p=n.height,d=n.gestos;if(!o||!l)return!1;if(d.resizable)return!1;d.resizable=a||t.controlGesto,r||es(t,e),s.datas={},s.direction=o,s.startOffsetWidth=f,s.startOffsetHeight=p,s.prevWidth=0,s.prevHeight=0,s.minSize=[0,0],s.startWidth=n.cssWidth,s.startHeight=n.cssHeight,s.maxSize=[1/0,1/0],i||(s.minSize=[n.minOffsetWidth,n.minOffsetHeight],s.maxSize=[n.maxOffsetWidth,n.maxOffsetHeight]);l=t.props.transformOrigin||"% %";function h(t){s.ratio=t&&isFinite(t)?t:0}function g(t){s.fixedDirection=t,s.fixedPosition=H(s.startPositions,t)}function v(t){s.minSize=[Z("".concat(t[0]),0)||0,Z("".concat(t[1]),0)||0]}function m(t){t=[t[0]||1/0,t[1]||1/0];ot(t[0])&&!isFinite(t[0])||(t[0]=Z("".concat(t[0]),0)||1/0),ot(t[1])&&!isFinite(t[1])||(t[1]=Z("".concat(t[1]),0)||1/0),s.maxSize=t}s.transformOrigin=l&&b(l)?l.split(" "):l,s.startOffsetMatrix=n.offsetMatrix,s.startTransformOrigin=n.transformOrigin,s.isWidth=null!=(d=null==e?void 0:e.parentIsWidth)?d:!o[0]&&!o[1]||o[0]||!o[1],s.startPositions=Vs(t.state),h(f/p),g(u||[-o[0],-o[1]]),s.setFixedDirection=g,s.setMin=v,s.setMax=m;a=rt(t,e,{direction:o,startRatio:s.ratio,set:function(t){var e=t[0],t=t[1];s.startWidth=e,s.startHeight=t},setMin:v,setMax:m,setRatio:h,setFixedDirection:g,setOrigin:function(t){s.transformOrigin=t},dragStart:wc.dragStart(t,(new Qa).dragStart([0,0],e))});return!1!==(c||it(t,"onResizeStart",a))&&(s.isResize=!0,t.state.snapRenderInfo={request:e.isRequest,direction:o}),!!s.isResize&&a},dragControl:function(t,n){var r=n.datas,e=n.parentFlag,i=n.isPinch,o=n.parentKeepRatio,a=n.dragClient,s=n.parentDist,u=n.isRequest,c=n.isGroup,l=n.parentEvent,f=n.resolveMatrix,p=r.isResize,d=r.transformOrigin,h=r.startWidth,g=r.startHeight,v=r.prevWidth,m=r.prevHeight,b=r.minSize,x=r.maxSize,E=r.ratio,S=r.startOffsetWidth,y=r.startOffsetHeight,M=r.isWidth;if(p){f&&(p=t.state.is3d,f=r.startOffsetMatrix,C=r.startTransformOrigin,p=p?4:3,w=Ae(ds(n)),C=Gs(f=us(f,w=p!==(f=Math.sqrt(w.length))?I(w,f,p):w,C,p),S,y,p),r.startPositions=C,r.nextTargetMatrix=w,r.nextAllMatrix=f);var p=Ws(t.props,"resizable"),D=p.resizeFormat,C=p.throttleResize,R=void 0===C?e?0:1:C,w=p.parentMoveable,f=p.keepRatioFinally,C=r.direction,O=C,z=0,P=0,B=(C[0]||C[1]||(O=[1,1]),E&&(null!=o?o:p.keepRatio)||!1),o=_(),G=o[0],T=o[1],p=(l||(r.setFixedDirection(r.fixedDirection),it(t,"onBeforeResize",rt(t,n,{setFixedDirection:function(t){return r.setFixedDirection(t),t=_(),G=t[0],T=t[1],[G,T]},boundingWidth:G,boundingHeight:T,setSize:function(t){G=t[0],T=t[1]}},!0))),a),o=(a||(p=!e&&i?xs(t,[0,0]):r.fixedPosition),[0,0]),u=(i||(o=function(t,n,r,e,i,o,a){if(!Su(t,"resizable"))return[0,0];var s=a.fixedDirection,u=a.nextAllMatrix,c=t.state,l=c.allMatrix,f=c.is3d;return fc(t,function(t,e){return cc(u||l,n+t,r+e,s,i,f)},n,r,e,i,o,a)}(t,G,T,C,p,u,r)),s&&(s[0]||(o[0]=0),s[1]||(o[1]=0)),B?(O[0]&&O[1]&&o[0]&&o[1]&&(Math.abs(o[0])>Math.abs(o[1])?o[1]=0:o[0]=0),(a=!o[0]&&!o[1])&&A(),O[0]&&!O[1]||o[0]&&!o[1]||a&&M?(G+=o[0],T=G/E):(!O[0]&&O[1]||!o[0]&&o[1]||a&&!M)&&(T+=o[1],G=T*E)):(G+=o[0],T+=o[1],G=Math.max(0,G),T=Math.max(0,T)),e=yt([G,T],b,x,!!B&&E),G=e[0],T=e[1],A(),B&&(c||f)&&(M?T=G/E:G=T*E),[(z=G-S)-v,(P=T-y)-m]),s=(r.prevWidth=z,r.prevHeight=P,bs(t,G,T,p,d,r));if(w||!u.every(function(t){return!t})||!s.every(function(t){return!t}))return o=(a=wc.drag(t,Ja(n,t.state,s,!!i,!1,"draggable"))).transform,b=rt(t,n,X({width:h+z,height:g+P,offsetWidth:Math.round(G),offsetHeight:Math.round(T),startRatio:E,boundingWidth:G,boundingHeight:T,direction:C,dist:[z,P],delta:u,isPinch:!!i,drag:a},Zs({style:{width:"".concat(G,"px"),height:"".concat(T,"px")},transform:o},a))),l||it(t,"onResize",b),b}function _(){var t=r.fixedDirection,e=du(O,B,r,n),e=(z=e.distWidth,P=e.distHeight,O[0]-t[0]||B?Math.max(S+z,La):S),t=O[1]-t[1]||B?Math.max(y+P,La):y;return B&&S&&y&&(M?t=e/E:e=t*E),[e,t]}function A(){var t;D&&(t=D([G,T]),G=t[0],T=t[1]),G=N(G,R),T=N(T,R)}},dragControlAfter:function(t,e){var n=e.datas,r=n.isResize,i=n.startOffsetWidth,o=n.startOffsetHeight,a=n.prevWidth,s=n.prevHeight;if(r)return r=t.state,i=r.width-(i+a),a=r.height-(o+s),r=3<Math.abs(i),o=3<Math.abs(a),r&&(n.startWidth+=i,n.startOffsetWidth+=i,n.prevWidth+=i),o&&(n.startHeight+=a,n.startOffsetHeight+=a,n.prevHeight+=a),r||o?this.dragControl(t,e):void 0},dragControlEnd:function(t,e){var n=e.datas,r=e.parentEvent;if(n.isResize)return n.isResize=!1,n=Ks(t,e,{}),r||it(t,"onResizeEnd",n),n},dragGroupControlCondition:ca,dragGroupControlStart:function(i,t){var o=t.datas,e=this.dragControlStart(i,X(X({},t),{isGroup:!0}));if(!e)return!1;var a=hu(i,"resizable",t);function r(t,e){var n=o.fixedDirection,r=o.fixedPosition,t=H(e.datas.startPositions||Vs(t.state),n),n=B(Be(-i.rotation/180*Math.PI,3),[t[0]-r[0],t[1]-r[1],1],3),t=n[0],r=n[1];return e.datas.originalX=t,e.datas.originalY=r,e}var s=o.startOffsetWidth,u=o.startOffsetHeight;function n(){var r=o.minSize;a.forEach(function(t){var t=t.datas,e=t.minSize,n=t.startOffsetWidth,t=t.startOffsetHeight,n=s*(n?e[0]/n:0),e=u*(t?e[1]/t:0);r[0]=Math.max(r[0],n),r[1]=Math.max(r[1],e)})}function c(){var r=o.maxSize;a.forEach(function(t){var t=t.datas,e=t.maxSize,n=t.startOffsetWidth,t=t.startOffsetHeight,n=s*(n?e[0]/n:0),e=u*(t?e[1]/t:0);r[0]=Math.min(r[0],n),r[1]=Math.min(r[1],e)})}function l(n){e.setFixedDirection(n),f.forEach(function(t,e){t.setFixedDirection(n),r(t.moveable,a[e])})}var f=vu(i,this,"dragControlStart",t,r),t=(n(),c(),o.setFixedDirection=l,X(X({},e),{targets:i.props.targets,events:f.map(function(e){return X(X({},e),{setMin:function(t){e.setMin(t),n()},setMax:function(t){e.setMax(t),c()}})}),setFixedDirection:l,setMin:function(t){e.setMin(t),n()},setMax:function(t){e.setMax(t),c()}})),t=it(i,"onResizeGroupStart",t);return o.isResize=!1!==t,!!o.isResize&&e},dragGroupControl:function(i,e){var t=e.datas;if(t.isResize){var n,o,a,s,r,u,c=Ws(i.props,"resizable"),l=(Js(i,"onBeforeResize",function(t){it(i,"onBeforeResizeGroup",rt(i,e,X(X({},t),{targets:c.targets}),!0))}),this.dragControl(i,X(X({},e),{isGroup:!0})));if(l)return r=l.boundingWidth,u=l.boundingHeight,n=l.dist,o=c.keepRatio,a=[r/(r-n[0]),u/(u-n[1])],s=t.fixedPosition,r=vu(i,this,"dragControl",e,function(t,e){var n=B(Be(i.rotation/180*Math.PI,3),[e.datas.originalX*a[0],e.datas.originalY*a[1],1],3),r=n[0],n=n[1];return X(X({},e),{parentDist:null,parentScale:a,dragClient:J(s,[r,n]),parentKeepRatio:o})}),u=X({targets:c.targets,events:r},l),it(i,"onResizeGroup",u),u}},dragGroupControlEnd:function(t,e){var n,r=e.isDrag;if(e.datas.isResize)return this.dragControlEnd(t,e),n=vu(t,this,"dragControlEnd",e),it(t,"onResizeGroupEnd",Ks(t,e,{targets:t.props.targets,events:n})),r},request:function(t){var e={},n=0,r=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1],parentIsWidth:null==(t=null==t?void 0:t.horizontal)||t}},request:function(t){return"offsetWidth"in t?n=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(n+=t.deltaWidth),"offsetHeight"in t?r=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(r+=t.deltaHeight),{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}},t=uu("scalable"),Ma={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean,edge:Boolean},events:{onScaleStart:"scaleStart",onBeforeScale:"beforeScale",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onBeforeScaleGroup:"beforeScaleGroup",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:Ec("scalable"),dragControlCondition:t,dragControlStart:function(t,e){var n=e.datas,r=e.isPinch,i=e.inputEvent,i=e.parentDirection||(r?[0,0]:Hs(i.target)),o=t.state,a=o.width,s=o.height,u=o.targetTransform,c=o.target,l=o.pos1,f=o.pos2,o=o.pos4;if(!i||!c)return!1;r||es(t,e),n.datas={},n.transform=u,n.prevDist=[1,1],n.direction=i,n.startOffsetWidth=a,n.startOffsetHeight=s,n.startValue=[1,1];c=D(l,f),r=D(f,o),u=!i[0]&&!i[1]||i[0]||!i[1];function p(t){n.ratio=t&&isFinite(t)?t:0}function d(t){n.fixedDirection=t,n.fixedPosition=H(n.startPositions,t)}n.scaleWidth=c,n.scaleHeight=r,n.scaleXRatio=c/a,n.scaleYRatio=r/s,ls(e,"scale"),n.isWidth=u,n.startPositions=Vs(t.state),n.setFixedDirection=d,p(D(l,f)/D(f,o)),d([-i[0],-i[1]]);c=rt(t,e,X(X({direction:i,set:function(t){n.startValue=t},setRatio:p,setFixedDirection:d},cs(e)),{dragStart:wc.dragStart(t,(new Qa).dragStart([0,0],e))}));return!1!==it(t,"onScaleStart",c)&&(n.isScale=!0,t.state.snapRenderInfo={request:e.isRequest,direction:i}),!!n.isScale&&c},dragControl:function(t,n){ns(n,"scale");var r=n.datas,e=n.parentKeepRatio,i=n.parentFlag,o=n.isPinch,a=n.dragClient,s=n.isRequest,u=r.prevDist,c=r.direction,l=r.startOffsetWidth,f=r.startOffsetHeight,p=r.isScale,d=r.startValue,h=r.isWidth,g=r.ratio;if(!p)return!1;var p=t.props,v=p.throttleScale,m=p.parentMoveable,b=c,x=(c[0]||c[1]||(b=[1,1]),g&&(null!=e?e:p.keepRatio)||!1),e=t.state;function E(){var t=du(b,x,r,n),e=t.distWidth,t=t.distHeight,e=(l+e)/l,t=(f+t)/f,e=b[0]||x?e*d[0]:d[0],t=b[1]||x?t*d[1]:d[1];return[e=0===e?1e-9*(0<u[0]?1:-1):e,t=0===t?1e-9*(0<u[1]?1:-1):t]}var S=E(),p=(o||!t.props.groupable||$(p=(e.snapRenderInfo||{}).direction)&&(p[0]||p[1])&&(e.snapRenderInfo={direction:c,request:n.isRequest}),it(t,"onBeforeScale",rt(t,n,{scale:S,setFixedDirection:function(t){return r.setFixedDirection(t),S=E()},setScale:function(t){S=t}},!0)),[S[0]/d[0],S[1]/d[1]]),e=a,y=[0,0],i=(a||(e=!i&&o?xs(t,[0,0]):r.fixedPosition),o||(y=pc(t,p,c,s,r)),x?(b[0]&&b[1]&&y[0]&&y[1]&&(Math.abs(y[0]*l)>Math.abs(y[1]*f)?y[1]=0:y[0]=0),(a=!y[0]&&!y[1])&&(h?p[0]=N(p[0]*d[0],v)/d[0]:p[1]=N(p[1]*d[1],v)/d[1]),b[0]&&!b[1]||y[0]&&!y[1]||a&&h?(p[0]+=y[0],i=l*p[0]*d[0]/g,p[1]=i/f/d[1]):(!b[0]&&b[1]||!y[0]&&y[1]||a&&!h)&&(p[1]+=y[1],s=f*p[1]*d[1]*g,p[0]=s/l/d[0])):(p[0]+=y[0],p[1]+=y[1],y[0]||(p[0]=N(p[0]*d[0],v)/d[0]),y[1]||(p[1]=N(p[1]*d[1],v)/d[1])),0===p[0]&&(p[0]=1e-9*(0<u[0]?1:-1)),0===p[1]&&(p[1]=1e-9*(0<u[1]?1:-1)),[p[0]/u[0],p[1]/u[1]]),s=(S=[p[0]*d[0],p[1]*d[1]],a=r.fixedDirection,h=e,g=r,vs(t,"scale(".concat(p.join(", "),")"),a,h,g)),y=T(s,r.prevInverseDist||[0,0]);if(r.prevDist=p,r.prevInverseDist=s,S[0]===u[0]&&S[1]===u[1]&&y.every(function(t){return!t})&&!m)return!1;v=rs(r,"scale(".concat(S.join(", "),")"),"scale(".concat(p.join(", "),")")),e=rt(t,n,X({offsetWidth:l,offsetHeight:f,direction:c,scale:S,dist:p,delta:i,isPinch:!!o},gs(t,v,y,o,n)));return it(t,"onScale",e),e},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isScale&&(n.isScale=!1,it(t,"onScaleEnd",Ks(t,e,{})),r)},dragGroupControlCondition:t,dragGroupControlStart:function(i,t){var o=t.datas,e=this.dragControlStart(i,t);if(!e)return!1;var r=hu(i,"resizable",t);function a(t,e){var n=o.fixedDirection,r=o.fixedPosition,t=H(e.datas.startPositions||Vs(t.state),n),n=B(Be(-i.rotation/180*Math.PI,3),[t[0]-r[0],t[1]-r[1],1],3),t=n[0],r=n[1];return e.datas.originalX=t,e.datas.originalY=r,e}o.moveableScale=i.scale;function n(n){e.setFixedDirection(n),s.forEach(function(t,e){t.setFixedDirection(n),a(t.moveable,r[e])})}var s=vu(i,this,"dragControlStart",t,a),t=(o.setFixedDirection=n,X(X({},e),{targets:i.props.targets,events:s,setFixedDirection:n})),u=it(i,"onScaleGroupStart",t);return o.isScale=!1!==u,!!o.isScale&&t},dragGroupControl:function(i,e){var t=e.datas;if(t.isScale){Js(i,"onBeforeScale",function(t){it(i,"onBeforeScaleGroup",rt(i,e,X(X({},t),{targets:i.props.targets}),!0))});var o,a,s,u,n,r=this.dragControl(i,e);if(r)return n=t.moveableScale,i.scale=[r.scale[0]*n[0],r.scale[1]*n[1]],o=i.props.keepRatio,a=r.dist,s=r.scale,u=t.fixedPosition,n=vu(i,this,"dragControl",e,function(t,e){var n=B(Be(i.rotation/180*Math.PI,3),[e.datas.originalX*a[0],e.datas.originalY*a[1],1],3),r=n[0],n=n[1];return X(X({},e),{parentDist:null,parentScale:s,parentKeepRatio:o,dragClient:J(u,[r,n])})}),t=X({targets:i.props.targets,events:n},r),it(i,"onScaleGroup",t),t}},dragGroupControlEnd:function(t,e){var n,r=e.isDrag;if(e.datas.isScale)return this.dragControlEnd(t,e),n=vu(t,this,"dragControlEnd",e),it(t,"onScaleGroupEnd",Ks(t,e,{targets:t.props.targets,events:n})),r},request:function(){var e={},n=0,r=0;return{isControl:!0,requestStart:function(t){return{datas:e,parentDirection:t.direction||[1,1]}},request:function(t){return n+=t.deltaWidth,r+=t.deltaHeight,{datas:e,parentDist:[n,r],parentKeepRatio:t.keepRatio}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function Oc(t,n){return t.map(function(t,e){return i(t,n[e],1,2)})}function zc(t,e,n){e=F(t,e),t=F(t,n)-e;return 0<=t?t:t+2*Math.PI}var Wt={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array,edge:Boolean},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,e){var n=t.props,r=n.resizable,i=n.scalable,o=n.warpable,n=n.zoom;if(r||i||!o)return[];var r=t.state,i=r.pos1,o=r.pos2,a=r.pos3,r=r.pos4,s=Oc(i,o),u=Oc(o,i),c=Oc(i,a),i=Oc(a,i),l=Oc(a,r),a=Oc(r,a),f=Oc(o,r),r=Oc(r,o);return nt([e.createElement("div",{className:L("line"),key:"middeLine1",style:Fs(s,l,n)}),e.createElement("div",{className:L("line"),key:"middeLine2",style:Fs(u,a,n)}),e.createElement("div",{className:L("line"),key:"middeLine3",style:Fs(c,f,n)}),e.createElement("div",{className:L("line"),key:"middeLine4",style:Fs(i,r,n)})],Sc(t,"warpable",e),!0)},dragControlCondition:function(t,e){if(e.isRequest)return!1;e=e.inputEvent.target;return P(e,L("direction"))&&P(e,L("warpable"))},dragControlStart:function(t,e){var n=e.datas,r=e.inputEvent,i=t.props.target,r=Hs(r.target);if(!r||!i)return!1;var i=t.state,o=i.transformOrigin,a=i.is3d,s=i.targetTransform,u=i.targetMatrix,c=i.width,l=i.height,f=i.left,p=i.top;return n.datas={},n.targetTransform=s,n.warpTargetMatrix=a?u:I(u,3,4),n.targetInverseMatrix=me(y(n.warpTargetMatrix,4),3,4),n.direction=r,n.left=f,n.top=p,n.poses=[[0,0],[c,0],[0,l],[c,l]].map(function(t){return T(t,o)}),n.nextPoses=n.poses.map(function(t){var e=t[0],t=t[1];return B(n.warpTargetMatrix,[e,t,0,1],4)}),n.startValue=k(4),n.prevMatrix=k(4),n.absolutePoses=Vs(i),n.posIndexes=ss(r),es(t,e),ls(e,"matrix3d"),!(i.snapRenderInfo={request:e.isRequest,direction:r})!==it(t,"onWarpStart",rt(t,e,X({set:function(t){n.startValue=t}},cs(e))))&&(n.isWarp=!0),n.isWarp},dragControl:function(t,e){var n=e.datas,r=e.isRequest,i=e.distX,o=e.distY,a=n.targetInverseMatrix,s=n.prevMatrix,u=n.isWarp,c=n.startValue,l=n.poses,f=n.posIndexes,p=n.absolutePoses;if(!u)return!1;ns(e,"matrix3d"),Su(t,"warpable")&&(1<(u=f.map(function(t){return p[t]})).length&&u.push([(u[0][0]+u[1][0])/2,(u[0][1]+u[1][1])/2]),u=(r=ic(t,r,{horizontal:u.map(function(t){return t[1]+o}),vertical:u.map(function(t){return t[0]+i})})).horizontal,r=r.vertical,o-=u.offset,i-=r.offset);var d=as({datas:n,distX:i,distY:o},!0),h=n.nextPoses.slice();if(f.forEach(function(t){h[t]=J(h[t],d)}),!Xa.every(function(t){return e=t.map(function(t){return l[t]}),t=t.map(function(t){return h[t]}),e=zc(e[0],e[1],e[2]),t=zc(t[0],t[1],t[2]),!((n=Math.PI)<=e&&t<=n||e<=n&&n<=t);var e,n}))return!1;u=_e(l[0],l[2],l[1],l[3],h[0],h[2],h[1],h[3]);if(!u.length)return!1;r=is(n,K(a,u,4),!0),f=K(y(s,4),r,4),a=K(c,n.prevMatrix=r,4),u=rs(n,"matrix3d(".concat(a.join(", "),")"),"matrix3d(".concat(r.join(", "),")"));return ps(e,u),it(t,"onWarp",rt(t,e,{delta:f,matrix:a,dist:r,multiply:K,transform:u})),!0},dragControlEnd:function(t,e){var n=e.datas,r=e.isDrag;return!!n.isWarp&&(n.isWarp=!1,it(t,"onWarpEnd",Ks(t,e,{})),r)}},Pc=L("area-pieces"),Bc=L("area-piece"),Gc=L("avoid");function Tc(t){var e,n=t.areaElement;n&&(e=(t=t.state).width,t=t.height,wt(n,Gc),n.style.cssText+="left: 0px; top: 0px; width: ".concat(e,"px; height: ").concat(t,"px"))}function _c(t){return t.createElement("div",{key:"area_pieces",className:Pc},t.createElement("div",{className:Bc}),t.createElement("div",{className:Bc}),t.createElement("div",{className:Bc}),t.createElement("div",{className:Bc}))}Mo={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,e){var n=t.props,r=n.target,i=n.dragArea,o=n.groupable,n=n.passDragArea,a=t.state,s=a.width,u=a.height,a=a.renderPoses,n=n?L("area","pass"):L("area");if(o)return[e.createElement("div",{key:"area",ref:v(t,"areaElement"),className:n}),_c(e)];if(!r||!i)return[];o=_e([0,0],[s,0],[0,u],[s,u],a[0],a[1],a[2],a[3]),r=o.length?Ps(o,!0):"none";return[e.createElement("div",{key:"area",ref:v(t,"areaElement"),className:n,style:{top:"0px",left:"0px",width:"".concat(s,"px"),height:"".concat(u,"px"),transformOrigin:"0 0",transform:r}}),_c(e)]},dragStart:function(t,e){var n=e.datas,r=e.clientX,i=e.clientY;if(!e.inputEvent)return!1;n.isDragArea=!1;var e=t.areaElement,n=t.state,t=n.moveableClientRect,o=n.renderPoses,a=n.rootMatrix,s=n.is3d,u=t.left,t=t.top,o=Ts(o),c=o.left,l=o.top,f=o.width,o=o.height,a=ru(a,[r-u,i-t],s?4:3),r=a[0],u=a[1],i=[{left:c,top:l,width:f,height:(u-=l)-10},{left:c,top:l,width:(r-=c)-10,height:o},{left:c,top:l+u+10,width:f,height:o-u-10},{left:c+r+10,top:l,width:f-r-10,height:o}],p=[].slice.call(e.nextElementSibling.children);i.forEach(function(t,e){p[e].style.cssText="left: ".concat(t.left,"px;top: ").concat(t.top,"px; width: ").concat(t.width,"px; height: ").concat(t.height,"px;")}),Rt(e,Gc),n.disableNativeEvent=!0},drag:function(t,e){var n=e.datas,e=e.inputEvent;if(this.enableNativeEvent(t),!e)return!1;n.isDragArea||(n.isDragArea=!0,Tc(t))},dragEnd:function(t,e){this.enableNativeEvent(t);var n=e.inputEvent,e=e.datas;if(!n)return!1;e.isDragArea||Tc(t)},dragGroupStart:function(t,e){return this.dragStart(t,e)},dragGroup:function(t,e){return this.drag(t,e)},dragGroupEnd:function(t,e){return this.dragEnd(t,e)},unset:function(t){Tc(t),t.state.disableNativeEvent=!1},enableNativeEvent:function(t){var e=t.state;e.disableNativeEvent&&mt(function(){e.disableNativeEvent=!1})}},zo=Na("origin",{render:function(t,e){var n=t.props.zoom,t=t.state,r=t.beforeOrigin,t=t.rotation;return[e.createElement("div",{className:L("control","origin"),style:Ns(t,n,r),key:"beforeOrigin"})]}});function Ac(t){t=t.scrollContainer;return[t.scrollLeft,t.scrollTop]}var Io={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragRelation:"strong",dragStart:function(n,r){var t=n.props.scrollContainer,t=void 0===t?n.getContainer():t,e=new un,t=cu(t,!0),i=(r.datas.dragScroll=e,r.isControl?"controlGesto":"targetGesto"),o=r.targets;e.on("scroll",function(t){var e=t.container,t=t.direction,e=rt(n,r,{scrollContainer:e,direction:t}),t=o?"onScrollGroup":"onScroll";o&&(e.targets=o),it(n,t,e)}).on("move",function(t){var e=t.offsetX,t=t.offsetY;n[i].scrollBy(e,t,r.inputEvent,!1)}),e.dragStart(r,{container:t})},checkScroll:function(t,e){var n,r,i,o=e.datas.dragScroll;if(o)return r=t.props,n=r.scrollContainer,t=void 0===n?t.getContainer():n,n=r.scrollThreshold,r=r.getScrollPosition,i=void 0===r?Ac:r,o.drag(e,{container:t,threshold:void 0===n?0:n,getScrollPosition:function(t){return i({scrollContainer:t.container,direction:t.direction})}}),!0},drag:function(t,e){return this.checkScroll(t,e)},dragEnd:function(t,e){e.datas.dragScroll.dragEnd(),e.datas.dragScroll=null},dragControlStart:function(t,e){return this.dragStart(t,X(X({},e),{isControl:!0}))},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupStart:function(t,e){return this.dragStart(t,X(X({},e),{targets:t.props.targets}))},dragGroup:function(t,e){return this.drag(t,X(X({},e),{targets:t.props.targets}))},dragGroupEnd:function(t,e){return this.dragEnd(t,X(X({},e),{targets:t.props.targets}))},dragGroupControlStart:function(t,e){return this.dragStart(t,X(X({},e),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,e){return this.drag(t,X(X({},e),{targets:t.props.targets}))},dragGroupControEnd:function(t,e){return this.dragEnd(t,X(X({},e),{targets:t.props.targets}))}},aa={name:"",props:{target:Object,dragTarget:Object,container:Object,portalContainer:Object,rootContainer:Object,useResizeObserver:Boolean,zoom:Number,transformOrigin:Array,edge:Object,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,hideDefaultLines:Boolean,props:Object,flushSync:Function},events:{}},ca=Na("padding",{render:function(t,r){var e=t.props;if(e.dragArea)return[];var e=e.padding||{},n=e.left,i=e.top,i=void 0===i?0:i,o=e.right,o=void 0===o?0:o,e=e.bottom,e=void 0===e?0:e,t=t.state,a=t.renderPoses,s=[t.pos1,t.pos2,t.pos3,t.pos4],t=[];return 0<(void 0===n?0:n)&&t.push([0,2]),0<i&&t.push([0,1]),0<o&&t.push([1,3]),0<e&&t.push([2,3]),t.map(function(t,e){var n=t[0],t=t[1],n=_e([0,0],[100,0],[0,100],[100,100],s[n],s[t],a[n],a[t]);if(n.length)return r.createElement("div",{key:"padding".concat(e),className:L("padding"),style:{transform:Ps(n,!0)}})})}}),Ic=["nw","ne","se","sw"];function kc(t,e){var n=t[0]+t[1],n=e<n?e/n:1;return t[0]*=n,t[1]=e-t[1]*n,t}var Fc=[1,2,5,6],Nc=[0,3,4,7],Wc=[1,-1,-1,1],jc=[1,1,-1,-1];function Yc(t,i,o,a,s,u,c,l,f){void 0===u&&(u=0),void 0===c&&(c=0),void 0===l&&(l=a),void 0===f&&(f=s);var p=[],d=!1,t=t.map(function(t,e){var n,e=i[e],r=e.horizontal,e=e.vertical;return e&&!d&&(d=!0,p.push("/")),d?(n=Math.max(0,1===e?t[1]-c:f-t[1]),p.push(au(n,s,o))):(n=Math.max(0,1===r?t[0]-u:l-t[0]),p.push(au(n,a,o))),n});return{styles:p,raws:t}}function qc(t){for(var e=[0,0],n=[0,0],r=t.length,i=0;i<r;++i){var o=t[i];o.sub&&(o.horizontal&&(0===e[1]&&(e[0]=i),e[1]=i-e[0]+1,n[0]=i+1),o.vertical&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1))}return{horizontalRange:e,verticalRange:n}}function Xc(t,r,i,o,a,e){void 0===e&&(e=[0,0]);var n=t.indexOf("/"),n=(-1<n?t.slice(0,n):t).length,s=t.slice(0,n),t=t.slice(n+1),n=s[0],n=void 0===n?"0px":n,u=s[1],u=void 0===u?n:u,c=s[2],c=void 0===c?n:c,l=s[3],l=void 0===l?u:l,f=t[0],f=void 0===f?n:f,p=t[1],p=void 0===p?f:p,d=t[2],d=void 0===d?f:d,h=t[3],h=void 0===h?p:h,g=[n,u,c,l].map(function(t){return Z(t,r)}),v=[f,p,d,h].map(function(t){return Z(t,i)}),n=g.slice(),u=v.slice(),c=kc([n[0],n[1]],r),d=(n[0]=c[0],n[1]=c[1],l=kc([n[3],n[2]],r),n[3]=l[0],n[2]=l[1],f=kc([u[0],u[3]],i),u[0]=f[0],u[3]=f[1],p=kc([u[1],u[2]],i),u[1]=p[0],u[2]=p[1],n.slice(0,Math.max(e[0],s.length))),h=u.slice(0,Math.max(e[1],t.length));return nt(nt([],d.map(function(t,e){var n=Ic[e];return{horizontal:Wc[e],vertical:0,pos:[o+t,a+(-1===jc[e]?i:0)],sub:!0,raw:g[e],direction:n}}),!0),h.map(function(t,e){var n=Ic[e];return{horizontal:0,vertical:jc[e],pos:[o+(-1===Wc[e]?r:0),a+t],sub:!0,raw:v[e],direction:n}}),!0)}function Hc(t,e,n,r,i){void 0===i&&(i=e.length);var o=qc(t.slice(r)),a=o.horizontalRange,o=o.verticalRange,r=n-r,s=0;if(0==r)s=i;else if(0<r&&r<a[1])s=a[1]-r;else{if(!(r>=o[0]))return;s=o[0]+o[1]-r}t.splice(n,s),e.splice(n,s)}function Lc(t,e,n,r,i,o,a,s,u,c,l){void 0===c&&(c=0),void 0===l&&(l=0);var f=qc(t.slice(n)),p=f.horizontalRange,f=f.verticalRange;if(-1<r)for(var d=1===Wc[r]?o-c:s-o,h=p[1];h<=r;++h){var g=1===jc[h]?l:u,v=0;if(r===h?v=o:0===h?v=c+d:-1===Wc[h]&&(v=s-(e[n][0]-c)),t.splice(n+h,0,{horizontal:Wc[h],vertical:0,pos:[v,g]}),e.splice(n+h,0,[v,g]),0===h)break}else if(-1<i)for(var m=1===jc[i]?a-l:u-a,b=(0===p[1]&&0===f[1]&&(t.push({horizontal:Wc[0],vertical:0,pos:p=[c+m,l]}),e.push(p)),f[0]),h=f[1];h<=i;++h){v=1===Wc[h]?c:s,g=0;if(i===h?g=a:0===h?g=l+m:1===jc[h]?g=e[n+b][1]:-1===jc[h]&&(g=u-(e[n+b][1]-l)),t.push({horizontal:0,vertical:jc[h],pos:[v,g]}),e.push([v,g]),0===h)break}}function Vc(t,n){return void 0===n&&(n=t.map(function(t){return t.raw})),{horizontals:t.map(function(t,e){return t.horizontal?n[e]:null}).filter(function(t){return null!=t}),verticals:t.map(function(t,e){return t.vertical?n[e]:null}).filter(function(t){return null!=t})}}var Uc=[[0,-1,"n"],[1,0,"e"]],$c=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Zc(t,e,n){var r=t.props.clipRelative,t=t.state,i=t.width,o=t.height,t=e.type,e=e.poses,a="rect"===t,s="circle"===t;if("polygon"===t)return n.map(function(t){return"".concat(au(t[0],i,r)," ").concat(au(t[1],o,r))});if(a||"inset"===t){var u=n[1][1],c=n[3][0],l=n[7][0],f=n[5][1];if(a)return[u,c,f,l].map(function(t){return"".concat(t,"px")});var p,d=[u,i-c,o-f,l].map(function(t,e){return au(t,e%2?i:o,r)});return 8<n.length&&(p=(a=T(n[4],n[0]))[0],a=a[1],d.push.apply(d,nt(["round"],Yc(n.slice(8),e.slice(8),r,p,a,l,u,c,f).styles,!1))),d}return s||"ellipse"===t?(e=n[0],p=au(Math.abs(n[1][1]-e[1]),s?Math.sqrt((i*i+o*o)/2):o,r),(d=s?[p]:[au(Math.abs(n[2][0]-e[0]),i,r),p]).push("at",au(e[0],i,r),au(e[1],o,r)),d):void 0}function Kc(t,e,n,r){var o=[r,(r+e)/2,e],a=[t,(t+n)/2,n];return $c.map(function(t){var e=t[0],n=t[1],t=t[2],r=o[e+1],i=a[n+1];return{vertical:Math.abs(n),horizontal:Math.abs(e),direction:t,pos:[r,i]}})}function Jc(t){var e=[1/0,-1/0],n=[1/0,-1/0];return t.forEach(function(t){t=t.pos;e[0]=Math.min(e[0],t[0]),e[1]=Math.max(e[1],t[0]),n[0]=Math.min(n[0],t[1]),n[1]=Math.max(n[1],t[1])}),[Math.abs(e[1]-e[0]),Math.abs(n[1]-n[0])]}function Qc(t,n,r,e,i){var o,a,s,u,c,l,f,p,d,h,g,v,m,b,x,E;if((i=i?i:"none"!==(o=(t=Qs(t)).clipPath)?o:t.clip)&&"none"!==i&&"auto"!==i||(i=e))return o=ft(i),t=o.prefix,e=void 0===t?i:t,t=o.value,o=void 0===t?"":t,t="circle"===e,a=" ","polygon"===e?(a=",",{type:e,clipText:i,poses:E=(h=lt(o||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map(function(t){var t=t.split(" "),e=t[0],t=t[1];return{vertical:1,horizontal:1,pos:[Z(e,n),Z(t,r)]}}),splitter:a}):t||"ellipse"===e?(f=d="",u=s=0,h=S(o),u=t?(p=h[0],d=void 0===(l=h[2])?"50%":l,f=void 0===(l=h[3])?"50%":l,s=Z(void 0===p?"50%":p,Math.sqrt((n*n+r*r)/2))):(l="",p=h[0],l=void 0===(g=h[1])?"50%":g,d=void 0===(g=h[3])?"50%":g,f=void 0===(g=h[4])?"50%":g,s=Z(void 0===p?"50%":p,n),Z(l,r)),E=nt([{vertical:1,horizontal:1,pos:c=[Z(d,n),Z(f,r)],direction:"nesw"}],Uc.slice(0,t?1:2).map(function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[c[0]+t[0]*s,c[1]+t[1]*u]}}),!0),{type:e,clipText:i,radiusX:s,radiusY:u,left:c[0]-s,top:c[1]-u,poses:E,splitter:a}):"inset"===e?(p=(-1<(g=(h=S(o||"0 0 0 0")).indexOf("round"))?h.slice(0,g):h).length,l=h.slice(p+1),f=(d=h.slice(0,p))[0],g=void 0===(t=d[1])?f:t,p=d[2],d=void 0===(t=d[3])?g:t,v=(t=[f,void 0===p?f:p].map(function(t){return Z(t,r)}))[0],b=t[1],x=(f=[d,g].map(function(t){return Z(t,n)}))[0],m=f[1],d=Xc(l,(p=n-m)-x,(t=r-b)-v,x,v),{type:"inset",clipText:i,poses:E=nt(nt([],Kc(v,p,t,x),!0),d,!0),top:v,left:x,right:p,bottom:t,radius:l,splitter:a}):"rect"===e?(a=",",{type:"rect",clipText:i,poses:E=Kc(v=(g=(h=lt(o||"0px, ".concat(n,"px, ").concat(r,"px, 0px"))).map(function(t){return pt(t).value}))[0],m=g[1],b=g[2],x=g[3]),top:v,right:m,bottom:b,left:x,values:h,splitter:a}):void 0}var t={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,keepRatio:Boolean,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,o){var e=t.props,n=e.customClipPath,r=e.defaultClipPath,i=e.clipArea,a=e.zoom,e=t.state,t=e.target,s=e.width,u=e.height,c=e.allMatrix,l=e.is3d,f=e.left,p=e.top,d=e.pos1,h=e.pos2,g=e.pos3,v=e.pos4,m=e.clipPathState,b=e.snapBoundInfos,x=e.rotation;if(!t)return[];e=Qc(t,s,u,r||"inset",m||n);if(!e)return[];var E,S,y,M=l?4:3,t=e.type,r=e.poses.map(function(t){t=V(c,t.pos,M);return[t[0]-f,t[1]-p]}),m=[],D=[],n="rect"===t,l="inset"===t,C="polygon"===t;if((n||l||C)&&(E=l?r.slice(0,8):r,D=E.map(function(t,e){var n=0===e?E[E.length-1]:E[e-1],r=F(n,t),t=ks(n,t);return o.createElement("div",{key:"clipLine".concat(e),className:L("line","clip-line","snap-control"),"data-clip-index":e,style:{width:"".concat(t,"px"),transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) rotate(").concat(r,"rad) scaleY(").concat(a,")")}})})),m=r.map(function(t,e){return o.createElement("div",{key:"clipControl".concat(e),className:L("control","clip-control","snap-control"),"data-clip-index":e,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(x,"rad) scale(").concat(a,")")}})}),l&&m.push.apply(m,r.slice(8).map(function(t,e){return o.createElement("div",{key:"clipRadiusControl".concat(e),className:L("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+e,style:{transform:"translate(".concat(t[0],"px, ").concat(t[1],"px) rotate(").concat(x,"rad) scale(").concat(a,")")}})})),"circle"===t||"ellipse"===t){var t=e.left,R=e.top,w=e.radiusX,O=e.radiusY,e=T(V(c,[t,R],M),V(c,[0,0],M)),t=e[0],R=e[1],e="none";if(!i){for(var z=Math.max(10,w/5,O/5),P=[],B=0;B<=z;++B){var G=2*Math.PI/z*B;P.push([w+(w-a)*Math.cos(G),O+(O-a)*Math.sin(G)])}P.push([w,-2]),P.push([-2,-2]),P.push([-2,2*O+2]),P.push([2*w+2,2*O+2]),P.push([2*w+2,-2]),P.push([w,-2]),e="polygon(".concat(P.map(function(t){return"".concat(t[0],"px ").concat(t[1],"px")}).join(", "),")")}m.push(o.createElement("div",{key:"clipEllipse",className:L("clip-ellipse","snap-control"),style:{width:"".concat(2*w,"px"),height:"".concat(2*O,"px"),clipPath:e,transform:"translate(".concat(-f+t,"px, ").concat(-p+R,"px) ").concat(Ps(c))}}))}return i&&(t=(e=Ts(nt([d,h,g,v],r,!0))).width,R=e.height,S=e.left,y=e.top,(C||n||l)&&(P=l?r.slice(0,8):r,m.push(o.createElement("div",{key:"clipArea",className:L("clip-area","snap-control"),style:{width:"".concat(t,"px"),height:"".concat(R,"px"),transform:"translate(".concat(S,"px, ").concat(y,"px)"),clipPath:"polygon(".concat(P.map(function(t){return"".concat(t[0]-S,"px ").concat(t[1]-y,"px")}).join(", "),")")}})))),b&&["vertical","horizontal"].forEach(function(r){var t=b[r],i="horizontal"===r;t.isSnap&&D.push.apply(D,t.snap.posInfos.map(function(t,e){var t=t.pos,n=T(V(c,i?[0,t]:[t,0],M),[f,p]),t=T(V(c,i?[s,t]:[t,u],M),[f,p]);return bc(o,"",n,t,a,"clip".concat(r,"snap").concat(e),"guideline")})),t.isBound&&D.push.apply(D,t.bounds.map(function(t,e){var t=t.pos,n=T(V(c,i?[0,t]:[t,0],M),[f,p]),t=T(V(c,i?[s,t]:[t,u],M),[f,p]);return bc(o,"",n,t,a,"clip".concat(r,"bounds").concat(e),"guideline","bounds","bold")}))}),nt(nt([],m,!0),D,!0)},dragControlCondition:function(t,e){return e.inputEvent&&-1<(e.inputEvent.target.getAttribute("class")||"").indexOf("clip")},dragStart:function(t,e){var n=t.props.dragWithClip;return void 0!==n&&!n&&this.dragControlStart(t,e)},drag:function(t,e){return this.dragControl(t,X(X({},e),{isDragTarget:!0}))},dragEnd:function(t,e){return this.dragControlEnd(t,e)},dragControlStart:function(t,e){var n=t.state,r=t.props,i=r.defaultClipPath,r=r.customClipPath,o=n.target,a=n.width,s=n.height,u=e.inputEvent?e.inputEvent.target:null,c=u&&u.getAttribute("class")||"",l=e.datas,o=Qc(o,a,s,i||"inset",r);if(!o)return!1;a=o.clipText;return!1===it(t,"onClipStart",rt(t,e,{clipType:o.type,clipStyle:a,poses:o.poses.map(function(t){return t.pos})}))?l.isClipStart=!1:(l.isControl=c&&-1<c.indexOf("clip-control"),l.isLine=-1<c.indexOf("clip-line"),l.isArea=-1<c.indexOf("clip-area")||-1<c.indexOf("clip-ellipse"),l.clipIndex=u?parseInt(u.getAttribute("data-clip-index"),10):-1,l.clipPath=o,l.isClipStart=!0,n.clipPathState=a,es(t,e),!0)},dragControl:function(t,e){var n=e.datas,r=e.originalDatas,I=e.isDragTarget;if(!n.isClipStart)return!1;var i=n.isControl,o=n.isLine,a=n.isArea,s=n.clipIndex,n=n.clipPath;if(!n)return!1;var u,c,k,F,N,l,f,p,W,d,h,g,v,j,Y,q=Ws(t.props,"clippable"),m=q.keepRatio,b=0,x=0,r=r.draggable,X=as(e),x=I&&r?(H=r.prevBeforeDist,b=H[0],H[1]):(b=X[0],X[1]),H=[b,x],E=t.state,L=E.width,V=E.height,a=!a&&!i&&!o,o=n.type,S=n.poses,U=n.splitter,y=S.map(function(t){return t.pos}),a=(a&&(b=-b,x=-x),!i||"nesw"===S[s].direction),$="inset"===o||"rect"===o,M=S.map(function(){return[0,0]}),D=(i&&!a?(f=(R=S[s]).horizontal,R=R.vertical,f=[b*Math.abs(f),x*Math.abs(R)],c=f,R=$,f=m,z=(P=(u=S)[G=s]).direction,P=P.sub,l=u.map(function(){return[0,0]}),B=z?z.split(""):[],R&&G<8?(R=B.filter(function(t){return"w"===t||"e"===t}),w=B.filter(function(t){return"n"===t||"s"===t}),k=R[0],F=w[0],l[G]=c,w=(R=Jc(u))[0],R=R[1],(D=w&&R?w/R:0)&&f?(f=u[(G+4)%8].pos,C=[0,0],-1<z.indexOf("w")?C[0]=-1:-1<z.indexOf("e")&&(C[0]=1),-1<z.indexOf("n")?C[1]=-1:-1<z.indexOf("s")&&(C[1]=1),D=w+(w=pu([w,R],c,D,C,!0))[0],R=R+w[1],w=f[1],p=f[1],O=f[0],f=f[0],-1===C[0]?O=f-D:1===C[0]?f=O+D:(O-=D/2,f+=D/2),-1===C[1]?w=p-R:p=1===C[1]?w+R:(w=p-R/2)+R,N=Kc(w,f,p,O),u.forEach(function(t,e){l[e][0]=N[e].pos[0]-t.pos[0],l[e][1]=N[e].pos[1]-t.pos[1]})):(u.forEach(function(t,e){t=t.direction;t&&(-1<t.indexOf(k)&&(l[e][0]=c[0]),-1<t.indexOf(F)&&(l[e][1]=c[1]))}),k&&(l[1][0]=c[0]/2,l[5][0]=c[0]/2),F&&(l[3][1]=c[1]/2,l[7][1]=c[1]/2))):z&&!P?B.forEach(function(i){var o="n"===i||"s"===i;u.forEach(function(t,e){var n=t.direction,r=t.horizontal,t=t.vertical;n&&-1!==n.indexOf(i)&&(l[e]=[o||!r?0:c[0],o&&t?c[1]:0])})}):l[G]=c,M=l):a&&(M=y.map(function(){return[b,x]})),y.map(function(t,e){return J(t,M[e])})),C=nt([],D,!0),R=(E.snapBoundInfos=null,"circle"===n.type),w="ellipse"===n.type,O=((R||w)&&(d=Ts(D),f=Math.abs(d.bottom-d.top),p=Math.abs(w?d.right-d.left:f),h=D[0][1]+f,g=D[0][0]-p,v=D[0][0]+p,R&&(C.push([v,d.bottom]),M.push([1,0])),C.push([d.left,h]),M.push([0,1]),C.push([g,d.bottom]),M.push([1,0])),Du((q.clipHorizontalGuidelines||[]).map(function(t){return Z("".concat(t),V)}),(q.clipVerticalGuidelines||[]).map(function(t){return Z("".concat(t),L)}),L,V)),z=[],P=[],B=(P=R||w?(z=[C[4][0],C[2][0]],[C[1][1],C[3][1]]):$?(Y=[C[0],C[2],C[4],C[6]],W=[M[0],M[2],M[4],M[6]],z=Y.filter(function(t,e){return W[e][0]}).map(function(t){return t[0]}),Y.filter(function(t,e){return W[e][1]}).map(function(t){return t[1]})):(z=C.filter(function(t,e){return M[e][0]}).map(function(t){return t[0]}),C.filter(function(t,e){return M[e][1]}).map(function(t){return t[1]})),[0,0]),G=oc(O,q.clipTargetBounds&&{left:0,top:0,right:L,bottom:V},z,P,5),a=G.horizontal,y=G.vertical,T=a.offset,_=y.offset,a=(a.isBound&&(B[1]+=T),y.isBound&&(B[0]+=_),(w||R)&&0===M[0][0]&&0===M[0][1]?(A=(d=Ts(D)).bottom-d.top,d=w?d.right-d.left:A,d-=y.isBound?Math.abs(_):0===y.snapIndex?-_:_,A-=a.isBound?Math.abs(T):0===a.snapIndex?-T:T,R&&(d=A=0<Tu(y,a)?A:d),y=C[0],C[1][1]=y[1]-A,C[2][0]=y[0]+d,C[3][1]=y[1]+A,C[4][0]=y[0]-d):$&&m&&i?(A=(a=Jc(S))[0],y=a[1],d=A&&y?A/y:0,m=S[s].direction||"",i=C[1][1],h=C[5][1],g=C[7][0],v=C[3][0],T<=_?T=_/d:_=T*d,-1<m.indexOf("w")?g-=_:-1<m.indexOf("e")?v-=_:(g+=_/2,v-=_/2),-1<m.indexOf("n")?i-=T:-1<m.indexOf("s")?h-=T:(i+=T/2,h-=T/2),j=Kc(i,v,h,g),C.forEach(function(t,e){e=j[e].pos;t[0]=e[0],t[1]=e[1]})):C.forEach(function(t,e){e=M[e];e[0]&&(t[0]-=_),e[1]&&(t[1]-=T)}),Zc(t,n,D)),A="".concat(o,"(").concat(a.join(U),")");return E.clipPathState=A,P=R||w?(z=[C[4][0],C[2][0]],[C[1][1],C[3][1]]):$?(z=(Y=[C[0],C[2],C[4],C[6]]).map(function(t){return t[0]}),Y.map(function(t){return t[1]})):(z=C.map(function(t){return t[0]}),C.map(function(t){return t[1]})),E.snapBoundInfos=oc(O,q.clipTargetBounds&&{left:0,top:0,right:L,bottom:V},z,P,1),r&&(y=E.is3d,S=E.allMatrix,s=B,I&&(s=[H[0]+B[0]-X[0],H[1]+B[1]-X[1]]),r.deltaOffset=K(S,[s[0],s[1],0,0],y?4:3)),it(t,"onClip",rt(t,e,{clipEventType:"changed",clipType:o,poses:D,clipStyle:A,clipStyles:a,distX:b,distY:x})),!0},dragControlEnd:function(t,e){this.unset(t);var n=e.isDrag,r=e.datas,i=e.isDouble,o=r.isLine,a=r.isClipStart,r=r.isControl;return!!a&&(it(t,"onClipEnd",Ks(t,e,{})),i&&(r?function(t,e){var n=(r=e.datas).clipPath,r=r.clipIndex,i=n.type,o=n.poses,a=n.splitter,s=o.map(function(t){return t.pos}),u=s.length;if("polygon"===i)o.splice(r,1),s.splice(r,1);else{if("inset"!==i)return;if(r<8)return;if(Hc(o,s,r,8,u),u===o.length)return}r=Zc(t,n,s),it(t,"onClip",rt(t,e,{clipEventType:"removed",clipType:i,poses:s,clipStyles:r,clipStyle:"".concat(i,"(").concat(r.join(a),")"),distX:0,distY:0}))}(t,e):o&&function(t,e){var n=(r=ts(t,e))[0],r=r[1],i=(o=e.datas).clipPath,o=o.clipIndex,a=i.type,s=i.poses,u=i.splitter,c=s.map(function(t){return t.pos});if("polygon"===a)c.splice(o,0,[n,r]);else{if("inset"!==a)return;var l=Fc.indexOf(o),o=Nc.indexOf(o),f=s.length;if(Lc(s,c,8,l,o,n,r,c[4][0],c[4][1],c[0][0],c[0][1]),f===s.length)return}l=Zc(t,i,c),it(t,"onClip",rt(t,e,{clipEventType:"added",clipType:a,poses:c,clipStyles:l,clipStyle:"".concat(a,"(").concat(l.join(u),")"),distX:0,distY:0}))}(t,e)),i||n)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},tl={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t,e){return e.isRequest?"originDraggable"===e.requestAble:P(e.inputEvent.target,L("origin"))},dragControlStart:function(t,e){var n=e.datas,e=(es(t,e),rt(t,e,{dragStart:wc.dragStart(t,(new Qa).dragStart([0,0],e))})),r=it(t,"onDragOriginStart",e);return n.startOrigin=t.state.transformOrigin,n.startTargetOrigin=t.state.targetOrigin,n.prevOrigin=[0,0],!(n.isDragOrigin=!0)===r?n.isDragOrigin=!1:e},dragControl:function(t,e){var n=e.datas,r=e.isPinch,i=e.isRequest;if(!n.isDragOrigin)return!1;var o=as(e),a=o[0],o=o[1],s=t.state,u=s.width,c=s.height,l=s.offsetMatrix,f=s.targetMatrix,s=s.is3d,p=t.props.originRelative,p=void 0===p||p,s=s?4:3,a=[a,o],i=(!i||((o=e.distOrigin)[0]||o[1])&&(a=o),J(n.startOrigin,a)),o=J(n.startTargetOrigin,a),d=T(a,n.prevOrigin),l=us(l,f,i,s),f=t.getRect(),l=Ts(Gs(l,u,c,s)),s=[f.left-l.left,f.top-l.top],f=rt(t,e,{width:u,height:c,origin:i,dist:n.prevOrigin=a,delta:d,transformOrigin:[au(o[0],u,p),au(o[1],c,p)].join(" "),drag:wc.drag(t,Ja(e,t.state,s,!!r,!1))});return it(t,"onDragOrigin",f),f},dragControlEnd:function(t,e){return!!e.datas.isDragOrigin&&(it(t,"onDragOriginEnd",Ks(t,e,{})),!0)},dragGroupControlCondition:function(t,e){return this.dragControlCondition(t,e)},dragGroupControlStart:function(t,e){return!!this.dragControlStart(t,e)},dragGroupControl:function(t,e){e=this.dragControl(t,e);return!!e&&(t.transformOrigin=e.transformOrigin,!0)},request:function(t){var e={},n=t.getRect(),r=0,i=0,o=n.transformOrigin,a=[0,0];return{isControl:!0,requestStart:function(){return{datas:e}},request:function(t){return"deltaOrigin"in t?(a[0]+=t.deltaOrigin[0],a[1]+=t.deltaOrigin[1]):"origin"in t?(a[0]=t.origin[0]-o[0],a[1]=t.origin[1]-o[1]):("x"in t?r=t.x-n.left:"deltaX"in t&&(r+=t.deltaX),"y"in t?i=t.y-n.top:"deltaY"in t&&(i+=t.deltaY)),{datas:e,distX:r,distY:i,distOrigin:a}},requestEnd:function(){return{datas:e,isDrag:!0}}}}};function el(t,e,n,r,i){void 0===r&&(r=[0,0]);return Xc(!(t=i||(t=Qs(t))&&t.borderRadius||"")||!i&&"0px"===t?[]:S(t),e,n,0,0,r)}function nl(t,e,n,r,i,o){var a=t.state,s=a.width,u=a.height,o=Yc(o,i,t.props.roundRelative,s,u),c=o.raws,o=o.styles,i=Vc(i,c),c=i.horizontals,i=i.verticals,o=o.join(" ");it(t,"onRound",rt(t,e,{horizontals:c,verticals:i,borderRadius:a.borderRadiusState=o,width:s,height:u,delta:r,dist:n}))}var rl={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,r){var e=t.state,n=e.target,i=e.width,o=e.height,a=e.allMatrix,s=e.is3d,u=e.left,c=e.top,e=e.borderRadiusState,t=t.props,l=t.minRoundControls,f=t.maxRoundControls,p=void 0===f?[4,4]:f,d=t.zoom;if(!n)return null;var h=s?4:3,f=el(n,i,o,void 0===l?[0,0]:l,e);if(!f)return null;var g=0,v=0;return f.map(function(t,e){v+=Math.abs(t.horizontal),g+=Math.abs(t.vertical);var n=T(V(a,t.pos,h),[u,c]),t=t.vertical?g<=p[1]:v<=p[0];return r.createElement("div",{key:"borderRadiusControl".concat(e),className:L("control","border-radius"),"data-radius-index":e,style:{display:t?"block":"none",transform:"translate(".concat(n[0],"px, ").concat(n[1],"px) scale(").concat(d,")")}})})},dragControlCondition:function(t,e){if(!e.inputEvent||e.isRequest)return!1;e=e.inputEvent.target.getAttribute("class")||"";return-1<e.indexOf("border-radius")||-1<e.indexOf("moveable-line")&&-1<e.indexOf("moveable-direction")},dragControlStart:function(t,e){var n=e.inputEvent,r=e.datas,n=n.target,i=n.getAttribute("class")||"",o=-1<i.indexOf("border-radius"),i=-1<i.indexOf("moveable-line")&&-1<i.indexOf("moveable-direction"),a=o?parseInt(n.getAttribute("data-radius-index"),10):-1,n=i?parseInt(n.getAttribute("data-line-index"),10):-1;if(!o&&!i)return!1;if(!1===it(t,"onRoundStart",rt(t,e,{})))return!1;r.lineIndex=n,r.controlIndex=a,r.isControl=o,r.isLine=i,es(t,e);n=t.props,a=n.roundRelative,o=n.minRoundControls,i=void 0===o?[0,0]:o,e=t.state,n=e.target,o=e.width,t=e.height,r.isRound=!0,r.prevDist=[0,0],n=el(n,o,t,i)||[];return r.controlPoses=n,e.borderRadiusState=Yc(n.map(function(t){return t.pos}),n,a,o,t).styles.join(" "),!0},dragControl:function(t,e){var n=e.datas;if(!n.isRound||!n.isControl||!n.controlPoses.length)return!1;var r=n.controlIndex,i=n.controlPoses,o=as(e),a=o[0],o=o[1],s=[a,o],u=T(s,n.prevDist),c=t.props.maxRoundControls,l=void 0===c?[4,4]:c,c=t.state,f=c.width,p=c.height,c=i[r],d=c.vertical,h=c.horizontal,g=i.map(function(t){var e=t.horizontal,t=t.vertical,n=[e*h*s[0],t*d*s[1]];if(e){if(1===l[0])return n;if(l[0]<4&&e!==h)return n}else{if(0===l[1])return n[1]=t*h*s[0]/f*p,n;if(d){if(1===l[1])return n;if(l[1]<4&&t!==d)return n}}return[0,0]}),c=(g[r]=s,i.map(function(t,e){return J(t.pos,g[e])}));return n.prevDist=[a,o],nl(t,e,s,u,i,c),!0},dragControlEnd:function(t,e){var n=t.state,r=(n.borderRadiusState="",e.datas),i=e.isDouble;if(!r.isRound)return!1;var o,a,s,u=n.width,c=n.height,l=r.isControl,f=r.controlIndex,p=r.isLine,d=r.lineIndex,r=r.controlPoses,h=r.map(function(t){return t.pos}),g=h.length,v=t.props.roundClickable;return i&&(void 0===v||v)&&(l?Hc(r,h,f,0):p&&(v=(i=ts(t,e))[0],l=i[1],f=h,p=d,i=v,d=l,v=u,l=c,o=(c=Vc(u=r)).horizontals,c=c.verticals,o=o.length,c=c.length,s=a=-1,0===p?0===o?a=0:1===o&&(a=1):3===p&&(o<=2?a=2:o<=3&&(a=3)),2===p?0===c?s=0:c<4&&(s=3):1===p&&(c<=1?s=1:c<=2&&(s=2)),Lc(u,f,0,a,s,i,d,v,l)),g!==r.length&&nl(t,e,[0,0],[0,0],r,h)),it(t,"onRoundEnd",Ks(t,e,{})),!(n.borderRadiusState="")},unset:function(t){t.state.borderRadiusState=""}};var il={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},dragRelation:"weak",setTransform:function(t,e){var t=t.state,n=t.is3d,r=t.target,t=t.targetMatrix,r=null==r?void 0:r.style.transform,t=n?"matrix3d(".concat(t.join(","),")"):"matrix(".concat(Me(t,!0),")"),r=r&&"none"!==r?r:t;e.datas.startTransforms=(t=r,n=k((e=n)?4:3),t==="matrix".concat(e?"3d":"","(").concat(n.join(","),")")||"matrix(1,0,0,1,0,0)"===t?[]:S(r))},resetTransform:function(t){t.datas.nextTransforms=t.datas.startTransforms,t.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,e){return rt(t,e,{setTransform:function(t){e.datas.startTransforms=$(t)?t:S(t)},isPinch:!!e.isPinch})},fillDragParams:function(t,e){return rt(t,e,{isPinch:!!e.isPinch})},dragStart:function(t,e){this.setTransform(t,e),it(t,"onBeforeRenderStart",this.fillDragStartParams(t,e))},drag:function(t,e){this.resetTransform(e),it(t,"onBeforeRender",rt(t,e,{isPinch:!!e.isPinch}))},dragEnd:function(t,e){it(t,"onBeforeRenderEnd",rt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag}))},dragGroupStart:function(t,e){var n=this,r=(this.dragStart(t,e),hu(t,"beforeRenderable",e)),i=t.moveables,r=r.map(function(t,e){e=i[e];return n.setTransform(e,t),n.fillDragStartParams(e,t)});it(t,"onBeforeRenderGroupStart",rt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,setTransform:function(){},events:r}))},dragGroup:function(t,e){var n=this,r=(this.drag(t,e),hu(t,"beforeRenderable",e)),i=t.moveables,r=r.map(function(t,e){e=i[e];return n.resetTransform(t),n.fillDragParams(e,t)});it(t,"onBeforeRenderGroup",rt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,events:r}))},dragGroupEnd:function(t,e){this.dragEnd(t,e),it(t,"onBeforeRenderGroupEnd",rt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)}},ol={name:"renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragRelation:"weak",dragStart:function(t,e){it(t,"onRenderStart",rt(t,e,{isPinch:!!e.isPinch}))},drag:function(t,e){it(t,"onRender",this.fillDragParams(t,e))},dragAfter:function(t,e){if(e.resultCount)return this.drag(t,e)},dragEnd:function(t,e){it(t,"onRenderEnd",this.fillDragEndParams(t,e))},dragGroupStart:function(t,e){it(t,"onRenderGroupStart",rt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets}))},dragGroup:function(t,e){var n=this,r=hu(t,"beforeRenderable",e),i=t.moveables,r=r.map(function(t,e){e=i[e];return n.fillDragParams(e,t)});it(t,"onRenderGroup",rt(t,e,{isPinch:!!e.isPinch,targets:t.props.targets,transform:hs(e),events:r}))},dragGroupEnd:function(t,e){var n=this,r=hu(t,"beforeRenderable",e),i=t.moveables,r=r.map(function(t,e){e=i[e];return n.fillDragEndParams(e,t)});it(t,"onRenderGroupEnd",rt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag,targets:t.props.targets,events:r}))},dragControlStart:function(t,e){return this.dragStart(t,e)},dragControl:function(t,e){return this.drag(t,e)},dragControlAfter:function(t,e){return this.dragAfter(t,e)},dragControlEnd:function(t,e){return this.dragEnd(t,e)},dragGroupControlStart:function(t,e){return this.dragGroupStart(t,e)},dragGroupControl:function(t,e){return this.dragGroup(t,e)},dragGroupControlEnd:function(t,e){return this.dragGroupEnd(t,e)},fillDragParams:function(t,e){return rt(t,e,{isPinch:!!e.isPinch,transform:hs(e)})},fillDragEndParams:function(t,e){return rt(t,e,{isPinch:!!e.isPinch,isDrag:e.isDrag})}};function al(n,t,e,r,i,o,a){var s="Start"===i,u=n.state.target,c=o.isRequest;if(!u||s&&-1<r.indexOf("Control")&&!c&&n.areaElement===o.inputEvent.target)return!1;var l,f="".concat(e).concat(r).concat(i),p="".concat(e).concat(r,"Condition"),d="End"===i,u="After"===i,h=!(!s||n.targetGesto&&n.controlGesto&&n.targetGesto.isFlag()&&n.controlGesto.isFlag()),g=(h&&n.updateRect(i,!0,!1),""!==i||c||iu(n.state,o),nt([],n[t],!0));if(c&&(l=o.requestAble,g.some(function(t){return t.name===l})||g.push.apply(g,n.props.ables.filter(function(t){return t.name===l}))),!g.length)return!1;var v,g=nt(nt([il],g,!0),[ol],!1).filter(function(t){return t[f]}),m=o.datas,b=(h&&g.forEach(function(t){t.unset&&t.unset(n)}),o.inputEvent),x=(d&&b&&(v=document.elementFromPoint(o.clientX,o.clientY)||b.target),0),b=g.filter(function(t){var e=t.name,e=m[e]||(m[e]={});return s&&(e.isEventStart=!t[p]||t[p](n,o)),!!e.isEventStart&&(t=t[f](n,X(X({},o),{resultCount:x,datas:e,originalDatas:m,inputTarget:v})),n._emitter.off(),s&&!1===t&&(e.isEventStart=!1),x+=t?1:0,t)}).length,E=!1;return s&&g.length&&!b&&(E=0===g.filter(function(t){var e=t.name,e=m[e];return!!e.isEventStart&&("strong"!==t.dragRelation||(e.isEventStart=!1))}).length),(d||E)&&(n.state.gestos={},n.moveables&&n.moveables.forEach(function(t){t.state.gestos={}})),h&&E&&g.forEach(function(t){t.unset&&t.unset(n)}),s&&!c&&b&&null!=o&&o.preventDefault(),!n.isUnmounted&&!E&&((!s&&b&&!a||d)&&(n.props.flushSync||Es)(function(){n.updateRect(d?i:"",!0,!1),n.forceUpdate()}),s||d||u||!b||a||al(n,t,e,r,i+"After",o),!0)}function sl(e,t,n){function r(t){return(t=t.inputEvent.target)===e.areaElement||!e.isMoveableElement(t)&&!e.controlBox.getElement().contains(t)||P(t,"moveable-area")||P(t,"moveable-padding")}var i=e.controlBox.getElement(),o=[];o.push(i),e.props.dragArea&&!e.props.dragTarget||o.push(t);return ul(e,o,"targetAbles",n,{dragStart:r,pinchStart:r})}function ul(i,t,o,a,s){void 0===s&&(s={});var e=i.props,n=e.pinchOutside,e=e.pinchThreshold,e={preventDefault:!1,preventRightClick:!0,preventWheelClick:!0,container:window,pinchThreshold:e,pinchOutside:n},u=new bn(t,e),c="Control"===a;return["drag","pinch"].forEach(function(r){["Start","","End"].forEach(function(n){u.on("".concat(r).concat(n),function(t){var e=t.eventType;(!s[e]||s[e](t))&&al(i,o,r,a,n,t)?"Start"===n&&c&&null!=(e=null==t?void 0:t.inputEvent)&&e.stopPropagation():t.stop()})})}),u}var cl=function(){function t(t,e,n){var i=this;this.target=t,this.moveable=e,this.eventName=n,this.ables=[],this._onEvent=function(e){var n=i.eventName,r=i.moveable;r.state.disableNativeEvent||i.ables.forEach(function(t){t[n](r,{inputEvent:e})})},t.addEventListener(n.toLowerCase(),this._onEvent)}var e=t.prototype;return e.setAbles=function(t){this.ables=t},e.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this._onEvent),this.target=null,this.moveable=null},t}();function ll(t,e,n,r){void 0===n&&(n=e);var e=zs(t,e),i=e.matrixes,o=e.is3d,a=e.targetMatrix,s=e.transformOrigin,u=e.targetOrigin,c=e.offsetContainer,e=e.hasFixed,l=zs(c,n,!0),f=l.matrixes,p=l.is3d,l=l.offsetContainer,r=r||p||o,d=r?4:3,t="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,h=k(d),g=k(d),v=k(d),m=k(d),b=i.length,p=(f.reverse(),i.reverse(),!o&&r&&(a=I(a,3,4),Os(i)),!p&&r&&Os(f),f.forEach(function(t){g=K(g,t.matrix,d)}),n||document.body),x=(null==(n=f[0])?void 0:n.target)||Cs(p,p,!0).offsetParent,E=f.slice(1).reduce(function(t,e){return K(t,e.matrix,d)},k(d)),n=(i.forEach(function(t,e){b-2===e&&(v=h.slice()),b-1===e&&(m=h.slice()),t.matrix||(e=function(t,e,n,r,i){var o=t.target,t=t.origin,a=e.matrix,s=(e=js(o)).offsetWidth,u=e.offsetHeight,e=n.getBoundingClientRect(),c=[0,0];n===document.body&&(c=ws(o,!0));for(var l=(o=o.getBoundingClientRect()).left-e.left+n.scrollLeft-(n.clientLeft||0)+c[0],f=o.top-e.top+n.scrollTop-(n.clientTop||0)+c[1],e=o.width,n=o.height,c=Se(r,i,a),p=(o=_s(c,s,u,r)).left,d=o.top,h=o.width,o=o.height,g=V(c,t,r),c=T(g,[p,d]),v=[l+c[0]*e/h,f+c[1]*n/o],m=[0,0],b=0;++b<10;){var x=y(i,r),x=T(V(x,v,r),V(x,g,r));m[0]=x[0],m[1]=x[1];var x=_s(Se(r,i,Te(m,r),a),s,u,r),E=x.left-l,x=x.top-f;if(Math.abs(E)<2&&Math.abs(x)<2)break;v[0]-=E,v[1]-=x}return m.map(function(t){return Math.round(t)})}(t,i[e+1],x,d,K(E,h,d)),t.matrix=Te(e,d)),h=K(h,t.matrix,d)}),!t&&o),a=a||k(n?4:3),p=Ps(t&&16===a.length?I(a,4,3):a,n);return{hasFixed:e,rootMatrix:g=me(g,d,d),beforeMatrix:v,offsetMatrix:m,allMatrix:h,targetMatrix:a,targetTransform:p,transformOrigin:s,targetOrigin:u,is3d:r,offsetContainer:c,offsetRootContainer:l}}function fl(t,e,n,r,i){var o,a,s,u,c,l,f=1,p=[0,0],d=qs(),h=qs(),g=qs(),v=qs(),m=(n=n,o=!0,void 0===(i=i)&&(i=n),s=a=l=0,u={},c=js(m=e),m&&(l=c.offsetWidth,a=c.offsetHeight),m&&(n=As((m=ll(m,n,i,o)).allMatrix,m.transformOrigin,l,a),u=X(X({},m),n),s=Ys([(i=As(m.allMatrix,[50,50],100,100)).pos1,i.pos2],i.direction)),n=o?4:3,X(X(X({width:l,height:a,rotation:s},c),{rootMatrix:k(n),beforeMatrix:k(n),offsetMatrix:k(n),allMatrix:k(n),targetMatrix:k(n),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!o,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1,hasFixed:!1,offsetContainer:null,offsetRootContainer:null}),u));return e&&(i=m.is3d?4:3,f=(l=As(m.offsetMatrix,J(m.transformOrigin,be(m.targetMatrix,i)),m.width,m.height)).direction,p=J(l.origin,[l.left-m.left,l.top-m.top]),d=Xs(e),g=Xs(Cs(r,r,!0).offsetParent||m.offsetRootContainer,!0),v=Xs(m.offsetRootContainer),t&&(h=Xs(t))),X({targetClientRect:d,containerClientRect:g,moveableClientRect:h,rootContainerClientRect:v,beforeDirection:f,beforeOrigin:p,originalBeforeOrigin:p,target:e},m)}var pl=function(t){var e=i,n=t;if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.state=X({container:null,gestos:{},renderPoses:[[0,0],[0,0],[0,0],[0,0]],disableNativeEvent:!1},fl(null)),e.renderState={},e.enabledAbles=[],e.targetAbles=[],e.controlAbles=[],e.rotation=0,e.scale=[1,1],e.isUnmounted=!1,e.events={mouseEnter:null,mouseLeave:null},e._emitter=new ka,e._prevTarget=null,e._prevDragArea=!1,e._observer=null,e._observerId=0,e.onPreventClick=function(t){t.stopPropagation(),t.preventDefault()},e.checkUpdateRect=function(){var t;e.isDragging()||((t=e.props.parentMoveable)?t.checkUpdateRect():(bt(e._observerId),e._observerId=mt(function(){e.isDragging()||e.updateRect()})))},e}Fa(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r);n=i.prototype;return n.render=function(){var t=this.props,e=this.state,n=t.parentPosition,r=t.className,i=t.target,o=t.zoom,a=t.cspNonce,s=t.translateZ,u=t.cssStyled,c=t.portalContainer,n=(this.checkUpdate(),this.updateRenderPoses(),n||{left:0,top:0}),l=n.left,n=n.top,f=e.left,p=e.top,d=e.target,h=e.direction,e=e.hasFixed,t=t.targets,t=(t&&t.length||i)&&d,i=this.isDragging(),g={};return this.getEnabledAbles().forEach(function(t){g["data-able-".concat(t.name.toLowerCase())]=!0}),m(u,X({cspNonce:a,ref:v(this,"controlBox"),className:"".concat(L("control-box",-1===h?"reverse":"",i?"dragging":"")," ").concat(r)},g,{onClick:this.onPreventClick,portalContainer:c,style:{position:e?"fixed":"absolute",display:t?"block":"none",transform:"translate3d(".concat(f-l,"px, ").concat(p-n,"px, ").concat(s,")"),"--zoom":o,"--zoompx":"".concat(o,"px")}}),this.renderAbles(),this._renderLines())},n.componentDidMount=function(){this.isUnmounted=!1,this.controlBox.getElement();var t=this.props,e=t.parentMoveable,n=t.container,t=t.wrapperMoveable;this._updateTargets(),this._updateNativeEvents(),this._updateEvents(),n||e||t||this.updateRect("",!1,!0),this.updateCheckInput(),this._updateObserver(this.props)},n.componentDidUpdate=function(t){this._updateNativeEvents(),this._updateEvents(),this._updateTargets(),this.updateCheckInput(),this._updateObserver(t)},n.componentWillUnmount=function(){this.isUnmounted=!0,this._emitter.off(),Us(this,"targetGesto"),Us(this,"controlGesto");var t,e=this.events;for(t in e){var n=e[t];n&&n.destroy()}},n.getAble=function(e){return vt(this.props.ables||[],function(t){return t.name===e})},n.getContainer=function(){var t=this.props,e=t.parentMoveable,n=t.wrapperMoveable;return t.container||n&&n.getContainer()||e&&e.getContainer()||this.controlBox.getElement().parentElement},n.isMoveableElement=function(t){return t&&-1<(t.getAttribute("class")||"").indexOf(qa)},n.dragStart=function(t){var e=this.targetGesto;return e&&!e.isFlag()&&e.triggerDragStart(t),this},n.hitTest=function(t){var e=this.state,n=e.target,r=e.pos1,i=e.pos2,o=e.pos3,a=e.pos4,e=e.targetClientRect;if(!n)return 0;var t=(n=t instanceof Element?{left:(n=t.getBoundingClientRect()).left,top:n.top,width:n.width,height:n.height}:X({width:0,height:0},t)).left,s=n.top,u=n.width,n=n.height,r=Le([r,i,a,o],e),i=tn(r,[[t,s],[t+u,s],[t+u,s+n],[t,s+n]]),a=He(r);return i&&a?Math.min(100,i/a*100):0},n.isInside=function(t,e){var n=this.state,r=n.target,i=n.pos1,o=n.pos2,a=n.pos3,s=n.pos4,n=n.targetClientRect;return!!r&&Ue([t,e],Le([i,o,s,a],n))},n.updateRect=function(t,e,n){void 0===n&&(n=!0);var r=this.props,i=r.parentMoveable,o=this.state.target||this.props.target,a=this.getContainer(),r=(i?i.props:r).rootContainer;this.updateState(fl(this.controlBox&&this.controlBox.getElement(),o,a,a,r||a),!i&&n)},n.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},n.updateTarget=function(t){this.updateRect(t,!0)},n.getRect=function(){var t=this.state,e=Vs(this.state),n=e[0],r=e[1],i=e[2],o=e[3],e=Ts(e),a=t.width,s=t.height,u=e.width,c=e.height,l=e.left,e=e.top,f=[t.left,t.top],p=J(f,t.origin);return{width:u,height:c,left:l,top:e,pos1:n,pos2:r,pos3:i,pos4:o,offsetWidth:a,offsetHeight:s,beforeOrigin:J(f,t.beforeOrigin),origin:p,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},n.getManager=function(){return this},n.getRotation=function(){var t=this.state,e=t.pos1,n=t.pos2,t=t.direction;return t=t,e=F(e=e,n)/Math.PI*180,e=0<=(e=0<=t?e:180-e)?e:360+e},n.request=function(e,t,n){void 0===t&&(t={});var r=this.props,i=r.ables,r=r.groupable,i=i.filter(function(t){return t.name===e})[0];if(this.isDragging()||!i||!i.request)return{request:function(){return this},requestEnd:function(){return this}};var o=this,a=i.request(this),s=n||t.isInstant,u=a.isControl?"controlAbles":"targetAbles",c="".concat(r?"Group":"").concat(a.isControl?"Control":""),i={request:function(t){return al(o,u,"drag",c,"",X(X({},a.request(t)),{requestAble:e,isRequest:!0}),s),this},requestEnd:function(){return al(o,u,"drag",c,"End",X(X({},a.requestEnd()),{requestAble:e,isRequest:!0}),s),this}};return al(o,u,"drag",c,"Start",X(X({},a.requestStart(t)),{requestAble:e,isRequest:!0}),s),s?i.request(t).requestEnd():i},n.destroy=function(){this.componentWillUnmount()},n.updateRenderPoses=function(){var t=this.state,e=this.props,n=t.originalBeforeOrigin,r=t.transformOrigin,i=t.allMatrix,o=t.is3d,a=t.pos1,s=t.pos2,u=t.pos3,c=t.pos4,l=t.left,f=t.top,p=e.padding||{},d=p.left,d=void 0===d?0:d,h=p.top,h=void 0===h?0:h,g=p.bottom,g=void 0===g?0:g,p=p.right,p=void 0===p?0:p,o=o?4:3,e=e.groupable?n:J(n,[l,f]);t.renderPoses=[J(a,ou(i,[-d,-h],r,e,o)),J(s,ou(i,[p,-h],r,e,o)),J(u,ou(i,[-d,g],r,e,o)),J(c,ou(i,[p,g],r,e,o))]},n.checkUpdate=function(){var t=this.props,e=t.target,n=t.container,t=t.parentMoveable,r=this.state,i=r.target,r=r.container;(i||e)&&(this.updateAbles(),eu(i,e)&&eu(r,n)||((i=n||this.controlBox)&&this.unsetAbles(),this.updateState({target:e,container:n}),!t&&i&&this.updateRect("End",!1,!1)))},n.triggerEvent=function(t,e){this._emitter.trigger(t,e);t=this.props[t];return t&&t(e)},n.useCSS=function(t,e){var n,r,i=this.props.customStyledMap,o=t+e;return i[o]||(i[o]=(n=t,r=Sn(e),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.injector=r,t.tag=n,t}return Ta(t,e),t}(Aa))),i[o]},n.unsetAbles=function(){var e=this;this.targetAbles.forEach(function(t){t.unset&&t.unset(e)})},n.updateAbles=function(t,e){void 0===t&&(t=this.props.ables),void 0===e&&(e="");var n=this.props,r=n.triggerAblesSimultaneously,t=t.filter(function(t){return t&&(t.always&&!1!==n[t.name]||n[t.name])}),i="drag".concat(e,"Start"),o="pinch".concat(e,"Start"),e="drag".concat(e,"ControlStart"),i=tu(t,[i,o],r),o=tu(t,[e],r);this.enabledAbles=t,this.targetAbles=i,this.controlAbles=o},n.updateState=function(t,e){if(e)this.isUnmounted||this.setState(t);else{var n,r=this.state;for(n in t)r[n]=t[n]}},n.getEnabledAbles=function(){var e=this.props;return e.ables.filter(function(t){return t&&e[t.name]})},n.renderAbles=function(){var r,i,o,a,e=this,t=this.props.triggerAblesSimultaneously,n={createElement:m};return this.renderState={},t=tu(this.getEnabledAbles(),["render"],t).map(function(t){return(0,t.render)(e,n)||[]}),r=t.reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t}),i=function(t){return t.key},o=[],a={},r.forEach(function(t,e){var e=i(t,e,r),n=a[e];n||(a[e]=n=[],o.push(n)),n.push(t)}),o.map(function(t){return t[0]})},n.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n._updateObserver=function(t){var e=this.props,n=e.target;window.ResizeObserver&&n&&e.useResizeObserver?t.target===n&&this._observer||((e=new ResizeObserver(this.checkUpdateRect)).observe(n,{box:"border-box"}),this._observer=e):null!=(t=this._observer)&&t.disconnect()},n._updateEvents=function(){var t=this.controlBox.getElement(),e=this.targetAbles.length,n=this.controlAbles.length,r=this.props,r=r.dragTarget||r.target;(!e&&this.targetGesto||this._isTargetChanged(!0))&&(Us(this,"targetGesto"),this.updateState({gesto:null})),n||Us(this,"controlGesto"),r&&e&&!this.targetGesto&&(this.targetGesto=sl(this,r,"")),!this.controlGesto&&n&&(this.controlGesto=ul(this,t,"controlAbles","Control"))},n._updateTargets=function(){var t=this.props;this._prevTarget=t.dragTarget||t.target,this._prevDragArea=t.dragArea},n._renderLines=function(){var t=this.props,r=t.zoom,e=t.hideDefaultLines,n=t.hideChildMoveableDefaultLines,t=t.parentMoveable;if(e||t&&n)return[];var i=this.state.renderPoses,o={createElement:m};return[[0,1],[1,3],[3,2],[2,0]].map(function(t,e){var n=t[0],t=t[1];return bc(o,"",i[n],i[t],r,e)})},n._isTargetChanged=function(t){var e=this.props,n=e.dragTarget||e.target,r=this._prevTarget,i=this._prevDragArea,e=e.dragArea;return!e&&r!==n||(t||e)&&i!==e},n._updateNativeEvents=function(){var i,o=this,a=this.props.dragArea?this.areaElement:this.state.target,s=this.events,t=xt(s);if(this._isTargetChanged())for(var e in s){var n=s[e];n&&n.destroy(),s[e]=null}a&&(i=this.enabledAbles,t.forEach(function(t){var e=tu(i,[t]),n=0<e.length,r=s[t];n?(r||(r=new cl(a,o,t),s[t]=r),r.setAbles(e)):r&&(r.destroy(),s[t]=null)}))},i.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,parentMoveable:null,wrapperMoveable:null,parentPosition:null,portalContainer:null,useResizeObserver:!1,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,hideDefaultLines:!1,cspNonce:"",translateZ:0,cssStyled:null,customStyledMap:{},props:{},flushSync:Es},i}($t),$t={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean,hideChildMoveableDefaultLines:Boolean},events:{},render:function(n,r){var t=n.props.targets||[],e=(n.moveables=[],n.state),i={left:e.left,top:e.top},o=n.props;return t.map(function(t,e){return r.createElement(pl,{key:"moveable"+e,ref:s(n,"moveables",e),target:t,origin:!1,cssStyled:o.cssStyled,customStyledMap:o.customStyledMap,useResizeObserver:o.useResizeObserver,hideChildMoveableDefaultLines:o.hideChildMoveableDefaultLines,parentMoveable:n,parentPosition:i})})}},dl=Na("clickable",{props:{clickable:Boolean,preventClickDefault:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragRelation:"weak",dragStart:function(t,e){e.isRequest||Ot(window,"click",t.onPreventClick,!0)},dragControlStart:function(t,e){this.dragStart(t,e)},dragGroupStart:function(t,e){this.dragStart(t,e),e.datas.inputTarget=e.inputEvent&&e.inputEvent.target},dragEnd:function(t,e){this.endEvent(t);var n=t.state.target,r=e.inputEvent,i=e.inputTarget,o=!t.isMoveableElement(i)&&t.controlBox.getElement().contains(i);(t.props.preventClickDefault||e.isDrag)&&!o||this.unset(t),!r||!i||e.isDrag||t.isMoveableElement(i)||o||(r=n.contains(i),it(t,"onClick",rt(t,e,{isDouble:e.isDouble,inputTarget:i,isTarget:n===i,containsTarget:r})))},dragGroupEnd:function(t,e){this.endEvent(t);var n,r,i,o=e.inputEvent,a=e.inputTarget;o&&a&&!e.isDrag&&!t.isMoveableElement(a)&&e.datas.inputTarget!==a&&(r=-1<(n=(o=t.props.targets).indexOf(a)),i=!1,-1===n&&(i=-1<(n=gt(o,function(t){return t.contains(a)}))),it(t,"onClickGroup",rt(t,e,{isDouble:e.isDouble,targets:o,inputTarget:a,targetIndex:n,isTarget:r,containsTarget:i})))},dragControlEnd:function(t,e){this.dragEnd(t,e)},dragGroupControlEnd:function(t,e){this.dragEnd(t,e)},endEvent:function(t){var e=this;mt(function(){e.unset(t)})},unset:function(t){d(window,"click",t.onPreventClick,!0)}});function hl(t){var e=t.originalDatas.draggable;return e||(t.originalDatas.draggable={},e=t.originalDatas.draggable),X(X({},t),{datas:e})}var gl=Na("edgeDraggable",{css:[".edge.edgeDraggable.line {\n    cursor: move;\n}"],render:function(t,e){var n=t.props,r=n.edgeDraggable;return r?xc(e,"edgeDraggable",r,t.state.renderPoses,n.zoom):[]},dragControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;t=e.inputEvent.target;return P(t,L("direction"))&&P(t,L("edge"))&&P(t,L("edgeDraggable"))},dragControlStart:function(t,e){return t.state.snapRenderInfo={request:e.isRequest,snap:!0,center:!0},wc.dragStart(t,hl(e))},dragControl:function(t,e){return wc.drag(t,hl(e))},dragControlEnd:function(t,e){return wc.dragEnd(t,hl(e))},dragGroupControlCondition:function(t,e){if(!t.props.edgeDraggable||!e.inputEvent)return!1;t=e.inputEvent.target;return P(t,L("direction"))&&P(t,L("line"))},dragGroupControlStart:function(t,e){return wc.dragGroupStart(t,hl(e))},dragGroupControl:function(t,e){return wc.dragGroup(t,hl(e))},dragGroupControlEnd:function(t,e){return wc.dragGroupEnd(t,hl(e))},unset:function(t){return wc.unset(t)}}),vl={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},ml=Ro,bl=Xn,xl=Co,Ro=[il,aa,Wo,Fo,wc,gl,Sa,Ma,Wt,oa,Io,ca,zo,tl,t,rl,$t,vl,dl,Mo,ol].reduce(function(t,e){return X(X({},t),e.props)},{}),El=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(function(i){function t(t,e){void 0===e&&(e={});var n=i.call(this)||this,e=(n.tempElement=document.createElement("div"),o({},e)),r={},t=(xl.forEach(function(e){r["on ".concat(e).replace(/[\s-_]([a-z])/g,function(t,e){return e.toUpperCase()})]=function(t){return n.trigger(e,t)}}),te(m(Ba,o({ref:v(n,"innerMoveable"),parentElement:t},e,r)),n.tempElement),e.target);return $(t)&&1<t.length&&n.updateRect(),n}n(t,i);var e=t.prototype;return e.setState=function(t,e){this.innerMoveable.setState(t,e)},e.forceUpdate=function(t){this.innerMoveable.forceUpdate(t)},e.dragStart=function(t){this.innerMoveable.$_timer&&this.forceUpdate(),this.getMoveable().dragStart(t)},e.destroy=function(){te(null,this.tempElement),this.off(),this.tempElement=null,this.innerMoveable=null},e.getMoveable=function(){return this.innerMoveable.moveable},function(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;0<=s;s--)(i=t[s])&&(a=(o<3?i(a):3<o?i(e,n,a):i(e,n))||a);return 3<o&&a&&Object.defineProperty(e,n,a),a}([u(bl,function(t,r){t[r]||(t[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.getMoveable();if(n&&n[r])return n[r].apply(n,t)})}),u(ml,function(t,n){Object.defineProperty(t,n,{get:function(){return this.getMoveable().props[n]},set:function(t){var e;this.setState(((e={})[n]=t,e))},enumerable:!0,configurable:!0})})],t)}(nn));var Sl,yl={__proto__:null,default:El,PROPERTIES:ml,METHODS:bl,EVENTS:xl,PROPS_MAP:Ro,getElementInfo:function(t,e,n){return ma(t,t=e,e=void 0===(e=n)?t:e,!0)},makeAble:zn};for(Sl in yl)El[Sl]=yl[Sl];return El});
//# sourceMappingURL=moveable.min.js.map
